import{aE as Tt,a8 as ue,C as St,aF as Rt,$ as he,aG as $e,a6 as Ge,aH as Me,aI as ge,Z as Ve,a1 as je,al as Ft,j as P,k as d,aJ as Bt,aK as Te,n as Lt,ak as jt,aL as qt,u as qe,q as I,aM as It,aN as Et,g as tt,m as at,d as K,_ as X,o as g,K as b,e as s,f as y,a as h,t as c,ag as pe,M as be,r as me,c as ee,w as v,ah as M,O as Ie,Q as re,L as x,aa as ne,au as ae,ax as ve,aO as zt,N as Ke,a9 as Dt}from"./index.4461c231.js";import{u as U}from"./utils.b53f77d9.js";import{Q as Pt,b as Xe}from"./QTable.52ff489b.js";import{Q as At}from"./QExpansionItem.fe9d27dd.js";import{d as Nt}from"./position-engine.ac174600.js";import{b as D}from"./QSelect.54a3e04f.js";import{F as Ut}from"./FeatureTable.a46275c8.js";const Ee={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ot=Object.keys(Ee);Ee.all=!0;function Ye(e){const a={};for(const l of Ot)e[l]===!0&&(a[l]=!0);return Object.keys(a).length===0?Ee:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const Wt=["INPUT","TEXTAREA"];function He(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&Wt.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function Se(e,a,l){const r=ge(e);let t,u=r.left-a.event.x,n=r.top-a.event.y,m=Math.abs(u),i=Math.abs(n);const f=a.direction;f.horizontal===!0&&f.vertical!==!0?t=u<0?"left":"right":f.horizontal!==!0&&f.vertical===!0?t=n<0?"up":"down":f.up===!0&&n<0?(t="up",m>i&&(f.left===!0&&u<0?t="left":f.right===!0&&u>0&&(t="right"))):f.down===!0&&n>0?(t="down",m>i&&(f.left===!0&&u<0?t="left":f.right===!0&&u>0&&(t="right"))):f.left===!0&&u<0?(t="left",m<i&&(f.up===!0&&n<0?t="up":f.down===!0&&n>0&&(t="down"))):f.right===!0&&u>0&&(t="right",m<i&&(f.up===!0&&n<0?t="up":f.down===!0&&n>0&&(t="down")));let V=!1;if(t===void 0&&l===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,V=!0,t==="left"||t==="right"?(r.left-=u,m=0,u=0):(r.top-=n,i=0,n=0)}return{synthetic:V,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:r,direction:t,isFirst:a.event.isFirst,isFinal:l===!0,duration:Date.now()-a.event.time,distance:{x:m,y:i},offset:{x:u,y:n},delta:{x:r.left-a.event.lastX,y:r.top-a.event.lastY}}}}let Qt=0;var Gt=Tt({name:"touch-pan",beforeMount(e,{value:a,modifiers:l}){if(l.mouse!==!0&&ue.has.touch!==!0)return;function r(u,n){l.mouse===!0&&n===!0?je(u):(l.stop===!0&&Me(u),l.prevent===!0&&Ge(u))}const t={uid:"qvtp_"+Qt++,handler:a,modifiers:l,direction:Ye(l),noop:St,mouseStart(u){He(u,t)&&Rt(u)&&(he(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(u,!0))},touchStart(u){if(He(u,t)){const n=u.target;he(t,"temp",[[n,"touchmove","move","notPassiveCapture"],[n,"touchcancel","end","passiveCapture"],[n,"touchend","end","passiveCapture"]]),t.start(u)}},start(u,n){if(ue.is.firefox===!0&&$e(e,!0),t.lastEvt=u,n===!0||l.stop===!0){if(t.direction.all!==!0&&(n!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const f=u.type.indexOf("mouse")>-1?new MouseEvent(u.type,u):new TouchEvent(u.type,u);u.defaultPrevented===!0&&Ge(f),u.cancelBubble===!0&&Me(f),Object.assign(f,{qKeyEvent:u.qKeyEvent,qClickOutside:u.qClickOutside,qAnchorHandled:u.qAnchorHandled,qClonedBy:u.qClonedBy===void 0?[t.uid]:u.qClonedBy.concat(t.uid)}),t.initialEvent={target:u.target,event:f}}Me(u)}const{left:m,top:i}=ge(u);t.event={x:m,y:i,time:Date.now(),mouse:n===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:m,lastY:i}},move(u){if(t.event===void 0)return;const n=ge(u),m=n.left-t.event.x,i=n.top-t.event.y;if(m===0&&i===0)return;t.lastEvt=u;const f=t.event.mouse===!0,V=()=>{r(u,f);let B;l.preserveCursor!==!0&&l.preservecursor!==!0&&(B=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),f===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Nt(),t.styleCleanup=F=>{if(t.styleCleanup=void 0,B!==void 0&&(document.documentElement.style.cursor=B),document.body.classList.remove("non-selectable"),f===!0){const Y=()=>{document.body.classList.remove("no-pointer-events--children")};F!==void 0?setTimeout(()=>{Y(),F()},50):Y()}else F!==void 0&&F()}};if(t.event.detected===!0){t.event.isFirst!==!0&&r(u,t.event.mouse);const{payload:B,synthetic:F}=Se(u,t,!1);B!==void 0&&(t.handler(B)===!1?t.end(u):(t.styleCleanup===void 0&&t.event.isFirst===!0&&V(),t.event.lastX=B.position.left,t.event.lastY=B.position.top,t.event.lastDir=F===!0?void 0:B.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||f===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){V(),t.event.detected=!0,t.move(u);return}const j=Math.abs(m),T=Math.abs(i);j!==T&&(t.direction.horizontal===!0&&j>T||t.direction.vertical===!0&&j<T||t.direction.up===!0&&j<T&&i<0||t.direction.down===!0&&j<T&&i>0||t.direction.left===!0&&j>T&&m<0||t.direction.right===!0&&j>T&&m>0?(t.event.detected=!0,t.move(u)):t.end(u,!0))},end(u,n){if(t.event!==void 0){if(Ve(t,"temp"),ue.is.firefox===!0&&$e(e,!1),n===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(Se(u===void 0?t.lastEvt:u,t).payload);const{payload:m}=Se(u===void 0?t.lastEvt:u,t,!0),i=()=>{t.handler(m)};t.styleCleanup!==void 0?t.styleCleanup(i):i()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,l.mouse===!0){const u=l.mouseCapture===!0||l.mousecapture===!0?"Capture":"";he(t,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}ue.has.touch===!0&&he(t,"main",[[e,"touchstart","touchStart",`passive${l.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const l=e.__qtouchpan;l!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&l.end(),l.handler=a.value),l.direction=Ye(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),Ve(a,"main"),Ve(a,"temp"),ue.is.firefox===!0&&$e(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchpan)}});const Je="q-slider__marker-labels",Kt=e=>({value:e}),Xt=({marker:e})=>I("div",{key:e.value,style:e.style,class:e.classes},e.label),ze=[34,37,40,33,39,38],rt={...jt,...qt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},nt=["pan","update:modelValue","change"];function st({updateValue:e,updatePosition:a,getDragging:l,formAttrs:r}){const{props:t,emit:u,slots:n,proxy:{$q:m}}=qe(),i=Ft(t,m),f=Et(r),V=P(!1),j=P(!1),T=P(!1),B=P(!1),F=d(()=>t.vertical===!0?"--v":"--h"),Y=d(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),A=d(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(m.lang.rtl===!0)),z=d(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),O=d(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),$=d(()=>t.disable!==!0&&t.readonly!==!0&&z.value<O.value),N=d(()=>(String(t.step).trim().split(".")[1]||"").length),Q=d(()=>t.step===0?1:t.step),_e=d(()=>$.value===!0?t.tabindex||0:-1),se=d(()=>t.max-t.min),oe=d(()=>O.value-z.value),ie=d(()=>ye(z.value)),le=d(()=>ye(O.value)),te=d(()=>t.vertical===!0?A.value===!0?"bottom":"top":A.value===!0?"right":"left"),k=d(()=>t.vertical===!0?"height":"width"),_=d(()=>t.vertical===!0?"width":"height"),L=d(()=>t.vertical===!0?"vertical":"horizontal"),S=d(()=>{const o={role:"slider","aria-valuemin":z.value,"aria-valuemax":O.value,"aria-orientation":L.value,"data-step":t.step};return t.disable===!0?o["aria-disabled"]="true":t.readonly===!0&&(o["aria-readonly"]="true"),o}),E=d(()=>`q-slider q-slider${F.value} q-slider--${V.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+($.value===!0?" q-slider--editable":""))+(T.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(i.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+F.value:""));function G(o){const p="q-slider__"+o;return`${p} ${p}${F.value} ${p}${F.value}${Y.value}`}function R(o){const p="q-slider__"+o;return`${p} ${p}${F.value}`}const W=d(()=>{const o=t.selectionColor||t.color;return"q-slider__selection absolute"+(o!==void 0?` text-${o}`:"")}),ce=d(()=>R("markers")+" absolute overflow-hidden"),it=d(()=>R("track-container")),ot=d(()=>G("pin")),lt=d(()=>G("label")),ut=d(()=>G("text-container")),mt=d(()=>G("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),dt=d(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),ct=d(()=>{const o={[_.value]:t.trackSize};return t.trackImg!==void 0&&(o.backgroundImage=`url(${t.trackImg}) !important`),o}),ht=d(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),Pe=d(()=>{const o=le.value-ie.value,p={[te.value]:`${100*ie.value}%`,[k.value]:o===0?"2px":`${100*o}%`};return t.innerTrackImg!==void 0&&(p.backgroundImage=`url(${t.innerTrackImg}) !important`),p});function ft(o){const{min:p,max:w,step:C}=t;let q=p+o*(w-p);if(C>0){const H=(q-z.value)%C;q+=(Math.abs(H)>=C/2?(H<0?-1:1)*C:0)-H}return N.value>0&&(q=parseFloat(q.toFixed(N.value))),D(q,z.value,O.value)}function ye(o){return se.value===0?0:(o-t.min)/se.value}function gt(o,p){const w=ge(o),C=t.vertical===!0?D((w.top-p.top)/p.height,0,1):D((w.left-p.left)/p.width,0,1);return D(A.value===!0?1-C:C,ie.value,le.value)}const Ae=d(()=>Bt(t.markers)===!0?t.markers:Q.value),Ne=d(()=>{const o=[],p=Ae.value,w=t.max;let C=t.min;do o.push(C),C+=p;while(C<w);return o.push(w),o}),Ue=d(()=>{const o=` ${Je}${F.value}-`;return Je+`${o}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${o}${A.value===!0?"rtl":"ltr"}`}),we=d(()=>t.markerLabels===!1?null:vt(t.markerLabels).map((o,p)=>({index:p,value:o.value,label:o.label||o.value,classes:Ue.value+(o.classes!==void 0?" "+o.classes:""),style:{...We(o.value),...o.style||{}}}))),Oe=d(()=>({markerList:we.value,markerMap:bt.value,classes:Ue.value,getStyle:We})),pt=d(()=>{const o=oe.value===0?"2px":100*Ae.value/oe.value;return{...Pe.value,backgroundSize:t.vertical===!0?`2px ${o}%`:`${o}% 2px`}});function vt(o){if(o===!1)return null;if(o===!0)return Ne.value.map(Kt);if(typeof o=="function")return Ne.value.map(w=>{const C=o(w);return Te(C)===!0?{...C,value:w}:{value:w,label:C}});const p=({value:w})=>w>=t.min&&w<=t.max;return Array.isArray(o)===!0?o.map(w=>Te(w)===!0?w:{value:w}).filter(p):Object.keys(o).map(w=>{const C=o[w],q=Number(w);return Te(C)===!0?{...C,value:q}:{value:q,label:C}}).filter(p)}function We(o){return{[te.value]:`${100*(o-t.min)/se.value}%`}}const bt=d(()=>{if(t.markerLabels===!1)return null;const o={};return we.value.forEach(p=>{o[p.value]=p}),o});function _t(){if(n["marker-label-group"]!==void 0)return n["marker-label-group"](Oe.value);const o=n["marker-label"]||Xt;return we.value.map(p=>o({marker:p,...Oe.value}))}const yt=d(()=>[[Gt,wt,void 0,{[L.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function wt(o){o.isFinal===!0?(B.value!==void 0&&(a(o.evt),o.touch===!0&&e(!0),B.value=void 0,u("pan","end")),V.value=!1,T.value=!1):o.isFirst===!0?(B.value=l(o.evt),a(o.evt),e(),V.value=!0,u("pan","start")):(a(o.evt),e())}function Qe(){T.value=!1}function xt(o){a(o,l(o)),e(),j.value=!0,V.value=!0,document.addEventListener("mouseup",xe,!0)}function xe(){j.value=!1,V.value=!1,e(!0),Qe(),document.removeEventListener("mouseup",xe,!0)}function kt(o){a(o,l(o)),e(!0)}function Ct(o){ze.includes(o.keyCode)&&e(!0)}function $t(o){if(t.vertical===!0)return null;const p=m.lang.rtl!==t.reverse?1-o:o;return{transform:`translateX(calc(${2*p-1} * ${t.thumbSize} / 2 + ${50-100*p}%))`}}function Mt(o){const p=d(()=>j.value===!1&&(T.value===o.focusValue||T.value==="both")?" q-slider--focus":""),w=d(()=>`q-slider__thumb q-slider__thumb${F.value} q-slider__thumb${F.value}-${A.value===!0?"rtl":"ltr"} absolute non-selectable`+p.value+(o.thumbColor.value!==void 0?` text-${o.thumbColor.value}`:"")),C=d(()=>({width:t.thumbSize,height:t.thumbSize,[te.value]:`${100*o.ratio.value}%`,zIndex:T.value===o.focusValue?2:void 0})),q=d(()=>o.labelColor.value!==void 0?` text-${o.labelColor.value}`:""),H=d(()=>$t(o.ratio.value)),ke=d(()=>"q-slider__text"+(o.labelTextColor.value!==void 0?` text-${o.labelTextColor.value}`:""));return()=>{const Ce=[I("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[I("path",{d:t.thumbPath})]),I("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(Ce.push(I("div",{class:ot.value+" absolute fit no-pointer-events"+q.value},[I("div",{class:lt.value,style:{minWidth:t.thumbSize}},[I("div",{class:ut.value,style:H.value},[I("span",{class:ke.value},o.label.value)])])])),t.name!==void 0&&t.disable!==!0&&f(Ce,"push")),I("div",{class:w.value,style:C.value,...o.getNodeData()},Ce)}}function Vt(o,p,w,C){const q=[];t.innerTrackColor!=="transparent"&&q.push(I("div",{key:"inner",class:ht.value,style:Pe.value})),t.selectionColor!=="transparent"&&q.push(I("div",{key:"selection",class:W.value,style:o.value})),t.markers!==!1&&q.push(I("div",{key:"marker",class:ce.value,style:pt.value})),C(q);const H=[It("div",{key:"trackC",class:it.value,tabindex:p.value,...w.value},[I("div",{class:dt.value,style:ct.value},q)],"slide",$.value,()=>yt.value)];if(t.markerLabels!==!1){const ke=t.switchMarkerLabelsSide===!0?"unshift":"push";H[ke](I("div",{key:"markerL",class:mt.value},_t()))}return H}return Lt(()=>{document.removeEventListener("mouseup",xe,!0)}),{state:{active:V,focus:T,preventFocus:j,dragging:B,editable:$,classes:E,tabindex:_e,attributes:S,step:Q,decimals:N,trackLen:se,innerMin:z,innerMinRatio:ie,innerMax:O,innerMaxRatio:le,positionProp:te,sizeProp:k,isReversed:A},methods:{onActivate:xt,onMobileClick:kt,onBlur:Qe,onKeyup:Ct,getContent:Vt,getThumbRenderFn:Mt,convertRatioToModel:ft,convertModelToRatio:ye,getDraggingRatio:gt}}}const J={MIN:0,RANGE:1,MAX:2};var de=tt({name:"QRange",props:{...rt,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:nt,setup(e,{emit:a}){const{proxy:{$q:l}}=qe(),{state:r,methods:t}=st({updateValue:oe,updatePosition:le,getDragging:ie,formAttrs:d(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),u=P(null),n=P(0),m=P(0),i=P({min:0,max:0});function f(){i.value.min=e.modelValue.min===null?r.innerMin.value:D(e.modelValue.min,r.innerMin.value,r.innerMax.value),i.value.max=e.modelValue.max===null?r.innerMax.value:D(e.modelValue.max,r.innerMin.value,r.innerMax.value)}at(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,f),f();const V=d(()=>t.convertModelToRatio(i.value.min)),j=d(()=>t.convertModelToRatio(i.value.max)),T=d(()=>r.active.value===!0?n.value:V.value),B=d(()=>r.active.value===!0?m.value:j.value),F=d(()=>{const k={[r.positionProp.value]:`${100*T.value}%`,[r.sizeProp.value]:`${100*(B.value-T.value)}%`};return e.selectionImg!==void 0&&(k.backgroundImage=`url(${e.selectionImg}) !important`),k}),Y=d(()=>{if(r.editable.value!==!0)return{};if(l.platform.is.mobile===!0)return{onClick:t.onMobileClick};const k={onMousedown:t.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(k,{onFocus:()=>{r.focus.value="both"},onBlur:t.onBlur,onKeydown:te,onKeyup:t.onKeyup}),k});function A(k){return l.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=k},onBlur:t.onBlur,onKeydown:te,onKeyup:t.onKeyup}:{}}const z=d(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),O=d(()=>l.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),$=P(null),N=d(()=>A("min")),Q=t.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:$,key:"tmin",...N.value,tabindex:z.value}),ratio:T,label:d(()=>e.leftLabelValue!==void 0?e.leftLabelValue:i.value.min),thumbColor:d(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:d(()=>e.leftLabelColor||e.labelColor),labelTextColor:d(()=>e.leftLabelTextColor||e.labelTextColor)}),_e=d(()=>A("max")),se=t.getThumbRenderFn({focusValue:"max",getNodeData:()=>({..._e.value,key:"tmax",tabindex:z.value}),ratio:B,label:d(()=>e.rightLabelValue!==void 0?e.rightLabelValue:i.value.max),thumbColor:d(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:d(()=>e.rightLabelColor||e.labelColor),labelTextColor:d(()=>e.rightLabelTextColor||e.labelTextColor)});function oe(k){(i.value.min!==e.modelValue.min||i.value.max!==e.modelValue.max)&&a("update:modelValue",{...i.value}),k===!0&&a("change",{...i.value})}function ie(k){const{left:_,top:L,width:S,height:E}=u.value.getBoundingClientRect(),G=e.dragOnlyRange===!0?0:e.vertical===!0?$.value.offsetHeight/(2*E):$.value.offsetWidth/(2*S),R={left:_,top:L,width:S,height:E,valueMin:i.value.min,valueMax:i.value.max,ratioMin:V.value,ratioMax:j.value},W=t.getDraggingRatio(k,R);return e.dragOnlyRange!==!0&&W<R.ratioMin+G?R.type=J.MIN:e.dragOnlyRange===!0||W<R.ratioMax-G?e.dragRange===!0||e.dragOnlyRange===!0?(R.type=J.RANGE,Object.assign(R,{offsetRatio:W,offsetModel:t.convertRatioToModel(W),rangeValue:R.valueMax-R.valueMin,rangeRatio:R.ratioMax-R.ratioMin})):R.type=R.ratioMax-W<W-R.ratioMin?J.MAX:J.MIN:R.type=J.MAX,R}function le(k,_=r.dragging.value){let L;const S=t.getDraggingRatio(k,_),E=t.convertRatioToModel(S);switch(_.type){case J.MIN:S<=_.ratioMax?(L={minR:S,maxR:_.ratioMax,min:E,max:_.valueMax},r.focus.value="min"):(L={minR:_.ratioMax,maxR:S,min:_.valueMax,max:E},r.focus.value="max");break;case J.MAX:S>=_.ratioMin?(L={minR:_.ratioMin,maxR:S,min:_.valueMin,max:E},r.focus.value="max"):(L={minR:S,maxR:_.ratioMin,min:E,max:_.valueMin},r.focus.value="min");break;case J.RANGE:const G=S-_.offsetRatio,R=D(_.ratioMin+G,0,1-_.rangeRatio),W=E-_.offsetModel,ce=D(_.valueMin+W,e.min,e.max-_.rangeValue);L={minR:R,maxR:R+_.rangeRatio,min:parseFloat(ce.toFixed(r.decimals.value)),max:parseFloat((ce+_.rangeValue).toFixed(r.decimals.value))},r.focus.value="both";break}i.value=i.value.min===null||i.value.max===null?{min:L.min||e.min,max:L.max||e.max}:{min:L.min,max:L.max},e.snap!==!0||e.step===0?(n.value=L.minR,m.value=L.maxR):(n.value=t.convertModelToRatio(i.value.min),m.value=t.convertModelToRatio(i.value.max))}function te(k){if(!ze.includes(k.keyCode))return;je(k);const _=([34,33].includes(k.keyCode)?10:1)*r.step.value,L=([34,37,40].includes(k.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*_;if(r.focus.value==="both"){const S=i.value.max-i.value.min,E=D(parseFloat((i.value.min+L).toFixed(r.decimals.value)),r.innerMin.value,r.innerMax.value-S);i.value={min:E,max:parseFloat((E+S).toFixed(r.decimals.value))}}else{if(r.focus.value===!1)return;{const S=r.focus.value;i.value={...i.value,[S]:D(parseFloat((i.value[S]+L).toFixed(r.decimals.value)),S==="min"?r.innerMin.value:i.value.min,S==="max"?r.innerMax.value:i.value.max)}}}oe()}return()=>{const k=t.getContent(F,O,Y,_=>{_.push(Q(),se())});return I("div",{ref:u,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},k)}}});const Yt=K({name:"SliderWithTextInput",props:{range:Object,min_prefix:{type:String,default:"Best \xA3"},max_prefix:{type:String,default:"Worst \xA3"},left_label_value:{type:String,default:""},right_label_value:{type:String,default:""},min_label_text:{type:String,default:"Best Price"},max_label_text:{type:String,default:"Worst Price"},min:{type:Number,default:0},max:{type:Number,default:1e6},step:{type:Number,default:5e3}},emits:["update:range"],data(){return{}},methods:{validateworst(){this.$refs.worstinput.validate(),this.emitrangevalue(this.rangevalue)},validatebest(){this.$refs.bestinput.validate(),this.emitrangevalue(this.rangevalue)},emitrangevalue(e){const a={min:this.ensurenumber(e.min),max:this.ensurenumber(e.max)};this.$emit("update:range",a)},ensurenumber(e){return e===null||typeof e=="undefined"||e===""?0:e}},computed:{left_label_value_used(){return this.left_label_value==""?this.min_prefix+this.rangevalue.min/1e3+"k":this.left_label_value},right_label_value_used(){return this.right_label_value==""?this.max_prefix+this.rangevalue.max/1e3+"k":this.right_label_value},isValid(){return this.$refs.worstinput.validate()?this.$refs.bestinput.validate():!1},rangevalue:{get(){return this.range},set(e){this.emitrangevalue(e)}}}}),Ht={class:"col-grow"},Jt={class:"col-grow row"},Zt={class:"pricetblcell"},ea={class:"pricetblcell"};function ta(e,a,l,r,t,u){return g(),b(be,null,[s("div",Ht,[y(" \xA0 "),h(de,{modelValue:e.rangevalue,"onUpdate:modelValue":a[0]||(a[0]=n=>e.rangevalue=n),min:e.min,max:e.max,step:e.step,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":e.left_label_value_used,"right-label-value":e.right_label_value_used},null,8,["modelValue","min","max","step","left-label-value","right-label-value"])]),s("div",Jt,[s("div",Zt,[y(c(e.min_label_text)+": ",1),h(pe,{ref:"bestinput",modelValue:e.rangevalue.min,"onUpdate:modelValue":[a[1]||(a[1]=n=>e.rangevalue.min=n),e.validateworst],modelModifiers:{number:!0},type:"number",step:e.step,filled:"",style:{"max-width":"110px"},rules:[n=>n<=e.rangevalue.max||"Must be lower than "+e.max_label_text]},null,8,["modelValue","step","rules","onUpdate:modelValue"])]),s("div",ea,[y(c(e.max_label_text)+": ",1),h(pe,{ref:"worstinput",modelValue:e.rangevalue.max,"onUpdate:modelValue":[a[2]||(a[2]=n=>e.rangevalue.max=n),e.validatebest],modelModifiers:{number:!0},type:"number",step:e.step,filled:"",style:{"max-width":"110px"},rules:[n=>n>=e.rangevalue.min||"Must be higher than "+e.min_label_text]},null,8,["modelValue","step","rules","onUpdate:modelValue"])])])],64)}var De=X(Yt,[["render",ta]]);const aa=K({name:"BrrCalcGdv",emits:["projectchanged"],components:{SliderWithTextInput:De},data(){return{gdvitems:[{id:1,name:"",gdvrange:{min:4e5,max:6e5}}],isValid:!0,emit_project_change_notification:!0}},methods:{format_currency(e){return U.format_currency(e)},addgdvitem(){var e=Math.max(...this.gdvitems.map(a=>a.id));this.gdvitems.push({id:e+1,name:"",gdvrange:{min:4e5,max:6e5}}),this.updateisvalid()},delrow(e){this.gdvitems.length<2||(this.gdvitems=this.gdvitems.filter(function(a){return a.id!=e}),this.updateisvalid())},updateisvalid(){const e=this;setTimeout(function(){let a=!0;e.$refs.slider.forEach(function(l){l.isValid||(a=!1)}),e.isValid=!e.isValid,e.isValid=a},5)},serializer_load_data(e){this.emit_project_change_notification=!1,this.gdvitems=e.gdvitems;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},computed:{totalmin(){return[...this.gdvitems.map(e=>e.gdvrange.min)].reduce((e,a)=>e+a,0)},totalmax(){return[...this.gdvitems.map(e=>e.gdvrange.max)].reduce((e,a)=>e+a,0)},total(){return{min:this.totalmin,max:this.totalmax}},serializer_card_data(){return{gdvitems:this.gdvitems}}},watch:{total(e){this.emit_project_change_notification&&this.$emit("projectchanged","GDV")}}}),ra=s("div",{class:"text-h6"},"GDV (Gross Development Value) ",-1),na=s("div",{class:"text-subtitle2"},"This is the estimated final value of the property after works are complete",-1),sa={class:"row"},ia={class:"col-grow",style:{"align-self":"flex-end"}},oa={class:"col-grow"},la=s("div",null,"If the property is to be split into flats add the GDV of each above and the number below is the total GDV.",-1),ua={class:"text-h6"};function ma(e,a,l,r,t,u){const n=me("SliderWithTextInput");return g(),ee(ne,{inline:"",class:"q-ma-sm card-style"},{default:v(()=>[h(M,null,{default:v(()=>[ra,na]),_:1}),h(M,null,{default:v(()=>[(g(!0),b(be,null,Ie(e.gdvitems,m=>(g(),b("div",{class:"col",key:m.id},[s("div",sa,[h(pe,{modelValue:m.name,"onUpdate:modelValue":i=>m.name=i,label:"Item"},null,8,["modelValue","onUpdate:modelValue"]),s("div",ia,c(e.format_currency(m.gdvrange.min))+" - "+c(e.format_currency(m.gdvrange.max)),1),this.gdvitems.length>1?(g(),ee(re,{key:0,round:"",icon:"delete",onClick:i=>e.delrow(m.id)},null,8,["onClick"])):x("",!0)]),s("div",oa,[h(n,{ref_for:!0,ref:"slider",range:m.gdvrange,"onUpdate:range":[i=>m.gdvrange=i,e.updateisvalid],min_prefix:"Worst \xA3",max_prefix:"Best \xA3",min_label_text:"Worst Price",max_label_text:"Best Price"},null,8,["range","onUpdate:range"])])]))),128)),h(re,{round:"",color:"primary",icon:"add",onClick:e.addgdvitem},null,8,["onClick"]),la,s("div",ua,"Total: "+c(e.format_currency(e.totalmin))+" - "+c(e.format_currency(e.totalmax)),1)]),_:1})]),_:1})}var an=X(aa,[["render",ma]]);const da=K({name:"BrrCalcPurchase",props:["purchaserange"],emits:["update:purchaserange","projectchanged"],components:{SliderWithTextInput:De},data(){return{emit_project_change_notification:!0}},methods:{serializer_load_data(e){this.emit_project_change_notification=!1,this.purchaserangevalue=e.purchaserangevalue;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)},format_currency(e){return U.format_currency(e)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","PurchasePrice")}},computed:{serializer_card_data(){return{purchaserangevalue:this.purchaserangevalue}},isValid(){return this.$refs.slider.isValid},purchaserangevalue:{get(){return this.purchaserange},set(e){this.$emit("update:purchaserange",e)}},purchase_items(){return[{name:"Purchase Property",worst:-1*this.purchaserange.max,best:-1*this.purchaserange.min}]}}}),ca=s("div",{class:"text-h6"},"Purchase Price",-1),ha=s("div",{class:"text-subtitle2"},"In this section we work out the purchase price. This figure is not just read from the listing we will aim to get a below market value (BMV) price and this will involve finding the right property seller and being able to negotiate the price.",-1),fa={class:"text-h6"};function ga(e,a,l,r,t,u){const n=me("SliderWithTextInput");return g(),ee(ne,{inline:"",class:"q-ma-sm card-style"},{default:v(()=>[h(M,null,{default:v(()=>[ca,ha]),_:1}),h(M,null,{default:v(()=>[h(n,{ref:"slider",range:e.purchaserangevalue,"onUpdate:range":a[0]||(a[0]=m=>e.purchaserangevalue=m)},null,8,["range"]),s("div",fa,"Price: "+c(e.format_currency(e.purchaserangevalue.min))+" - "+c(e.format_currency(e.purchaserangevalue.max)),1)]),_:1})]),_:1})}var rn=X(da,[["render",ga]]);const pa=K({name:"BrrCalcRefurbCost",emits:["projectchanged"],data(){return{refurbrange:{min:3e4,max:4e4},refurbtimerange:{min:6,max:12},emit_project_change_notification:!0}},methods:{format_currency(e){return U.format_currency(e)},serializer_load_data(e){this.emit_project_change_notification=!1,this.refurbrange=e.refurbrange,this.refurbtimerange=e.refurbtimerange;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","RefurbCost")}},computed:{serializer_card_data(){return{refurbrange:this.refurbrange,refurbtimerange:this.refurbtimerange}},refurb_cost_total(){return this.refurbrange},refurb_cost_items(){return[{name:"Refurbishment",worst:-1*this.refurb_cost_total.max,best:-1*this.refurb_cost_total.min}]},refurbmonths(){return{worst:this.refurbtimerange.max,best:this.refurbtimerange.min}}}}),va=s("div",{class:"text-h6"},"Refurbishment",-1),ba=s("div",{class:"text-subtitle2"},"This section holds the details of the refurbishment. Put in the minimum and maximum estimated cost as well the length of time the refurbishment will take.",-1),_a={class:"col-grow"},ya={class:"text-h6"},wa={class:"col-grow"},xa={class:"text-h6"},ka=s("div",null,"This figure is the amount of time to take out loans for and effects the amount of interest that needs to be paid.",-1);function Ca(e,a,l,r,t,u){return g(),ee(ne,{inline:"",class:"q-ma-sm card-style"},{default:v(()=>[h(M,null,{default:v(()=>[va,ba]),_:1}),h(M,null,{default:v(()=>[s("div",_a,[y(" \xA0 "),h(de,{modelValue:e.refurbrange,"onUpdate:modelValue":a[0]||(a[0]=n=>e.refurbrange=n),min:0,max:2e5,step:1e3,"thumb-size":"40px","drag-range":"",label:"","left-label-value":"Best \xA3"+e.refurbrange.min/1e3+"k","right-label-value":"Worst \xA3"+e.refurbrange.max/1e3+"k"},null,8,["modelValue","left-label-value","right-label-value"])]),s("div",ya,"Cost: "+c(e.format_currency(e.refurbrange.min))+" - "+c(e.format_currency(e.refurbrange.max)),1),s("div",wa,[y(" \xA0 "),h(de,{modelValue:e.refurbtimerange,"onUpdate:modelValue":a[1]||(a[1]=n=>e.refurbtimerange=n),min:0,max:36,step:1,"thumb-size":"40px","drag-range":"",label:"","left-label-value":"Best "+e.refurbtimerange.min+" months","right-label-value":"Worst "+e.refurbtimerange.max+" months"},null,8,["modelValue","left-label-value","right-label-value"])]),s("div",xa,"Duration: "+c(e.refurbtimerange.min)+" - "+c(e.refurbtimerange.max)+" months",1),ka]),_:1})]),_:1})}var nn=X(pa,[["render",Ca]]);function $a(e,a){return a<e.from?0:typeof e.upto=="undefined"?(a-e.from)*e.rate:a>e.upto?(e.upto-e.from)*e.rate:(a-e.from)*e.rate}function Ma(e,a,l,r){return e?{name:"Exempt",bands:[{from:0,upto:void 0,rate:0}]}:a?l==="england"?{name:"England Commercial",bands:[{from:0,upto:15e4,rate:0},{from:15e4,upto:25e4,rate:.02},{from:25e4,upto:void 0,rate:.05}]}:{name:"Scotland Commercial",bands:[{from:0,upto:15e4,rate:0},{from:15e4,upto:25e4,rate:.01},{from:25e4,upto:void 0,rate:.05}]}:l==="england"?r==="bef31oct2024"?{name:"England Residential Before 31-Oct-2024",bands:[{from:0,upto:25e4,rate:.03},{from:25e4,upto:925e3,rate:.08},{from:925e3,upto:15e5,rate:.13},{from:15e5,upto:void 0,rate:.15}]}:r==="31oct2024to31mar2025"?{name:"England Residential 31-Oct-2024 - 31-Mar-2025",bands:[{from:0,upto:25e4,rate:.05},{from:25e4,upto:925e3,rate:.1},{from:925e3,upto:15e5,rate:.15},{from:15e5,upto:void 0,rate:.17}]}:{name:"England Residential After 1 April 2025",bands:[{from:0,upto:125e3,rate:.05},{from:125e3,upto:25e4,rate:.07},{from:25e4,upto:925e3,rate:.1},{from:925e3,upto:15e5,rate:.15},{from:15e5,upto:void 0,rate:.17}]}:{name:"Scotland Residential",bands:[{from:0,upto:145e3,rate:0},{from:145e3,upto:25e4,rate:.02},{from:25e4,upto:325e3,rate:.05},{from:325e3,upto:75e4,rate:.1},{from:75e4,upto:void 0,rate:.12}]}}var Re={stampdutyforthisband:$a,getstampdutyband:Ma};function Va(){return new Date>new Date("2025-03-01")?"aft1apr2025":"31oct2024to31mar2025"}const Ta=K({name:"BrrCalcStampduty",emits:["projectchanged"],props:["purchaserange"],data(){return{table:{columns:[{name:"range",label:"Range",field:"range"},{name:"rate",label:"Rate",field:"rate"},{name:"min_amount",label:"Min",field:"min"},{name:"max_amount",label:"Max",field:"max"}]},stampdutydata:{exempt:!1,commercial:!1,location:"england",locationoptions:[{label:"England",value:"england"},{label:"Scotland",value:"scotland"}],completion:Va(),completionoptions:[{label:"Before 31-Oct-2024",value:"bef31oct2024"},{label:"31-Oct-2024 - 31-Mar-2025",value:"31oct2024to31mar2025"},{label:" After 1 April 2025",value:"aft1apr2025"}]},emit_project_change_notification:!0}},methods:{format_currency(e){return U.format_currency(e)},helpexempt(){this.$q.dialog({title:"Stamp Duty Exempt",message:'Some purchases are stamp duty exempt. e.g. a freehold property under \xA340k. See <a href="https://www.gov.uk/stamp-duty-land-tax/reliefs-and-exemptions" target="_new">here</a> for details.',html:!0}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.stampdutydata.exempt=e.stampdutydata_exempt,this.stampdutydata.commercial=e.stampdutydata_commercial,this.stampdutydata.location=e.stampdutydata_location,typeof e.stampdutydata_completion=="undefined"?this.stampdutydata.completion="bef31oct2024":this.stampdutydata.completion=e.stampdutydata_completion;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","StampDuty")}},computed:{serializer_card_data(){return{stampdutydata_exempt:this.stampdutydata.exempt,stampdutydata_commercial:this.stampdutydata.commercial,stampdutydata_location:this.stampdutydata.location,stampdutydata_completion:this.stampdutydata.completion}},stampduty(){var e=0,a=0;let l=0;for(;l<this.stampdutybandswithamount.length;)e+=this.stampdutybandswithamount[l].min,a+=this.stampdutybandswithamount[l].max,l++;return{min:e,max:a}},stampduty_items(){return this.stampdutydata.exempt?[]:[{name:"Stamp Duty",worst:-1*this.stampduty.max,best:-1*this.stampduty.min}]},stampdutybandswithamount(){var e=this;return this.stampdutybands.bands.map(function(a){return{range:U.format_currency(a.from)+" - "+U.format_currency(a.upto),rate:U.format_percent(a.rate,0),min:Re.stampdutyforthisband(a,e.purchaserange.min),max:Re.stampdutyforthisband(a,e.purchaserange.max)}})},stampdutybands(){return Re.getstampdutyband(this.stampdutydata.exempt,this.stampdutydata.commercial,this.stampdutydata.location,this.stampdutydata.completion)}}}),Sa=s("div",{class:"text-h6"},"Stamp Duty",-1),Ra=s("div",{class:"text-subtitle2"},"Stamp Duty calculation assuming investment property This is known as Stamp Duty in England and Land and Buildings Transaction Tax (LBTT) in Scotland. This is a basic calculator useful for estimates. Factors affecting stamp duty include if the property is habitable, if it\u2019s a commercial property and there are different rules for Scotland. This is an example calculation designed to give a rough idea and uses assumptions that may not be correct (e.g. it is assumed this is a second property). It is best to use the official government calculators. Refer to the links given in the detail section. If buying a high value property get advice from a stamp duty tax specialist.",-1),Fa={class:"q-pa-lg"},Ba={class:"text-h6"},La=s("div",{class:"stamp-duty-card-detail-bottom-text"},[s("p",null,[y("Example calculation only for use when estimating a project - check with an expert and also check if exemptions apply. You can also use the government stamp duty calculator "),s("a",{href:"https://www.tax.service.gov.uk/calculate-stamp-duty-land-tax/#!/intro",target:"_new"},"here"),y(".")]),s("p",{class:"stamp-duty-card-detail-bottom-text-title"},"Sources:"),s("ul",null,[s("li",null,[y("England Residential: "),s("a",{href:"https://www.gov.uk/guidance/stamp-duty-land-tax-buying-an-additional-residential-property",target:"_new"},"here")]),s("li",null,[y("England Commercial: "),s("a",{href:"https://www.gov.uk/stamp-duty-land-tax/nonresidential-and-mixed-rates",target:"_new"},"here")]),s("li",null,[y("Scotland Residential: "),s("a",{href:"https://revenue.scot/taxes/land-buildings-transaction-tax/residential-property",target:"_new"},"here")]),s("li",null,[y("Scotland Commercial: "),s("a",{href:"https://revenue.scot/taxes/land-buildings-transaction-tax/non-residential-property",target:"_new"},"here")])])],-1);function ja(e,a,l,r,t,u){return g(),ee(ne,{inline:"",class:"q-ma-sm card-style"},{default:v(()=>[h(M,null,{default:v(()=>[Sa,Ra]),_:1}),h(M,null,{default:v(()=>[h(ae,{modelValue:e.stampdutydata.exempt,"onUpdate:modelValue":a[0]||(a[0]=n=>e.stampdutydata.exempt=n),label:"Stampduty Exempt"},null,8,["modelValue"]),h(re,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpexempt},null,8,["onClick"]),h(ae,{modelValue:e.stampdutydata.commercial,"onUpdate:modelValue":a[1]||(a[1]=n=>e.stampdutydata.commercial=n),label:"Commercial"},null,8,["modelValue"]),s("div",Fa,[y(" Property Location "),h(ve,{modelValue:e.stampdutydata.location,"onUpdate:modelValue":a[2]||(a[2]=n=>e.stampdutydata.location=n),options:e.stampdutydata.locationoptions,inline:""},null,8,["modelValue","options"]),y(" Expected completion date "),h(ve,{modelValue:e.stampdutydata.completion,"onUpdate:modelValue":a[3]||(a[3]=n=>e.stampdutydata.completion=n),options:e.stampdutydata.completionoptions,inline:""},null,8,["modelValue","options"]),s("div",Ba,"Stamp Duty: "+c(e.format_currency(e.stampduty.min))+" - "+c(e.format_currency(e.stampduty.max)),1)]),h(At,{"expand-separator":"",icon:"info",label:"Details"},{default:v(()=>[s("div",null,[h(Pt,{title:e.stampdutybands.name,columns:e.table.columns,rows:e.stampdutybandswithamount,"rows-per-page-options":[50],"hide-bottom":""},{"body-cell-min_amount":v(n=>[h(Xe,{props:n},{default:v(()=>[y(c(e.format_currency(n.value)),1)]),_:2},1032,["props"])]),"body-cell-max_amount":v(n=>[h(Xe,{props:n},{default:v(()=>[y(c(e.format_currency(n.value)),1)]),_:2},1032,["props"])]),_:1},8,["title","columns","rows"]),La])]),_:1})]),_:1})]),_:1})}var sn=X(Ta,[["render",ja]]);const qa=()=>({});var fe=tt({name:"QSlider",props:{...rt,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:nt,setup(e,{emit:a}){const{proxy:{$q:l}}=qe(),{state:r,methods:t}=st({updateValue:F,updatePosition:A,getDragging:Y,formAttrs:zt(e)}),u=P(null),n=P(0),m=P(0);function i(){m.value=e.modelValue===null?r.innerMin.value:D(e.modelValue,r.innerMin.value,r.innerMax.value)}at(()=>`${e.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,i),i();const f=d(()=>t.convertModelToRatio(m.value)),V=d(()=>r.active.value===!0?n.value:f.value),j=d(()=>{const $={[r.positionProp.value]:`${100*r.innerMinRatio.value}%`,[r.sizeProp.value]:`${100*(V.value-r.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&($.backgroundImage=`url(${e.selectionImg}) !important`),$}),T=t.getThumbRenderFn({focusValue:!0,getNodeData:qa,ratio:V,label:d(()=>e.labelValue!==void 0?e.labelValue:m.value),thumbColor:d(()=>e.thumbColor||e.color),labelColor:d(()=>e.labelColor),labelTextColor:d(()=>e.labelTextColor)}),B=d(()=>r.editable.value!==!0?{}:l.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:z,onBlur:t.onBlur,onKeydown:O,onKeyup:t.onKeyup});function F($){m.value!==e.modelValue&&a("update:modelValue",m.value),$===!0&&a("change",m.value)}function Y(){return u.value.getBoundingClientRect()}function A($,N=r.dragging.value){const Q=t.getDraggingRatio($,N);m.value=t.convertRatioToModel(Q),n.value=e.snap!==!0||e.step===0?Q:t.convertModelToRatio(m.value)}function z(){r.focus.value=!0}function O($){if(!ze.includes($.keyCode))return;je($);const N=([34,33].includes($.keyCode)?10:1)*r.step.value,Q=([34,37,40].includes($.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*N;m.value=D(parseFloat((m.value+Q).toFixed(r.decimals.value)),r.innerMin.value,r.innerMax.value),F()}return()=>{const $=t.getContent(j,r.tabindex,B,N=>{N.push(T())});return I("div",{ref:u,class:r.classes.value+(e.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue},$)}}});const Ze={l1:{lt249:{min:300,max:500},lt349:{min:500,max:600},lt449:{min:600,max:700},top:{min:700,max:900}},l2:{lt249:{min:400,max:600},lt349:{min:600,max:700},lt449:{min:700,max:800},top:{min:800,max:1e3}},l3:{lt249:{min:630,max:800},lt349:{min:800,max:900},lt449:{min:900,max:1100},top:{min:1e3,max:1500}}};function Fe(){return{min:2300,max:2300}}const Ia=K({name:"BrrCalcOtherCosts",emits:["projectchanged"],props:["purchaserange"],components:{SliderWithTextInput:De},data(){return{emit_project_change_notification:!0,solicitors_fees:Fe(),solicitors_fees_manual:!1,auction:!1,survey:{type:"l3",typeoptions:[{label:"None",value:"none"},{label:"RICS Level 1",value:"l1"},{label:"RICS Level 2",value:"l2"},{label:"RICS Level 3",value:"l3"}]},sourcing:{usesourcing:!1,custom:3e3,type:"threek",typeoptions:[{label:"\xA33,000",value:"threek"},{label:"2% of purchase",value:"twopercent"},{label:"Custom",value:"custom"}]},consts:{auction_survey:300,auction_legal_review:150}}},methods:{click_manual_solicitors_fees(){let e=!1;this.solicitors_fees_manual||this.$q.dialog({title:"Remove Solicitor Fee Manual Entey",message:"This will revert to the default value. Are you sure?",html:!1,ok:{push:!0,label:"Yes",color:"primary"},cancel:{push:!0,label:"Cancel",color:"primary"}}).onOk(a=>{e=!0,this.solicitors_fees=Fe()}).onCancel(()=>{this.solicitors_fees_manual=!0}).onDismiss(()=>{e||(this.solicitors_fees_manual=!0)})},format_currency(e){return U.format_currency(e)},helpsurvey(){this.$q.dialog({title:"RICS Survey",message:'See <a href="https://hoa.org.uk/advice/guides-for-homeowners/i-am-buying/how-much-does-a-house-survey-cost/" target="_new">this website</a> here for my source info for caculating survey costs. for details.',html:!0}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.auction=e.auction,this.survey.type=e.survey_type,this.sourcing.usesourcing=e.sourcing_usesourcing,this.sourcing.custom=e.sourcing_custom,this.sourcing.type=e.sourcing_type,typeof e.solicitors_fees_manual=="undefined"?(this.solicitors_fees_manual=!1,this.solicitors_fees=Fe()):(this.solicitors_fees_manual=e.solicitors_fees_manual,this.solicitors_fees=e.solicitors_fees);const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","OtherCosts")}},computed:{serializer_card_data(){return{auction:this.auction,survey_type:this.survey.type,sourcing_usesourcing:this.sourcing.usesourcing,sourcing_custom:this.sourcing.custom,sourcing_type:this.sourcing.type,solicitors_fees_manual:this.solicitors_fees_manual,solicitors_fees:this.solicitors_fees}},surveyfeetext(){return this.surveyfee.min===this.surveyfee.max?this.format_currency(this.surveyfee.min):this.format_currency(this.surveyfee.min)+"-"+this.format_currency(this.surveyfee.max)},surveyfee(){if(this.survey.type==="none")return{min:0,max:0};function e(l){return l<249e3?"lt249":l<349e3?"lt349":l<449e3?"lt449":"top"}var a={min:e(this.purchaserange.min),max:e(this.purchaserange.max)};return{min:Ze[this.survey.type][a.min].min,max:Ze[this.survey.type][a.max].max}},sourcingfeetext(){return this.sourcingfee.min===this.sourcingfee.max?this.format_currency(this.sourcingfee.min):this.format_currency(this.sourcingfee.min)+"-"+this.format_currency(this.sourcingfee.max)},sourcingfee(){return this.sourcing.usesourcing?this.sourcing.type==="threek"?{min:3e3,max:3e3}:this.sourcing.type==="custom"?{min:this.sourcing.custom,max:this.sourcing.custom}:{min:this.purchaserange.min*.02,max:this.purchaserange.max*.02}:{min:0,max:0}},total(){let e={min:0,max:0};return this.othercosts_items_detail.forEach(function(l){e.min+=-1*l.best,e.max+=-1*l.worst}),e},othercosts_items(){let e=[];return e.push({name:"Other Costs",worst:-1*this.total.max,best:-1*this.total.min}),e},othercosts_items_detail(){let e=[];return e.push({name:"Fees",worst:-1*this.solicitors_fees.max,best:-1*this.solicitors_fees.min}),this.auction&&(e.push({name:"Auction Survey",worst:-1*this.consts.auction_survey,best:-1*this.consts.auction_survey}),e.push({name:"Auction Legal Review",worst:-1*this.consts.auction_legal_review,best:-1*this.consts.auction_legal_review})),this.sourcing.usesourcing&&e.push({name:"Sourcing Fee",worst:-1*this.sourcingfee.max,best:-1*this.sourcingfee.min}),this.survey.type!=="none"&&e.push({name:"Survey",worst:-1*this.surveyfee.max,best:-1*this.surveyfee.min}),e}}}),Ea=s("div",{class:"text-h6"},"Other Costs",-1),za=s("div",{class:"text-subtitle2"},"Other costs to be considered",-1),Da={class:"text-h6"},Pa={key:0},Aa={key:1},Na=s("div",{class:"text-h6"},"Auction",-1),Ua={key:0},Oa=s("div",null,"Note survey and legal pack review costs may greater as they may have been done multiple times for auctions not won",-1),Wa=s("div",{class:"text-h6"},"Sourcing",-1),Qa={key:0},Ga={key:0},Ka={class:"col-grow"},Xa={class:"text-h6"},Ya=s("div",null,"If you\u2019re getting a pre-purchase survey report on the building select the type.",-1),Ha={class:"text-h6"};function Ja(e,a,l,r,t,u){const n=me("SliderWithTextInput");return g(),ee(ne,{inline:"",class:"q-ma-sm card-style"},{default:v(()=>[h(M,null,{default:v(()=>[Ea,za]),_:1}),h(M,null,{default:v(()=>[s("div",Da,"Solicitors Fees: "+c(e.format_currency(e.solicitors_fees.min))+" - "+c(e.format_currency(e.solicitors_fees.max)),1),s("div",null,[h(ae,{modelValue:this.solicitors_fees_manual,"onUpdate:modelValue":a[0]||(a[0]=m=>this.solicitors_fees_manual=m),label:"Enter Manually",onClick:e.click_manual_solicitors_fees},null,8,["modelValue","onClick"])]),this.solicitors_fees_manual?(g(),b("div",Pa,[h(n,{ref:"slider",range:e.solicitors_fees,"onUpdate:range":a[1]||(a[1]=m=>e.solicitors_fees=m),min_prefix:"Min \xA3",max_prefix:"Max \xA3",min_label_text:"Min Fees",max_label_text:"Max Fees",min:0,max:1e4,step:500},null,8,["range"])])):x("",!0),this.solicitors_fees_manual?x("",!0):(g(),b("div",Aa,"Likely value - fees may vary depending on project"))]),_:1}),h(M,null,{default:v(()=>[Na,s("div",null,[h(ae,{modelValue:e.auction,"onUpdate:modelValue":a[2]||(a[2]=m=>e.auction=m),label:"Buying at auction"},null,8,["modelValue"])]),e.auction?(g(),b("div",Ua,[s("div",null,"\xA3"+c(e.consts.auction_survey)+" to get a survey",1),s("div",null,"\xA3"+c(e.consts.auction_legal_review)+" to get a review of legal pack",1),Oa])):x("",!0)]),_:1}),h(M,null,{default:v(()=>[Wa,s("div",null,[h(ae,{modelValue:e.sourcing.usesourcing,"onUpdate:modelValue":a[3]||(a[3]=m=>e.sourcing.usesourcing=m),label:"Found using a deal sourcer"},null,8,["modelValue"])]),e.sourcing.usesourcing?(g(),b("div",Qa,[h(ve,{modelValue:e.sourcing.type,"onUpdate:modelValue":a[4]||(a[4]=m=>e.sourcing.type=m),options:e.sourcing.typeoptions,inline:""},null,8,["modelValue","options"]),e.sourcing.type==="custom"?(g(),b("div",Ga,[s("div",Ka,[h(fe,{label:"","label-value":e.format_currency(e.sourcing.custom),modelValue:e.sourcing.custom,"onUpdate:modelValue":a[5]||(a[5]=m=>e.sourcing.custom=m),min:500,max:1e4,step:500,"thumb-size":"40px"},null,8,["label-value","modelValue"])])])):x("",!0),y(" Sourcing fee: "+c(e.sourcingfeetext),1)])):x("",!0)]),_:1}),h(M,null,{default:v(()=>[s("div",Xa,[y("Survey"),h(re,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpsurvey},null,8,["onClick"])]),Ya,h(ve,{modelValue:e.survey.type,"onUpdate:modelValue":a[6]||(a[6]=m=>e.survey.type=m),options:e.survey.typeoptions,inline:""},null,8,["modelValue","options"]),s("div",null,"Survey cost: "+c(e.surveyfeetext)+" (Based on stored ranges for this purchase cost.)",1)]),_:1}),h(M,null,{default:v(()=>[s("div",Ha,"Total: "+c(e.format_currency(e.total.min))+" - "+c(e.format_currency(e.total.max)),1)]),_:1})]),_:1})}var on=X(Ia,[["render",Ja]]);const Za=K({name:"BrrCalcFinance",emits:["projectchanged"],props:["purchaserange","refurb_cost_total","stampduty_total","othercosts_total","refurbmonths","gdv_total"],data(){return{emit_project_change_notification:!0,bridge:{usebridge:!1,startcost:.01,endcost:.01,monthlycost:.01,amount:{worst:1,best:1}},mortgage:{usemortgage:!1,rate:{min:6,max:6},ltv:{min:75,max:75},arrangementfee:1500},loans:[]}},methods:{format_currency(e){return U.format_currency(e)},format_percent(e){return U.format_percent(e)},addloan(){var e=0;this.loans.length>0&&(e=Math.max(...this.loans.map(a=>a.id))),this.loans.push({id:e+1,name:"Loan "+(e+1).toString(),amount:2e4,rate:10})},delloan(e){this.loans.length<1||(this.loans=this.loans.filter(function(a){return a.id!=e}))},updatemortgagetoggle(){this.bridge.usebridge&&this.mortgage.usemortgage&&(Ke.create({color:"bg-grey-2",message:"Use mortgage or bridge but not both",timeout:2e3}),this.mortgage.usemortgage=!1)},updatebridgetoggle(){this.bridge.usebridge&&this.mortgage.usemortgage&&(Ke.create({color:"bg-grey-2",message:"Use mortgage or bridge but not both",timeout:2e3}),this.bridge.usebridge=!1)},serializer_load_data(e){this.emit_project_change_notification=!1,this.bridge=e.bridge,this.mortgage=e.mortgage,this.loans=e.loans;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},150)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:serializer")},totalmoneyneeded(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:totalmoneyneeded")},finance_out_items(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:outitems")}},computed:{caculated_loan_details(){return this.loans.map(function(e){return{id:e.id,name:e.name,amount:e.amount,rate:e.rate,interest:e.amount*e.rate/100}})},serializer_card_data(){return{bridge:this.bridge,mortgage:this.mortgage,loans:this.loans}},mortgage_amount_borrowed(){return{best:this.purchaserange.min*(this.mortgage.ltv.min/100),worst:this.purchaserange.max*(this.mortgage.ltv.max/100)}},mortgage_monthly_payment(){return{best:this.mortgage_amount_borrowed.best*(this.mortgage.rate.min/100)/12,worst:this.mortgage_amount_borrowed.worst*(this.mortgage.rate.max/100)/12}},maxbridge(){return{best:this.purchaserange.min*.7,worst:this.purchaserange.max*.7}},maxloan(){return{best:this.totalexpenditure.min,worst:this.totalexpenditure.max}},bridgecost(){if(!this.bridge.usebridge)return{best:0,worst:0};var e=this.bridge.amount.best*(this.bridge.startcost+this.bridge.endcost+this.bridge.monthlycost*this.bridgemontghsupfront.min),a=this.bridge.amount.worst*(this.bridge.startcost+this.bridge.endcost+this.bridge.monthlycost*this.bridgemontghsupfront.max);return{best:e,worst:a}},bridgeamount(){return this.bridge.usebridge?{best:this.bridge.amount.best,worst:this.bridge.amount.worst}:{best:0,worst:0}},bridgemontghsupfront(){var e=12;this.refurbmonths.best>12&&(e=this.refurbmonths.best);var a=12;return this.refurbmonths.worst>12&&(a=this.refurbmonths.worst),{min:e,max:a}},totalexpenditure(){var e={min:this.purchaserange.min+this.refurb_cost_total.min+this.stampduty_total.min+this.othercosts_total.min,max:this.purchaserange.max+this.refurb_cost_total.max+this.stampduty_total.max+this.othercosts_total.max};return e},totalmoneyneeded(){var e=0;return this.loans.length>0&&(e=this.loans.reduce(function(a,l){return a+l.amount},0)),this.mortgage.usemortgage?{worst:this.totalexpenditure.max+this.mortgage_intrest_payment_total.worst+this.mortgage.arrangementfee-(this.mortgage_amount_borrowed.worst+e),best:this.totalexpenditure.min+this.mortgage_intrest_payment_total.best+this.mortgage.arrangementfee-(this.mortgage_amount_borrowed.best+e)}:this.bridge.usebridge?{worst:this.totalexpenditure.max-e-this.bridge.amount.worst+this.bridgecost.worst,best:this.totalexpenditure.min-e-this.bridge.amount.best+this.bridgecost.best}:{worst:this.totalexpenditure.max-e,best:this.totalexpenditure.min-e}},finance_in_items_without_cash(){let e=[];return this.loans.map(function(a){e.push({name:a.name,worst:a.amount,best:a.amount})}),this.mortgage.usemortgage&&(e.push({name:"Mortgage Payment",worst:this.mortgage_amount_borrowed.worst,best:this.mortgage_amount_borrowed.best}),e.push({name:"Mortgage Arrangement Fee",worst:-this.mortgage.arrangementfee,best:-this.mortgage.arrangementfee})),this.bridge.usebridge&&e.push({name:"Bridge Payment",worst:this.bridge.amount.worst-this.bridgecost.worst,best:this.bridge.amount.best-this.bridgecost.best}),e},finance_in_items(){let e=[];return e.push({name:"Finance Cash",worst:this.totalmoneyneeded.worst,best:this.totalmoneyneeded.best}),e=e.concat(this.finance_in_items_without_cash),e},mortgage_intrest_payment_total(){return{worst:this.mortgage_monthly_payment.worst*this.refurbmonths.worst,best:this.mortgage_monthly_payment.worst*this.refurbmonths.best}},finance_during_items(){let e=[];return this.mortgage.usemortgage&&e.push({name:"Mortgage Intrest payments (x"+this.refurbmonths.worst+"/"+this.refurbmonths.best+" months)",worst:-1*this.mortgage_intrest_payment_total.worst,best:-1*this.mortgage_intrest_payment_total.best}),e},finance_out_items(){let e=[];return this.loans.map(function(a){var l=-(a.amount+a.amount*a.rate/100);e.push({name:"Repay "+a.name,worst:l,best:l})}),this.mortgage.usemortgage&&e.push({name:"Payback Purchase Mortgage Capital",worst:-1*this.mortgage_amount_borrowed.worst,best:-1*this.mortgage_amount_borrowed.best}),this.bridge.usebridge&&(e.push({name:"Bridge Payback",worst:this.bridge.amount.worst*-1,best:this.bridge.amount.best*-1}),e.push({name:"Bridge Interest Credit",worst:(12-this.refurbmonths.worst)*.01*this.bridgecost.worst,best:(12-this.refurbmonths.best)*.01*this.bridgecost.best})),e}}}),er=s("div",{class:"text-h6"},"Finance",-1),tr=s("div",{class:"text-subtitle2"},"This section is to estimate the finance costs of the project.",-1),ar=s("div",{class:"text-h6"},"Total Expenditure",-1),rr=s("div",{class:"text-h6"},"Loans",-1),nr=s("p",null,"Loans that will be paid back at the refinance stage. Same loans are used for best and worst calculations",-1),sr=s("div",null,"\xA0",-1),ir={class:"col-grow"},or=s("p",null,"Fixed return loans",-1),lr=s("div",{class:"text-h6"},"Mortgage",-1),ur={key:0},mr=s("div",{class:"text-h6"},"Bridge",-1),dr={key:0},cr=s("div",null,"The maximum bridge amount is typically 65% of the purchase price.",-1),hr={class:"row"},fr={class:"bridgeamountdiv"},gr=s("div",null,"Worst bridge amount",-1),pr={class:"bridgeamountdiv"},vr=s("div",null,"Best bridge amount",-1),br=s("div",{class:"text-h6"},"Cash",-1),_r=s("div",null,"This calculation will assume that all money not provided for loans or bridges will be provided by investors as cash.",-1),yr={class:"text-h6"};function wr(e,a,l,r,t,u){return g(),ee(ne,{inline:"",class:"q-ma-sm card-style"},{default:v(()=>[h(M,null,{default:v(()=>[er,tr]),_:1}),h(M,null,{default:v(()=>[ar,y(" "+c(e.format_currency(e.totalexpenditure.max))+" - "+c(e.format_currency(e.totalexpenditure.min))+" (Worst - best) ",1)]),_:1}),h(M,null,{default:v(()=>[rr,nr,s("div",null,[(g(!0),b(be,null,Ie(e.loans,n=>(g(),b("div",{key:n.id,class:"row"},[s("div",null," Loan "+c(n.id),1),sr,s("div",null,[y(" Rate: "+c(n.rate)+"% ",1),h(pe,{modelValue:n.rate,"onUpdate:modelValue":m=>n.rate=m,modelModifiers:{number:!0},type:"number",filled:"",style:{"max-width":"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ir,[y(" Amount: "+c(e.format_currency(n.amount)),1),h(fe,{label:"","label-value":e.format_currency(n.amount),modelValue:n.amount,"onUpdate:modelValue":m=>n.amount=m,min:0,max:e.maxloan.worst,"thumb-size":"40px",step:5e3},null,8,["label-value","modelValue","onUpdate:modelValue","max"])]),h(re,{round:"",icon:"delete",onClick:m=>e.delloan(n.id)},null,8,["onClick"])]))),128))]),h(re,{round:"",color:"primary",icon:"add",onClick:e.addloan},null,8,["onClick"]),or]),_:1}),h(M,null,{default:v(()=>[lr,h(ae,{modelValue:e.mortgage.usemortgage,"onUpdate:modelValue":[a[0]||(a[0]=n=>e.mortgage.usemortgage=n),e.updatemortgagetoggle],label:"Buy with Mortgage"},null,8,["modelValue","onUpdate:modelValue"]),e.mortgage.usemortgage?(g(),b("div",ur,[y(" Rate: "+c(e.mortgage.rate.min)+"% - "+c(e.mortgage.rate.max)+"%",1),h(de,{modelValue:e.mortgage.rate,"onUpdate:modelValue":a[1]||(a[1]=n=>e.mortgage.rate=n),min:0,max:10,step:.1,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":"Best "+e.mortgage.rate.min+"%","right-label-value":"Worst "+e.mortgage.rate.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),y(" LTV: "+c(e.mortgage.ltv.min)+"% - "+c(e.mortgage.ltv.max)+"%",1),h(de,{modelValue:e.mortgage.ltv,"onUpdate:modelValue":a[2]||(a[2]=n=>e.mortgage.ltv=n),min:0,max:100,step:1,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":"Best "+e.mortgage.ltv.min+"%","right-label-value":"Worst "+e.mortgage.ltv.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),y(" This is based on a repayment mortgage. "),s("div",null,"Amount Borrowed: "+c(e.format_currency(e.mortgage_amount_borrowed.worst))+" - "+c(e.format_currency(e.mortgage_amount_borrowed.best)),1),s("div",null,"Monthly Repayments: "+c(e.format_currency(e.mortgage_monthly_payment.worst))+" - "+c(e.format_currency(e.mortgage_monthly_payment.best)),1),s("div",null,"Arrangement Fee: "+c(e.format_currency(e.mortgage.arrangementfee)),1)])):x("",!0)]),_:1}),h(M,null,{default:v(()=>[mr,h(ae,{modelValue:e.bridge.usebridge,"onUpdate:modelValue":[a[3]||(a[3]=n=>e.bridge.usebridge=n),e.updatebridgetoggle],label:"Use a bridge"},null,8,["modelValue","onUpdate:modelValue"]),e.bridge.usebridge?(g(),b("div",dr,[s("div",null,"Start cost/End Cost: "+c(e.bridge.startcost*100)+"%/"+c(e.bridge.endcost*100)+"%",1),s("div",null,"Monthly cost: "+c(e.bridge.monthlycost*100)+"%",1),s("div",null,"Months cost paid upfront: "+c(e.bridgemontghsupfront.min)+" - "+c(e.bridgemontghsupfront.max),1),cr,s("div",hr,[s("div",fr,[gr,h(fe,{label:"",modelValue:e.bridge.amount.worst,"onUpdate:modelValue":a[4]||(a[4]=n=>e.bridge.amount.worst=n),min:0,max:e.maxbridge.worst,step:5e3,"thumb-size":"40px"},null,8,["modelValue","max"]),s("div",null,"Amount: "+c(e.format_currency(e.bridge.amount.worst)),1),s("div",null,"% purchase: "+c(e.format_percent(e.bridge.amount.worst/e.purchaserange.max)),1),s("div",null,"Cost: "+c(e.format_currency(e.bridgecost.worst)),1)]),s("div",pr,[vr,h(fe,{label:"",modelValue:e.bridge.amount.best,"onUpdate:modelValue":a[5]||(a[5]=n=>e.bridge.amount.best=n),min:0,max:e.maxbridge.best,step:5e3,"thumb-size":"40px"},null,8,["modelValue","max"]),s("div",null,"Amount: "+c(e.format_currency(e.bridge.amount.best)),1),s("div",null,"% purchase: "+c(e.format_percent(e.bridge.amount.best/e.purchaserange.min)),1),s("div",null,"Cost: "+c(e.format_currency(e.bridgecost.best)),1)])])])):x("",!0)]),_:1}),h(M,null,{default:v(()=>[br,y(" Cash is the money the investors put into the deal. It is free money as there is no interest payments for this money. "),_r,s("div",yr,c(e.format_currency(e.totalmoneyneeded.worst))+" - "+c(e.format_currency(e.totalmoneyneeded.best))+" (Worst - best) ",1)]),_:1})]),_:1})}var ln=X(Za,[["render",wr]]);const xr=K({name:"InvalidMessage",props:["is_valid_input"],data(){return{}}}),kr={key:0,class:"invalidmessage col-grow"};function Cr(e,a,l,r,t,u){return e.is_valid_input?x("",!0):(g(),b("div",kr,[h(Dt,{name:"warning"}),y("Warning: Invalid input data! ")]))}var $r=X(xr,[["render",Cr]]);function Be({items:e}){e.push({type:"blank",key:e.length})}function Le(e,a,l,r){e.push({type:"total",key:e.length,name:a,worst:l,best:r})}function Z(e,a,l,r){e.push({type:"ledger",key:e.length,name:a,worst:l,best:r})}function et(e,a,l,r){e.push({type:"note",key:e.length,name:a,worst:l,best:r})}const Mr=K({name:"FlipCalcDealRating",props:["is_valid_input","purchaserange","finance_in_items_without_cash","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","finance_out_items","finance_during_items"],components:{FeatureTable:Ut,InvalidMessage:$r},data(){return{}},methods:{format_currency(e){return typeof e=="string"&&e===""?"":U.format_currency(e)},helpcorporation(){this.$q.dialog({title:"Corporation Tax",message:'Corporation tax will depend on if buying in a company or as an individual. It also depends on the total profit of the company (See <a href="https://www.gov.uk/government/publications/rates-and-allowances-corporation-tax/rates-and-allowances-corporation-tax" target="_new">this website</a>). For this calculation we assume 19%.',html:!0}).onOk(()=>{})}},computed:{finance_costs(){var e={worst:0,best:0};function a(l,r){l.worst+=r.worst,l.best+=r.best}return typeof this.finance_in_items_without_cash!="undefined"&&this.finance_in_items_without_cash.map(function(l){a(e,l)}),typeof this.finance_during_items!="undefined"&&this.finance_during_items.map(function(l){a(e,l)}),typeof this.finance_out_items!="undefined"&&this.finance_out_items.map(function(l){a(e,l)}),{worst:e.worst,best:e.best}},itemized_summary(){var e=[],a={worst:0,best:0};function l(f,V){f.worst+=V.worst,f.best+=V.best}typeof this.purchase_items!="undefined"&&this.purchase_items.map(function(f){Z(e,f.name,-f.worst,-f.best),l(a,f)}),typeof this.stampduty_items!="undefined"&&this.stampduty_items.map(function(f){Z(e,f.name,-f.worst,-f.best),l(a,f)}),typeof this.othercosts_items!="undefined"&&this.othercosts_items.map(function(f){Z(e,f.name,-f.worst,-f.best),l(a,f)}),typeof this.refurb_cost_items!="undefined"&&this.refurb_cost_items.map(function(f){Z(e,f.name,-f.worst,-f.best),l(a,f)}),Z(e,"Finance Costs",-this.finance_costs.worst,-this.finance_costs.best),l(a,this.finance_costs),Le(e,"Total Money In",-a.worst,-a.best),Be({items:e}),Z(e,"GDV",this.gdv_total.min,this.gdv_total.max);var r={worst:this.gdv_total.min*.01,best:this.gdv_total.max*.01};Z(e,"Sale Costs (1%)",r.worst,r.best);var t={worst:this.gdv_total.min-(-a.worst+r.worst),best:this.gdv_total.max-(-a.best+r.best)};Le(e,"Gross Profit",t.worst,t.best);var u={worst:t.worst*100/-a.worst,best:t.best*100/-a.best};et(e,"Percentage",u.worst.toFixed(2)+"%",u.best.toFixed(2)+"%"),Be({items:e});var n={worst:t.worst*.19,best:t.best*.19};Z(e,"Corporation Tax",n.worst,n.best);var m={worst:t.worst-n.worst,best:t.best-n.best};Le(e,"Net Profit",m.worst,m.best);var i={worst:m.worst*100/-a.worst,best:m.best*100/-a.best};return et(e,"Percentage",i.worst.toFixed(2)+"%",i.best.toFixed(2)+"%"),Be({items:e}),{items:e,percentage:i}},features(){var e=[],a=Math.min(this.itemized_summary.percentage.best,this.itemized_summary.percentage.worst);return a<20?e.push({type:"negative",text:"Less than 20% uplift. To justify the work in doing the flip we need the deal to make at least 20%"}):a<25?e.push({type:"neutral",text:"Between 20% and 25% uplift. This is borderline. To justify the work and account for risk we would prefer at least 23%"}):e.push({type:"positive",text:"Above 25% uplift. This project has enough uplift to justify the effort and risk."}),e}}}),Vr=s("div",{class:"text-h6"},"Flip Deal Rating",-1),Tr=s("div",{class:"text-subtitle2"},"This section gives a rating for this flip deal.",-1),Sr={class:"sumtable"},Rr=s("thead",null,[s("tr",null,[s("th",{class:"text-left sumtablecell"}),s("th",{class:"text-center sumtablecell worstcasetablecell"},"Worst case"),s("th",{class:"text-center sumtablecell"},"Best case")])],-1),Fr={key:0,class:"text-left sumtablecell"},Br={key:1,class:"text-left sumtablecell worstcasetablecell"},Lr={key:2,class:"text-left sumtablecell"},jr={key:3,colspan:"3",class:"text-left sumtablecell sumtabletitlecell"},qr={key:4,class:"text-left sumtablecell"},Ir={key:5,class:"text-right sumtablecell worstcasetablecell"},Er={key:6,class:"text-right sumtablecell"},zr={key:7,class:"text-left sumtablecell"},Dr={key:8,class:"text-right sumtablecell worstcasetablecell"},Pr={key:9,class:"text-right sumtablecell"},Ar={key:10,class:"text-left sumtablecell"},Nr={key:11,class:"text-right sumtablecell worstcasetablecell"},Ur={key:12,class:"text-right sumtablecell"},Or={key:13,class:"text-left sumtablecell"},Wr={key:14,class:"text-right sumtablecell worstcasetablecell"},Qr={key:15,class:"text-right sumtablecell"},Gr=s("div",{class:"text-h6"},"Flip Project Features",-1);function Kr(e,a,l,r,t,u){const n=me("InvalidMessage"),m=me("FeatureTable");return g(),ee(ne,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:v(()=>[h(M,null,{default:v(()=>[Vr,Tr]),_:1}),h(M,null,{default:v(()=>[s("div",null,[h(n,{is_valid_input:e.is_valid_input},null,8,["is_valid_input"]),s("table",Sr,[Rr,s("tbody",null,[(g(!0),b(be,null,Ie(e.itemized_summary.items,i=>(g(),b("tr",{key:i.id},[i.type=="blank"?(g(),b("td",Fr,"\xA0")):x("",!0),i.type=="blank"?(g(),b("td",Br,"\xA0")):x("",!0),i.type=="blank"?(g(),b("td",Lr,"\xA0")):x("",!0),i.type=="title"?(g(),b("td",jr,c(i.name),1)):x("",!0),i.type=="ledger"?(g(),b("td",qr,c(i.name),1)):x("",!0),i.type=="ledger"?(g(),b("td",Ir,c(e.format_currency(i.worst)),1)):x("",!0),i.type=="ledger"?(g(),b("td",Er,c(e.format_currency(i.best)),1)):x("",!0),i.type=="note"?(g(),b("td",zr,c(i.name),1)):x("",!0),i.type=="note"?(g(),b("td",Dr,c(i.worst),1)):x("",!0),i.type=="note"?(g(),b("td",Pr,c(i.best),1)):x("",!0),i.type=="total"?(g(),b("th",Ar,c(i.name),1)):x("",!0),i.type=="total"?(g(),b("th",Nr,c(e.format_currency(i.worst)),1)):x("",!0),i.type=="total"?(g(),b("th",Ur,c(e.format_currency(i.best)),1)):x("",!0),i.type=="headtext"?(g(),b("th",Or,c(i.name),1)):x("",!0),i.type=="headtext"?(g(),b("th",Wr,c(i.worst),1)):x("",!0),i.type=="headtext"?(g(),b("th",Qr,c(i.best),1)):x("",!0)]))),128))])]),s("div",null,[y("Note: Corporation tax is assumed at 19%"),h(re,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpcorporation},null,8,["onClick"])]),Gr,h(m,{features:e.features,"onUpdate:features":a[0]||(a[0]=i=>e.features=i)},null,8,["features"])])]),_:1})]),_:1})}var un=X(Mr,[["render",Kr]]);export{un as D,ln as F,an as G,$r as I,on as O,rn as P,nn as R,De as S,sn as a};
