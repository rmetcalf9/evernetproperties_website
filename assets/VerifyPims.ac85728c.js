import{_ as v,d as b,b9 as k,r as y,o as a,c as g,w,N as f,e,L as c,t as l,a as t,ae as _,f as i,aq as m,a7 as r}from"./index.cb6f97dd.js";import{Q as x}from"./QPage.d407dbbb.js";import{u as P}from"./backend_connection.a66c37cc.js";import{L as A}from"./LoginButton.ffe0f3e5.js";import"./axios.6e1fcf85.js";const B=b({name:"VerifyPimsPage",components:{LoginButton:A},setup(){const o=P(),s=k();return{backend_connection_store:o,route:s}},data(){return{show_verify_block:!1,info_response:{},complete:!1,complete_message:""}},computed:{isAdmin(){return this.backend_connection_store.hasRole({role:"admin"})}},watch:{isAdmin:function(o){this.refresh()}},methods:{verify(o){const s=this,n={ok:function(p){s.complete=!0,s.complete_message="OK"},error:function(p){f.create({color:"bg-grey-2",message:"Failed to record result",timeout:2e3})}},u={verify_code:this.route.params.verifycode,pims_number:this.info_response.user_profile.pims.number,verified:o};this.backend_connection_store.call_api({apiprefix:"privateAdminAPIPrefix",url:"/pimsverify",method:"POST",data:u,callback:n})},refresh(){if(this.isAdmin){const o=this,s={ok:function(n){o.show_verify_block=!0,o.info_response=n.data},error:function(n){f.create({color:"bg-grey-2",message:"Failed to retrieve details",timeout:2e3})}};this.backend_connection_store.call_api({apiprefix:"privateAdminAPIPrefix",url:"/pimsverify/"+this.route.params.verifycode+"/"+this.route.params.pimsnumber,method:"GET",data:void 0,callback:s})}}},mounted(){this.refresh()}}),T={rows:""},N={key:0,class:"verify_block"},S=e("h1",null,"Verify PIMS member",-1),V=e("div",null,[i("Does this match? (search "),e("a",{href:"https://www.thepims.co.uk/members/",target:"_new"},"https://www.thepims.co.uk/members/"),i(")")],-1),C={key:0,class:"buttons-at-bottom"},I={key:1},L=e("div",null,"Extra features available to Samuel Leeds academy members",-1),$=e("p",null,"This site contains free tools for calculating ROI and evaluating property investments:",-1),z=e("p",null,"Extra features for PIMS/Samueel Leeds academy members:",-1);function D(o,s,n,u,p,R){const h=y("LoginButton");return a(),g(x,{class:"flex flex-center"},{default:w(()=>[e("div",T,[o.show_verify_block?(a(),c("div",N,[S,e("div",null,"Name: "+l(o.info_response.user_profile.pims.first_name)+" "+l(o.info_response.user_profile.pims.last_name),1),e("div",null,"PIMS Number: "+l(o.info_response.user_profile.pims.number),1),V,o.complete?m("",!0):(a(),c("div",C,[t(_,{color:"positive",label:"Yes - this checks out",onClick:s[0]||(s[0]=d=>o.verify(!0))}),i(" \xA0 "),t(_,{color:"negative",label:"No - Verify FAILS",onClick:s[1]||(s[1]=d=>o.verify(!1))})])),o.complete?(a(),c("div",I,[e("h4",null,"Done "+l(o.complete_message),1)])):m("",!0)])):m("",!0),e("div",null,[L,$,e("ul",null,[e("div",null,[t(r,{name:"check_box",color:"green",size:"32px"}),i("Buy Refurbish Refinance")]),e("div",null,[t(r,{name:"check_box",color:"green",size:"32px"}),i("Flip")]),e("div",null,[t(r,{name:"check_box",color:"green",size:"32px"}),i("Deal ratings")])]),z,e("ul",null,[e("div",null,[t(r,{name:"check_box",color:"green",size:"32px"}),i("Ability to save and compare multiple deals")]),e("div",null,[t(r,{name:"check_box",color:"green",size:"32px"}),i("Due diligence rating")])]),e("div",{class:"inlink",onClick:s[2]||(s[2]=d=>o.$router.push("/tools"))},"Access tools here. "),t(h)])])]),_:1})}var q=v(B,[["render",D]]);export{q as default};
