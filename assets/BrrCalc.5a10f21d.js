import{Q as Ae,a as te}from"./QTabs.06705bd3.js";import{Q as Be}from"./QPage.a9d4fe19.js";import{d as q,j as ce,_ as T,o as d,K as w,a as n,Q as C,w as c,aa as D,ae as $,ai as G,e as s,af as P,ah as X,aj as Z,L as y,f as v,ak as Re,r as p,c as S,ag as L,t as _,M as U,O as N,g as Pe,k as De,q as Ie,x as Ve,N as j,a9 as _e,al as Q,am as K,an as re}from"./index.55673ba7.js";import{Q as x}from"./QSpace.84a861ff.js";import{C as ee}from"./ClosePopup.978fb5c5.js";import{Q as de}from"./QSelect.4afcfdb8.js";import{u as O}from"./utils.3f2e20ba.js";import{c as he}from"./common_constants.94b43302.js";import{S as ze,I as fe,Q as je,G as Me,P as Ee,R as Oe,a as Fe,O as Ue,F as Ne,D as Ge}from"./DealRating.b52951ac.js";import{Q as Le,a as R,b as M}from"./QTable.8541d345.js";import{F as We}from"./FeatureTable.fb00fe1e.js";import{u as H,a as Qe}from"./backend_connection.8a83e09a.js";import{W as He,P as Ye,A as Ke,a as Je}from"./ProjectSerializer.9bcb00c0.js";import{T as Xe}from"./TodoItem.8241372e.js";import"./QResizeObserver.07e34e88.js";import"./QItemLabel.4e5aee94.js";import"./format.24bb3700.js";import"./position-engine.e9e8c155.js";import"./TouchPan.24b49aab.js";import"./axios.6e1fcf85.js";import"./Workflow_main.60013326.js";const Ze=q({name:"BrrCalcToolbarCallSellingAgent",emits:["activity_log"],data(){return{dialog_visible:ce(!1),spoke_to:"",notes:""}},computed:{isDisabled(){return this.spoke_to.length<1||this.notes<3}},methods:{open_dialog(){this.dialog_visible=!0,this.spoke_to="",this.notes=""},click_selling_agent_btn(){const e={type:"call_agent",text:"Called selling agent spoke to ("+this.spoke_to+") - "+this.notes,head_notes:void 0};this.$emit("activity_log",e),this.dialog_visible=!1}}}),xe={class:"brrcalctoolbar"},et=s("div",{class:"text-h6"},"Log call with selling agent",-1);function tt(e,r,o,a,t,u){return d(),w("div",xe,[n(C,{color:"primary",icon:"call",label:"Selling agent",onClick:e.open_dialog},null,8,["onClick"]),n(Z,{modelValue:e.dialog_visible,"onUpdate:modelValue":r[3]||(r[3]=i=>e.dialog_visible=i)},{default:c(()=>[n(D,null,{default:c(()=>[n($,{class:"row items-center q-pb-none"},{default:c(()=>[et,n(x),G(n(C,{icon:"close",flat:"",round:"",dense:""},null,512),[[ee]])]),_:1}),n($,null,{default:c(()=>[s("div",null,[n(P,{filled:"",clearable:"",modelValue:e.spoke_to,"onUpdate:modelValue":r[0]||(r[0]=i=>e.spoke_to=i),label:"Spoke to",rules:[i=>i.length>2||"Too short"]},null,8,["modelValue","rules"])]),s("div",null,[n(P,{filled:"",autogrow:"",modelValue:e.notes,"onUpdate:modelValue":r[1]||(r[1]=i=>e.notes=i),label:"Notes",rules:[i=>i.length>2||"Too short"]},null,8,["modelValue","rules"])]),n(X,{align:"right",class:"text-primary"},{default:c(()=>[n(C,{label:"Cancel",onClick:r[2]||(r[2]=i=>this.dialog_visible=!1)}),n(C,{color:"primary",icon:"call",label:"Save",onClick:e.click_selling_agent_btn,disable:e.isDisabled},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var rt=T(Ze,[["render",tt]]);const at=q({name:"BrrCalcToolbarResearchCall",emits:["activity_log"],data(){return{dialog_visible:ce(!1),spoke_to:"",notes:""}},computed:{isDisabled(){return this.spoke_to.length<1||this.notes<3}},methods:{open_dialog(){this.dialog_visible=!0,this.spoke_to="",this.notes=""},click_selling_agent_btn(){const e={type:"research_call",text:"Research call with ("+this.spoke_to+") - "+this.notes,head_notes:void 0};this.$emit("activity_log",e),this.dialog_visible=!1}}}),st={class:"brrcalctoolbar"},ot=s("div",{class:"text-h6"},"Log research call",-1);function nt(e,r,o,a,t,u){return d(),w("div",st,[n(C,{color:"primary",icon:"call",label:"Research",onClick:e.open_dialog},null,8,["onClick"]),n(Z,{modelValue:e.dialog_visible,"onUpdate:modelValue":r[3]||(r[3]=i=>e.dialog_visible=i)},{default:c(()=>[n(D,null,{default:c(()=>[n($,{class:"row items-center q-pb-none"},{default:c(()=>[ot,n(x),G(n(C,{icon:"close",flat:"",round:"",dense:""},null,512),[[ee]])]),_:1}),n($,null,{default:c(()=>[s("div",null,[n(P,{filled:"",clearable:"",modelValue:e.spoke_to,"onUpdate:modelValue":r[0]||(r[0]=i=>e.spoke_to=i),label:"Spoke to",rules:[i=>i.length>2||"Too short"]},null,8,["modelValue","rules"])]),s("div",null,[n(P,{filled:"",autogrow:"",modelValue:e.notes,"onUpdate:modelValue":r[1]||(r[1]=i=>e.notes=i),label:"Notes",rules:[i=>i.length>2||"Too short"]},null,8,["modelValue","rules"])]),n(X,{align:"right",class:"text-primary"},{default:c(()=>[n(C,{label:"Cancel",onClick:r[2]||(r[2]=i=>this.dialog_visible=!1)}),n(C,{color:"primary",icon:"call",label:"Save",onClick:e.click_selling_agent_btn,disable:e.isDisabled},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var it=T(at,[["render",nt]]);const lt=2,ut=q({name:"BrrCalcToolbarSaveButton",props:["reason_project_not_savable"],emits:["saveproject"],data(){return{changed:!1,autosave_seconds_left:60,ever_saved:!1,save_in_progress:!1,save_monitor_function_running:!1,pending_set_changed:!1}},computed:{no_save_message(){return this.reason_project_not_savable!==""?this.reason_project_not_savable:this.save_in_progress?"Saving...":""},can_save(){return this.save_in_progress?!1:!!this.changed},save_btn_text(){return this.save_in_progress?"Saving...":this.no_save_message!==""?"Not able to save ("+this.no_save_message+")":this.changed?this.autosave_seconds_left===-1?"Save Now":"Save now (auto save in "+this.autosave_seconds_left+")":this.ever_saved?"Saved":"Not able to save (No changes)"},is_project_changed(){return this.changed}},methods:{serializer_load_data(e){this.ever_saved=!0},click_btn(){if(!!this.changed){if(this.no_save_message!==""){this.$q.dialog({title:"Not currently able to save",message:this.no_save_message,html:!0});return}this.autosave_seconds_left=-1,this.save_now()}},set_changed_true(){if(this.pending_set_changed){console.log("SaveButton.vue:set_changed_true - set changed called but there is already one pending");return}if(this.save_in_progress){console.log("SaveButton.vue:set_changed_true - Delay set changed due to save in progress");const e=this;setTimeout(function(){e.pending_set_changed=!1,e.set_changed_true()},1e3);return}this.changed=!0,this.no_save_message===""&&(this.autosave_seconds_left=lt,this.start_save_monitor_function())},start_save_monitor_function(){this.save_monitor_function_running||this.save_monitor_function()},save_monitor_function(){if(this.save_monitor_function_running=!0,this.save_in_progress)return;if(this.autosave_seconds_left===-1){this.save_monitor_function_running=!1;return}const e=this;if(e.autosave_seconds_left=e.autosave_seconds_left-1,e.autosave_seconds_left<1){this.save_monitor_function_running=!1,this.save_now();return}setTimeout(e.save_monitor_function,1e3)},save_now(){!this.can_save||(this.save_in_progress=!0,this.$emit("saveproject"))},save_project_complete_notification({success:e,response:r}){console.log("SaveButton - Save completed notification recieved"),this.save_in_progress=!1,e?(this.changed=!1,this.ever_saved=!0):this.autosave_seconds_left=-1}}}),ct={class:"brrcalctoolbar"};function _t(e,r,o,a,t,u){return d(),w("div",ct,[n(C,{color:"primary",icon:"save",label:e.save_btn_text,onClick:e.click_btn},null,8,["label","onClick"])])}var dt=T(ut,[["render",_t]]);function ae(){return{due:"1",description:"",type:"other",group:""}}const ht=q({name:"BrrCalcToolbarTodoButton",emits:["createtodo"],data(){return{dialog_visible:!1,dialog_data:ae(),type_options:he.todo_item_types,due_options:[{label:"1 Day",value:"1"},{label:"3 Days",value:"3"},{label:"5 Days",value:"5"}]}},computed:{isDisabled(){return!1}},methods:{open_dialog(){this.dialog_data=ae(),this.dialog_visible=!0},click_ok(){if(this.$refs.field_description.validate(),this.$refs.field_description.hasError)return;let e=this.dialog_data.group;this.dialog_data.type==="agent"&&(e=""),this.dialog_data.type==="sourcer"&&(e="");const r=parseInt(this.dialog_data.due),o=new Date(new Date().getTime()+r*24*60*60*1e3),a={id:O.uuidv4(),weight:"100",due_date:o.toISOString(),description:this.dialog_data.description,done:!1,done_date:"",group:e,type:this.dialog_data.type,done_text:""};this.$emit("createtodo",a),this.dialog_visible=!1},helpgrouping(){this.$q.dialog({title:"Todo Item Grouping",message:"The grouping field can be left blank. It can be used to group todo items together in displays.",html:!1}).onOk(()=>{})}}}),ft={class:"brrcalctoolbar-todobutton"},mt=s("div",{class:"text-h6"},"Log todo task for this project",-1),pt={class:"brrcalctoolbar-field"},gt={key:0,class:"brrcalctoolbar-field col flex"},vt={class:"brrcalctoolbar-field"},wt={class:"brrcalctoolbar-field"};function bt(e,r,o,a,t,u){return d(),w("div",ft,[n(C,{color:"primary",icon:"rule",label:"Add TODO",onClick:e.open_dialog},null,8,["onClick"]),n(Z,{modelValue:e.dialog_visible,"onUpdate:modelValue":r[5]||(r[5]=i=>e.dialog_visible=i)},{default:c(()=>[n(D,{class:"brrcalctoolbar-card"},{default:c(()=>[n($,{class:"row items-center q-pb-none"},{default:c(()=>[mt,n(x),G(n(C,{icon:"close",flat:"",round:"",dense:""},null,512),[[ee]])]),_:1}),n($,null,{default:c(()=>[s("div",null,[s("div",pt,[n(de,{modelValue:e.dialog_data.type,"onUpdate:modelValue":r[0]||(r[0]=i=>e.dialog_data.type=i),options:e.type_options,label:"Type of Task","emit-value":"","map-options":""},null,8,["modelValue","options"])]),e.dialog_data.type==="other"?(d(),w("div",gt,[n(P,{modelValue:e.dialog_data.group,"onUpdate:modelValue":r[1]||(r[1]=i=>e.dialog_data.group=i),label:"Grouping",class:"col-grow"},null,8,["modelValue"]),n(C,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpgrouping},null,8,["onClick"])])):y("",!0),s("div",vt,[n(P,{modelValue:e.dialog_data.description,"onUpdate:modelValue":r[2]||(r[2]=i=>e.dialog_data.description=i),label:"Description",autogrow:"",rules:[i=>i.trim().length>3||"Minimum 4 characters"],ref:"field_description"},null,8,["modelValue","rules"])]),s("div",wt,[v("How long until it's due: "),n(Re,{modelValue:e.dialog_data.due,"onUpdate:modelValue":r[3]||(r[3]=i=>e.dialog_data.due=i),options:e.due_options,color:"primary",inline:""},null,8,["modelValue","options"])])]),n(X,{align:"right",class:"text-primary"},{default:c(()=>[n(C,{label:"Cancel",onClick:r[4]||(r[4]=i=>this.dialog_visible=!1)}),n(C,{color:"primary",icon:"rule",label:"Ok",onClick:e.click_ok,disable:e.isDisabled},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var yt=T(ht,[["render",bt]]);const St=q({name:"BrrCalcToolbar",props:["reason_project_not_savable","is_saved_project_with_id"],emits:["activity_log","saveproject","createtodo"],components:{CallSellingAgent:rt,ResearchCall:it,SaveButton:dt,TodoButton:yt},data(){return{}},computed:{ever_saved(){return this.$refs.SaveToolbar.ever_saved},is_project_changed(){return this.$refs.SaveToolbar.is_project_changed}},methods:{click_save_btn(){this.$refs.SaveToolbar.click_btn()},set_changed_true(){this.$refs.SaveToolbar.set_changed_true()},save_project_complete_notification(e){this.$refs.SaveToolbar.save_project_complete_notification(e)},serializer_load_data(e){this.$refs.SaveToolbar.serializer_load_data(e)}}}),$t={class:"row brrcalctoolbar"};function kt(e,r,o,a,t,u){const i=p("SaveButton"),l=p("CallSellingAgent"),h=p("ResearchCall"),m=p("TodoButton");return d(),w("div",$t,[n(i,{ref:"SaveToolbar",onSaveproject:r[0]||(r[0]=f=>e.$emit("saveproject")),reason_project_not_savable:e.reason_project_not_savable},null,8,["reason_project_not_savable"]),n(l,{onActivity_log:r[1]||(r[1]=f=>e.$emit("activity_log",f))}),n(h,{onActivity_log:r[2]||(r[2]=f=>e.$emit("activity_log",f))}),e.is_saved_project_with_id?(d(),S(m,{key:0,onCreatetodo:r[3]||(r[3]=f=>e.$emit("createtodo",f))})):y("",!0)])}var Ct=T(St,[["render",kt]]);function se(){return{flip:!1,hmo:!1}}const qt=q({name:"BrrCalcVision",emits:["projectchanged"],data(){return{devplan:"",strategy:se(),emit_project_change_notification:!0}},computed:{serializer_card_data(){return{devplan:this.devplan,strategy:this.strategy}}},watch:{serializer_card_data(e){this.setchanged()}},methods:{setchanged(){this.emit_project_change_notification&&this.$emit("projectchanged","Vision")},helpdevplan(){this.$q.dialog({title:"What is the development plan?",message:"Enter the development plan. E.g. Split into two flats"}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.devplan=e.devplan,typeof e.strategy=="undefined"?this.strategy=se():(this.strategy.flip=e.strategy.flip,this.strategy.hmo=e.strategy.hmo);const r=this;setTimeout(function(){r.emit_project_change_notification=!0},50)}}}),Tt=s("div",{class:"text-h6"},"Vision",-1),At={class:"row"},Bt=s("div",{class:"text-h6"},"Strategies",-1);function Rt(e,r,o,a,t,u){return d(),S(D,{inline:"",class:"q-ma-sm card-style"},{default:c(()=>[n($,null,{default:c(()=>[Tt,s("div",At,[n(P,{modelValue:e.devplan,"onUpdate:modelValue":r[0]||(r[0]=i=>e.devplan=i),autogrow:"",label:"What is the development plan?",class:"col-grow"},null,8,["modelValue"]),s("div",null,[n(C,{round:"",color:"primary",icon:"info",onClick:e.helpdevplan},null,8,["onClick"])])]),v(" \xA0 "),Bt,s("div",null,[n(L,{modelValue:e.strategy.flip,"onUpdate:modelValue":r[1]||(r[1]=i=>e.strategy.flip=i),label:"Flip",onClick:e.setchanged},null,8,["modelValue","onClick"])]),s("div",null,[n(L,{modelValue:e.strategy.hmo,"onUpdate:modelValue":r[2]||(r[2]=i=>e.strategy.hmo=i),label:"HMO",onClick:e.setchanged},null,8,["modelValue","onClick"])])]),_:1})]),_:1})}var Pt=T(qt,[["render",Rt]]);function oe(){return{min:6,max:6}}function ne(){return 2500}function Dt(){return[{name:"Remortgage Arrangment",amount:2500},{name:"Remortgage Solicitors",amount:2300},{name:"Remortgage Valuation",amount:1500}]}const It=q({name:"BrrCalcFinance",emits:["projectchanged"],props:["gdv_total"],components:{SliderWithTextInput:ze},data(){return{refinance:{userefinance:!0,ltv:{min:75,max:75},rate:oe(),commercial_valuation:!1},emit_project_change_notification:!0}},methods:{format_currency(e){return O.format_currency(e)},serializer_load_data(e){this.emit_project_change_notification=!1,this.refinance.userefinance=e.refinance_userefinance,this.refinance.ltv=e.refinance_userefinance_ltv,typeof e.refinance_userefinance_rate=="undefined"?this.refinance.rate=oe():this.refinance.rate=e.refinance_userefinance_rate,typeof e.refinance_commercial_valuation=="undefined"?this.refinance.commercial_valuation=!1:this.refinance.commercial_valuation=e.refinance_commercial_valuation;const r=this;setTimeout(function(){r.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Refinance")}},computed:{monthly_payments(){return{worst:this.refinanceamount.worst*(this.refinance.rate.min/(100*12)),best:this.refinanceamount.best*(this.refinance.rate.max/(100*12))}},serializer_card_data(){return{refinance_userefinance:this.refinance.userefinance,refinance_userefinance_ltv:this.refinance.ltv,refinance_userefinance_rate:this.refinance.rate,refinance_commercial_valuation:this.refinance.commercial_valuation}},get_refinance(){return this.refinance},refinanceamount(){return{worst:this.gdv_total.min*(this.refinance.ltv.min/100),best:this.gdv_total.max*(this.refinance.ltv.max/100)}},refinance_costs(){let e=[];return this.refinance.commercial_valuation?(Dt().forEach(function(r){e.push({name:r.name,worst:-1*r.amount,best:-1*r.amount})}),e):(e.push({name:"Remortgage Cost",worst:-1*ne(),best:-1*ne()}),e)},refinance_out_items(){let e=[];return this.refinance.userefinance&&e.push({name:"Mortgage Refinance",worst:this.refinanceamount.worst,best:this.refinanceamount.best}),this.refinance_costs.map(function(r){e.push(r)}),e}}}),Vt=s("div",{class:"text-h6"},"Refinance",-1),zt={key:0},jt=s("hr",null,null,-1),Mt=s("hr",null,null,-1),Et=s("div",null,[s("b",null,"Refinance Costs:")],-1);function Ot(e,r,o,a,t,u){const i=p("SliderWithTextInput");return d(),S(D,{inline:"",class:"q-ma-sm card-style"},{default:c(()=>[n($,null,{default:c(()=>[Vt,v(" This section is for adding refinance details. After the refurbishment is complete the refinance stage can be used to pull money out of the deal. "),n(L,{modelValue:e.refinance.userefinance,"onUpdate:modelValue":r[0]||(r[0]=l=>e.refinance.userefinance=l),label:"Refinance after refurbishment"},null,8,["modelValue"]),e.refinance.userefinance?(d(),w("div",zt,[v(" Refinance LTV "+_(e.refinance.ltv.min)+"% - "+_(e.refinance.ltv.max)+"% ",1),n(i,{ref:"slider",range:e.refinance.ltv,"onUpdate:range":r[1]||(r[1]=l=>e.refinance.ltv=l),min:0,max:100,step:5,left_label_value:e.refinance.ltv.min+"%",right_label_value:e.refinance.ltv.max+"%",min_label_text:"Worst LTV %",max_label_text:"Best LTV %"},null,8,["range","left_label_value","right_label_value"]),jt,v(" Intrest rate "+_(e.refinance.rate.min)+"% - "+_(e.refinance.rate.max)+"% ",1),n(i,{ref:"slider",range:e.refinance.rate,"onUpdate:range":r[2]||(r[2]=l=>e.refinance.rate=l),min:0,max:50,step:.1,left_label_value:e.refinance.rate.min+"%",right_label_value:e.refinance.rate.max+"%",min_label_text:"Worst %",max_label_text:"Best %"},null,8,["range","left_label_value","right_label_value"]),s("div",null,[n(L,{modelValue:e.refinance.commercial_valuation,"onUpdate:modelValue":r[3]||(r[3]=l=>e.refinance.commercial_valuation=l),label:"Commercial Valuation"},null,8,["modelValue"])]),Mt,s("div",null,"Refinance amount: "+_(e.format_currency(e.refinanceamount.worst))+" - "+_(e.format_currency(e.refinanceamount.best)),1),s("div",null,"Monthly Payments: "+_(e.format_currency(e.monthly_payments.worst))+" - "+_(e.format_currency(e.monthly_payments.best)),1),s("div",null,[Et,(d(!0),w(U,null,N(e.refinance_costs,l=>(d(),w("div",{key:l.name},[s("div",null,_(l.name)+": "+_(e.format_currency(l.worst*-1))+" - "+_(e.format_currency(l.best*-1)),1)]))),128))])])):y("",!0)]),_:1})]),_:1})}var Ft=T(It,[["render",Ot]]),F=Pe({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:r}){const o=De(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>Ie("tr",{class:o.value},Ve(r.default))}});function me(e){return e.filter(function(r){return r.type==="ledger"})}function J(e,r){e.push({type:"blank",key:e.length}),e.push({type:"title",key:e.length,name:r})}function z(e,r,o,a){let t=me(e);var u=void 0,i=void 0;t.length>0&&(u=t[t.length-1].worst,i=t[t.length-1].best);function l(h,m){var f=0;typeof h!="undefined"&&(f=h.bal);var B="",I="";return m>0?B=m:I=m,{in:B,out:I,bal:f+m}}e.push({type:"ledger",key:e.length,name:r,worst:l(u,o),best:l(i,a)})}const Ut=q({name:"BrrCalcDealSummary",props:["is_valid_input","purchaserange","finance_in_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","finance_out_items","refinance_out_items","finance_during_items"],components:{InvalidMessage:fe},data(){return{table:{columns:[{name:"item",label:"Item",field:"item"},{name:"win",label:"In",field:"win"},{name:"wout",label:"Out",field:"wout"},{name:"wbal",label:"Balance",field:"wbal"},{name:"bin",label:"In",field:"bin"},{name:"bout",label:"Out",field:"bout"},{name:"bbal",label:"Balance",field:"bbal"}]}}},methods:{format_currency(e){return typeof e=="string"&&e===""?"":O.format_currency(e)}},computed:{final_bal(){let e=me(this.items);return e.length===0?{worst:0,best:0}:{worst:e[e.length-1].worst.bal,best:e[e.length-1].best.bal}},money_in(){var e=this.finance_in_items.reduce((o,a)=>o+a.worst,0),r=this.finance_in_items.reduce((o,a)=>o+a.best,0);return{worst:e,best:r}},items(){var e=[];typeof this.finance_in_items!="undefined"&&this.finance_in_items.map(function(o){z(e,o.name,o.worst,o.best)}),typeof this.purchase_items!="undefined"&&this.purchase_items.map(function(o){z(e,o.name,o.worst,o.best)}),typeof this.stampduty_items!="undefined"&&this.stampduty_items.map(function(o){z(e,o.name,o.worst,o.best)}),typeof this.othercosts_items!="undefined"&&this.othercosts_items.map(function(o){z(e,o.name,o.worst,o.best)}),J(e,"During Project"),typeof this.finance_during_items!="undefined"&&this.finance_during_items.map(function(o){z(e,o.name,o.worst,o.best)}),typeof this.refurb_cost_items!="undefined"&&this.refurb_cost_items.map(function(o){z(e,o.name,o.worst,o.best)});let r=!1;return typeof this.refinance_out_items!="undefined"&&(this.refinance_out_items.length>0&&(r=!0,J(e,"Exit finance")),this.refinance_out_items.map(function(o){z(e,o.name,o.worst,o.best)})),typeof this.finance_out_items!="undefined"&&(this.finance_out_items.length>0&&(r||J(e,"Exit finance")),this.finance_out_items.map(function(o){z(e,o.name,o.worst,o.best)})),e}}}),Nt=s("div",{class:"text-h6"},"Cashflow Summary",-1),Gt=s("div",{class:"text-subtitle2"},"This section gives a break down of money in and out of the deal. It is broken down twice, for best and worst case figures.",-1),Lt=s("div",null," \xA0 ",-1);function Wt(e,r,o,a,t,u){const i=p("InvalidMessage");return d(),S(D,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:c(()=>[n($,null,{default:c(()=>[Nt,Gt]),_:1}),n($,null,{default:c(()=>[n(i,{is_valid_input:e.is_valid_input},null,8,["is_valid_input"]),s("div",null,[n(Le,{columns:e.table.columns,rows:e.items,"hide-bottom":"","rows-per-page-options":[100]},{header:c(l=>[n(F,null,{default:c(()=>[n(R),n(R,{colspan:"3",class:"worstcasetablecell"},{default:c(()=>[v("Worst Case")]),_:1}),n(R,{colspan:"3"},{default:c(()=>[v("Best Case")]),_:1})]),_:1}),n(F,{props:l},{default:c(()=>[n(R,null,{default:c(()=>[v(" Item ")]),_:1}),n(R,{class:"worstcasetablecell"},{default:c(()=>[v(" In ")]),_:1}),n(R,{class:"worstcasetablecell"},{default:c(()=>[v(" Out ")]),_:1}),n(R,{class:"worstcasetablecell"},{default:c(()=>[v(" Balance ")]),_:1}),n(R,null,{default:c(()=>[v(" In ")]),_:1}),n(R,null,{default:c(()=>[v(" Out ")]),_:1}),n(R,null,{default:c(()=>[v(" Balance ")]),_:1})]),_:2},1032,["props"])]),body:c(l=>[l.row.type==="ledger"?(d(),S(F,{key:0},{default:c(()=>[n(M,{class:"tablerowcell"},{default:c(()=>[v(_(l.row.name),1)]),_:2},1024),n(M,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:c(()=>[v(_(e.format_currency(l.row.worst.in)),1)]),_:2},1024),n(M,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:c(()=>[v(_(e.format_currency(l.row.worst.out)),1)]),_:2},1024),n(M,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:c(()=>[v(_(e.format_currency(l.row.worst.bal)),1)]),_:2},1024),n(M,{class:"valuetablecell tablerowcell"},{default:c(()=>[v(_(e.format_currency(l.row.best.in)),1)]),_:2},1024),n(M,{class:"valuetablecell tablerowcell"},{default:c(()=>[v(_(e.format_currency(l.row.best.out)),1)]),_:2},1024),n(M,{class:"valuetablecell tablerowcell"},{default:c(()=>[v(_(e.format_currency(l.row.best.bal)),1)]),_:2},1024)]),_:2},1024)):y("",!0),l.row.type==="blank"?(d(),S(F,{key:1},{default:c(()=>[n(R,{colspan:"7"},{default:c(()=>[v("\xA0")]),_:1})]),_:1})):y("",!0),l.row.type==="title"?(d(),S(F,{key:2},{default:c(()=>[n(R,{colspan:"7"},{default:c(()=>[v(_(l.row.name),1)]),_:2},1024)]),_:2},1024)):y("",!0)]),_:1},8,["columns","rows"])]),Lt]),_:1})]),_:1})}var Qt=T(Ut,[["render",Wt]]);const Ht=q({name:"BrrCalcDealRatingAlternativeSummary",props:["purchaserange","finance_refinance","stampduty_total","othercosts_total","refurb_cost_total","gdv_total"],methods:{format_currency(e){return O.format_currency(e)}},computed:{mortgage_rate_display(){return this.finance_refinance.userefinance?{best:this.finance_refinance.ltv.max+"%",worst:this.finance_refinance.ltv.min+"%"}:{best:"N/A",worst:"N/A"}},mortgage(){return this.finance_refinance.userefinance?{best:this.finance_refinance.ltv.max/100*this.purchaserange.min,worst:this.finance_refinance.ltv.min/100*this.purchaserange.max}:{best:0,worst:0}},deposit(){return{best:this.purchaserange.min-this.mortgage.best,worst:this.purchaserange.max-this.mortgage.worst}},total_money_in(){return{best:this.mortgage.best+this.deposit.best+this.stampduty_total.min+this.othercosts_total.min+this.refurb_cost_total.min,worst:this.mortgage.worst+this.deposit.worst+this.stampduty_total.max+this.othercosts_total.max+this.refurb_cost_total.max}},new_mortgage_amount(){return{best:this.gdv_total.max*(this.finance_refinance.ltv.max/100),worst:this.gdv_total.min*(this.finance_refinance.ltv.min/100)}},monay_pulled_out(){return{best:this.gdv_total.max-this.new_mortgage_amount.best,worst:this.gdv_total.min-this.new_mortgage_amount.worst}},profit(){return{best:this.gdv_total.max-this.total_money_in.best,worst:this.gdv_total.min-this.total_money_in.worst}},money_left_in(){return{best:this.monay_pulled_out.best-this.profit.best,worst:this.monay_pulled_out.worst-this.profit.worst}}}}),Yt={class:"alternativetable"},Kt=s("thead",null,[s("tr",null,[s("th",{class:"text-left alternativetablecell"}),s("th",{class:"text-center alternativetablecell worstcasetablecell"},"Worst case"),s("th",{class:"text-center alternativetablecell"},"Best case")])],-1),Jt=s("td",{class:"text-left alternativetablecell"},"Price offered",-1),Xt={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Zt={class:"text-right alternativetablecell yellowtablecell totaltablecell"},xt=s("td",{class:"text-left alternativetablecell"},"Mortgage %",-1),er={class:"text-right alternativetablecell yellowtablecell totaltablecell"},tr={class:"text-right alternativetablecell yellowtablecell totaltablecell"},rr=s("td",{class:"text-left alternativetablecell"},"Mortgage",-1),ar={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},sr={class:"text-right alternativetablecell totaltablecell"},or=s("td",{class:"text-left alternativetablecell"},"Deposit",-1),nr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},ir={class:"text-right alternativetablecell totaltablecell"},lr=s("td",{class:"text-left alternativetablecell"},"Stamp Duty",-1),ur={class:"text-right alternativetablecell yellowtablecell totaltablecell"},cr={class:"text-right alternativetablecell yellowtablecell totaltablecell"},_r=s("td",{class:"text-left alternativetablecell"},"Other costs (Legals, etc)",-1),dr={class:"text-right alternativetablecell yellowtablecell totaltablecell"},hr={class:"text-right alternativetablecell yellowtablecell totaltablecell"},fr=s("td",{class:"text-left alternativetablecell"},"Total Refurb Costs",-1),mr={class:"text-right alternativetablecell bluetablecell totaltablecell"},pr={class:"text-right alternativetablecell bluetablecell totaltablecell"},gr=s("td",{class:"text-left alternativetablecell"},"Total Money In",-1),vr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},wr={class:"text-right alternativetablecell totaltablecell"},br=s("tr",null,[s("td",null,"\xA0"),s("td",{class:"worstcasetablecell"}),s("td")],-1),yr=s("td",{class:"text-left alternativetablecell"},"End Value",-1),Sr={class:"text-right alternativetablecell yellowtablecell totaltablecell"},$r={class:"text-right alternativetablecell yellowtablecell totaltablecell"},kr=s("td",{class:"text-left alternativetablecell"},"New Mortgage Amount",-1),Cr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},qr={class:"text-right alternativetablecell totaltablecell"},Tr=s("td",{class:"text-left alternativetablecell"},"Money Pulled Out",-1),Ar={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Br={class:"text-right alternativetablecell totaltablecell"},Rr=s("tr",null,[s("td",null,"\xA0"),s("td",{class:"worstcasetablecell"}),s("td")],-1),Pr=s("td",{class:"text-left alternativetablecell"},"Profit",-1),Dr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Ir={class:"text-right alternativetablecell totaltablecell"},Vr=s("td",{class:"text-left alternativetablecell"},"Money Left In",-1),zr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},jr={class:"text-right alternativetablecell totaltablecell"};function Mr(e,r,o,a,t,u){return d(),S(je,{"expand-separator":"",label:"Alternative summary format"},{default:c(()=>[s("div",null,[v(" This is another way of viewing the project numbers that is commonly used. I have included this for comparison. "),s("table",Yt,[Kt,s("tbody",null,[s("tr",null,[Jt,s("td",Xt,_(e.format_currency(e.purchaserange.max)),1),s("td",Zt,_(e.format_currency(e.purchaserange.min)),1)]),s("tr",null,[xt,s("td",er,_(e.mortgage_rate_display.worst),1),s("td",tr,_(e.mortgage_rate_display.best),1)]),s("tr",null,[rr,s("td",ar,_(e.format_currency(e.mortgage.worst)),1),s("td",sr,_(e.format_currency(e.mortgage.best)),1)]),s("tr",null,[or,s("td",nr,_(e.format_currency(e.deposit.worst)),1),s("td",ir,_(e.format_currency(e.deposit.best)),1)]),s("tr",null,[lr,s("td",ur,_(e.format_currency(e.stampduty_total.max)),1),s("td",cr,_(e.format_currency(e.stampduty_total.min)),1)]),s("tr",null,[_r,s("td",dr,_(e.format_currency(e.othercosts_total.max)),1),s("td",hr,_(e.format_currency(e.othercosts_total.min)),1)]),s("tr",null,[fr,s("td",mr,_(e.format_currency(e.refurb_cost_total.max)),1),s("td",pr,_(e.format_currency(e.refurb_cost_total.min)),1)]),s("tr",null,[gr,s("th",vr,_(e.format_currency(e.total_money_in.worst)),1),s("th",wr,_(e.format_currency(e.total_money_in.best)),1)]),br,s("tr",null,[yr,s("td",Sr,_(e.format_currency(e.gdv_total.min)),1),s("td",$r,_(e.format_currency(e.gdv_total.max)),1)]),s("tr",null,[kr,s("td",Cr,_(e.format_currency(e.new_mortgage_amount.worst)),1),s("td",qr,_(e.format_currency(e.new_mortgage_amount.best)),1)]),s("tr",null,[Tr,s("td",Ar,_(e.format_currency(e.monay_pulled_out.worst)),1),s("td",Br,_(e.format_currency(e.monay_pulled_out.best)),1)]),Rr,s("tr",null,[Pr,s("td",Dr,_(e.format_currency(e.profit.worst)),1),s("td",Ir,_(e.format_currency(e.profit.best)),1)]),s("tr",null,[Vr,s("td",zr,_(e.format_currency(e.money_left_in.worst)),1),s("td",jr,_(e.format_currency(e.money_left_in.best)),1)])])]),v(" Note: The profit amounts may not match because this method does not take into account finance costs. ")])]),_:1})}var Er=T(Ht,[["render",Mr]]);const Or=q({name:"BrrCalcDealRatingCompareDoneup",props:["purchaserange","refurb_cost_total","gdv_total"],methods:{format_currency(e){return O.format_currency(e)},format_percent(e){return O.format_percent(e)}},computed:{total_spent(){return{worst:this.purchaserange.max+this.refurb_cost_total.max,best:this.purchaserange.min+this.refurb_cost_total.min}},gain(){return{worst:this.gdv_total.min-this.total_spent.worst,best:this.gdv_total.max-this.total_spent.best}},profit_percentage(){return{worst:this.gain.worst/this.total_spent.worst,best:this.gain.best/this.total_spent.best}}}}),Fr=s("div",{class:"text-h5"},"Compare this project to buying a done up property",-1),Ur=s("div",null,"This section compares this project with buying a property that is already done up. To account for the time and risk involved with a refurbishment we expect the end value of the property to be more than if we had just bought one.",-1),Nr={class:"alternativetable"},Gr=s("thead",null,[s("tr",null,[s("th",{class:"text-left alternativetablecell"}),s("th",{class:"text-center alternativetablecell worstcasetablecell"},"Worst case"),s("th",{class:"text-center alternativetablecell"},"Best case")])],-1),Lr=s("td",{class:"text-left alternativetablecell"},"Purchase + Refurb",-1),Wr={class:"text-right alternativetablecell worstcasetablecell"},Qr={class:"text-right alternativetablecell"},Hr=s("td",{class:"text-left alternativetablecell"},"End Value",-1),Yr={class:"text-right alternativetablecell worstcasetablecell"},Kr={class:"text-right alternativetablecell"},Jr=s("td",{class:"text-left alternativetablecell totaltablecell"},"Gain",-1),Xr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Zr={class:"text-right alternativetablecell totaltablecell"},xr=s("td",{class:"text-left alternativetablecell totaltablecell"},"Percentage",-1),ea={class:"text-right alternativetablecell worstcasetablecell finaltotaltablecell"},ta={class:"text-right alternativetablecell finaltotaltablecell"};function ra(e,r,o,a,t,u){return d(),w("div",null,[Fr,Ur,s("table",Nr,[Gr,s("tbody",null,[s("tr",null,[Lr,s("td",Wr,_(e.format_currency(e.total_spent.worst)),1),s("td",Qr,_(e.format_currency(e.total_spent.best)),1)]),s("tr",null,[Hr,s("td",Yr,_(e.format_currency(e.gdv_total.min)),1),s("td",Kr,_(e.format_currency(e.gdv_total.max)),1)]),s("tr",null,[Jr,s("td",Xr,_(e.format_currency(e.gain.worst)),1),s("td",Zr,_(e.format_currency(e.gain.best)),1)]),s("tr",null,[xr,s("td",ea,_(e.format_percent(e.profit_percentage.worst)),1),s("td",ta,_(e.format_percent(e.profit_percentage.best)),1)])])])])}var aa=T(Or,[["render",ra]]);const sa=q({name:"BrrCalcDealRating",props:["is_valid_input","finance_totalmoneyneeded","deal_summary_final_bal","finance_refinance","gdv_total","refurbmonths","purchaserange","stampduty_total","othercosts_total","refurb_cost_total"],components:{dealRatingAlternativeSummary:Er,FeatureTable:We,InvalidMessage:fe,dealRatingCompareDoneup:aa},data(){return{}},methods:{format_currency(e){return O.format_currency(e)}},computed:{features(){let e=[];var r=Math.min(this.cash_out_of_deal_minus_cash_in.best,this.cash_out_of_deal_minus_cash_in.worst);r>0?e.push({type:"positive",text:"All money out deal! - All initial investment returned plus at least "+this.format_currency(r)}):e.push({type:"negative",text:"Not all money out deal! - Might leave "+this.format_currency(-1*r)+" in."});var o=Math.min(this.profit.best,this.profit.worst);o<0?e.push({type:"negative",text:"Deal makes a loss! - End value might be "+this.format_currency(-1*o)+" less than investment."}):o<this.gdv_total.min*.25?e.push({type:"negative",text:"Low amount of profit! - Low profit "+this.format_currency(o)+" less than 25% of gdv."}):e.push({type:"positive",text:"Profit making deal! - Profit of "+this.format_currency(o)+"!"});var a=Math.min(this.annualroi.worst,this.annualroi.best);return a<3?e.push({type:"negative",text:"Very low ROI! "+a.toFixed(1)+"%"}):a>10&&e.push({type:"positive",text:"Good ROI! "+a.toFixed(1)+"%"}),e},cash_out_of_deal_minus_cash_in(){return{best:this.deal_summary_final_bal.best-this.finance_totalmoneyneeded.best,worst:this.deal_summary_final_bal.worst-this.finance_totalmoneyneeded.worst}},percent_left_in(){return this.finance_refinance.userefinance?{best:100-this.finance_refinance.ltv.max,worst:100-this.finance_refinance.ltv.min}:{best:100,worst:100}},amount_equity_left_in(){return{best:this.gdv_total.max*(this.percent_left_in.best/100),worst:this.gdv_total.min*(this.percent_left_in.worst/100)}},total_end_value(){return{best:this.amount_equity_left_in.best+this.deal_summary_final_bal.best,worst:this.amount_equity_left_in.worst+this.deal_summary_final_bal.worst}},profit(){return{best:this.total_end_value.best-this.finance_totalmoneyneeded.best,worst:this.total_end_value.worst-this.finance_totalmoneyneeded.worst}},roi(){return{best:100*this.profit.best/this.finance_totalmoneyneeded.best,worst:100*this.profit.worst/this.finance_totalmoneyneeded.worst}},annualroi(){return{worst:this.roi.worst*(12/this.refurbmonths.worst),best:this.roi.best*(12/this.refurbmonths.best)}}}}),oa=s("div",{class:"text-h6"},"Project Rating",-1),na=s("div",{class:"text-subtitle2"},"How good is this project?",-1),ia=s("div",{class:"text-h5"},"Profit/Loss",-1),la=s("div",null,"Compare what we have put into the deal vs what we get out of it. These calculations won't account for time invested or the risk taken on in the project",-1),ua={class:"text-h5"},ca=s("div",{class:"text-h6"},"Deal Features",-1);function _a(e,r,o,a,t,u){const i=p("InvalidMessage"),l=p("dealRatingCompareDoneup"),h=p("dealRatingAlternativeSummary"),m=p("FeatureTable");return d(),S(D,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:c(()=>[n($,null,{default:c(()=>[oa,na]),_:1}),n($,null,{default:c(()=>[n(i,{is_valid_input:e.is_valid_input},null,8,["is_valid_input"]),ia,la,s("div",ua,"Total cash in: "+_(e.format_currency(e.finance_totalmoneyneeded.worst))+" - "+_(e.format_currency(e.finance_totalmoneyneeded.best))+" Worst - Best",1),n(l,{purchaserange:e.purchaserange,refurb_cost_total:e.refurb_cost_total,gdv_total:e.gdv_total},null,8,["purchaserange","refurb_cost_total","gdv_total"])]),_:1}),n($,null,{default:c(()=>[n(h,{purchaserange:e.purchaserange,finance_refinance:e.finance_refinance,stampduty_total:e.stampduty_total,othercosts_total:e.othercosts_total,refurb_cost_total:e.refurb_cost_total,gdv_total:e.gdv_total},null,8,["purchaserange","finance_refinance","stampduty_total","othercosts_total","refurb_cost_total","gdv_total"])]),_:1}),n($,null,{default:c(()=>[ca,n(m,{features:e.features,"onUpdate:features":r[0]||(r[0]=f=>e.features=f)},null,8,["features"])]),_:1})]),_:1})}var da=T(sa,[["render",_a]]);function ie(){return{type:"self",value:""}}const ha=q({name:"DealBasicInfo",emits:["projectchanged","navigate_away"],props:["ever_saved"],components:{Weblinks:He},setup(){return{backend_connection_store:H()}},data(){return{patch:{id:"notset",name:"Not Set"},address:"",postcode:"",weblinks:[],new_patch_value:"",selling_agent:"",notes:"",emit_project_change_notification:!0,deal_source:ie(),deal_source_local_only:{self_check_box:!0,value:""}}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","DealBasicInfo:serializer")}},computed:{deal_source_is_self(){return this.deal_source.type==="self"},serializer_card_data(){return{patch_id:this.patch.id,address:this.address,postcode:this.postcode,weblinks:this.weblinks,selling_agent:this.selling_agent,notes:this.notes,deal_source:this.deal_source}},reason_project_not_savable(){return this.patch.id==="notset"?"Select patch":typeof this.address=="undefeind"||this.address===null||this.address.length<3?"Enter address":""},security_role_cansave(){return this.backend_connection_store.security_role_cansave},patch_list(){return this.backend_connection_store.user_profile.patches.concat([{id:"create",name:"Add..."}])}},methods:{apiaddweblink(e){return this.$refs.Weblinks.apiaddweblink(e)},updatedealsource(){let e="self";this.deal_source_local_only.self_check_box===!1&&(e="text");let r=this.deal_source_local_only.value;this.deal_source={type:e,value:r}},updateweblinks(e){this.weblinks=e,this.emit_project_change_notification&&this.$emit("projectchanged","DealBasicInfo:updateweblinks")},serializer_load_data(e){this.emit_project_change_notification=!1,this.address=e.address,this.postcode=e.postcode,this.weblinks=e.weblinks,this.selling_agent=e.selling_agent,this.notes=e.notes,this.patch=this.patch_list.filter(function(o){return o.id===e.patch_id})[0],typeof e.deal_source=="undefined"?this.deal_source=ie():this.deal_source=e.deal_source,this.deal_source_local_only.self_check_box=this.deal_source.type==="self",this.deal_source_local_only.value=this.deal_source.value,this.updatedealsource();const r=this;setTimeout(function(){r.emit_project_change_notification=!0,r.changed=!1,r.autosave_seconds_left=-1},50)},select_patch_by_id(e){this.patch=this.patch_list.filter(function(r){return r.id===e})[0]},select_patch(e){if(e.id==="create"){const r=this;this.$q.dialog({title:"Add new patch",message:"Enter the name for the new patch",html:!1,ok:{push:!0,label:"Ok"},cancel:{push:!0,label:"Cancel"},prompt:{model:"",type:"text"}}).onOk(o=>{r.new_patch_value=o;const a={ok:r.createpatchcallback,error:function(u){j.create({color:"negative",message:"Create patch failed "+u.response.data.message,timeout:2e3})}},t={patch_name:o};this.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/me/patches",method:"POST",data:t,callback:a})})}},createpatchcallback(e){this.backend_connection_store.update_user_profile({user_profile:e.data.user_profile,then:this.createpatchcallback2})},createpatchcallback2(){const e=this;this.patch=this.patch_list.filter(function(r){return r.name===e.new_patch_value})[0],this.new_patch_value=""},isEmpty(e){return e==null?!0:e.length==0},copy_text(e){const r={ok:function(o){j.create({color:"bg-grey-2",message:"Copied to clipboard",timeout:2e3})},error:function(o){j.create({color:"negative",message:"Copy failed",timeout:2e3})}};Qe.copyTextToClipboard2(e,r)}}}),fa=s("div",{class:"text-h6"},"Basic Information",-1),ma=s("div",{class:"text-subtitle2"},"Basic information about this project",-1),pa={key:0},ga={key:1,class:"brrcalc-dealbasicinfo-patch"},va=s("div",{class:"text-h6"},"Weblinks",-1),wa=s("div",null,"Deal Source",-1);function ba(e,r,o,a,t,u){const i=p("Weblinks");return e.security_role_cansave?(d(),S(D,{key:0,inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:c(()=>[n($,null,{default:c(()=>[fa,ma]),_:1}),n($,null,{default:c(()=>[e.ever_saved?y("",!0):(d(),w("div",pa,[n(de,{modelValue:e.patch,"onUpdate:modelValue":[r[0]||(r[0]=l=>e.patch=l),e.select_patch],options:e.patch_list,label:"Patch","emit-value":"","option-label":"name"},null,8,["modelValue","options","onUpdate:modelValue"])])),e.ever_saved?(d(),w("div",ga,[v(" Patch: "),n(C,{flat:"",onClick:r[1]||(r[1]=l=>e.$emit("navigate_away",{dest:"/tools/cansave/patches/"+e.patch.id}))},{default:c(()=>[v(_(e.patch.name),1)]),_:1})])):y("",!0),s("div",null,[n(P,{filled:"",clearable:"",modelValue:e.address,"onUpdate:modelValue":r[2]||(r[2]=l=>e.address=l),label:"Address"},null,8,["modelValue"])]),s("div",null,[n(P,{filled:"",clearable:"",modelValue:e.postcode,"onUpdate:modelValue":r[4]||(r[4]=l=>e.postcode=l),label:"Postcode"},{append:c(()=>[e.isEmpty(e.postcode)?y("",!0):(d(),S(_e,{key:0,class:"q-field__focusable-action",name:"content_copy",onClick:r[3]||(r[3]=l=>e.copy_text(e.postcode))}))]),_:1},8,["modelValue"])])]),_:1}),n(Q,{class:"basic-info-seperator"}),n($,null,{default:c(()=>[s("div",null,[va,n(i,{ref:"Weblinks",weblinks:e.weblinks,onUpdateweblinks:e.updateweblinks},null,8,["weblinks","onUpdateweblinks"])]),n(Q,{class:"basic-info-seperator"}),s("div",null,[n(P,{filled:"",clearable:"",modelValue:e.selling_agent,"onUpdate:modelValue":r[5]||(r[5]=l=>e.selling_agent=l),label:"Selling Agent"},null,8,["modelValue"])]),n(Q,{class:"basic-info-seperator"}),s("div",null,[n(P,{filled:"",autogrow:"",modelValue:e.notes,"onUpdate:modelValue":r[6]||(r[6]=l=>e.notes=l),label:"Notes"},null,8,["modelValue"])]),n(Q,{class:"basic-info-seperator"}),wa,s("div",null,[n(L,{modelValue:e.deal_source_local_only.self_check_box,"onUpdate:modelValue":[r[7]||(r[7]=l=>e.deal_source_local_only.self_check_box=l),e.updatedealsource],label:"Self sourced"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[n(P,{filled:"",autogrow:"",modelValue:e.deal_source_local_only.value,"onUpdate:modelValue":[r[8]||(r[8]=l=>e.deal_source_local_only.value=l),e.updatedealsource],label:"Name of source",disable:e.deal_source_local_only.self_check_box},null,8,["modelValue","disable","onUpdate:modelValue"])])]),_:1})]),_:1})):y("",!0)}var ya=T(ha,[["render",ba]]);function Sa(e,r,o){const a=[];a.push({range:"Main!A1",values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),a.push({range:"Main!A2:B2",values:[["Patch:",r.patch.name]]}),a.push({range:"Main!A3:B3",values:[["Address:",r.serialized_data.dealbasicinfo.address]]}),a.push({range:"Main!E3:E3",values:[[r.serialized_data.dealbasicinfo.postcode]]}),a.push({range:"Main!A4:A4",values:[["Links:"]]});let t=3;return r.serialized_data.dealbasicinfo.weblinks.forEach(function(u){t=t+1,a.push({range:"Main!B"+t.toString()+":B"+t.toString(),values:[['=HYPERLINK("'+u.label+'", "'+u.label+'")']]})}),t=t+1,t=t+1,a.push({range:"Main!A"+t.toString()+":B"+t.toString(),values:[["Selling Agent:",r.serialized_data.dealbasicinfo.selling_agent]]}),t=t+1,a.push({range:"Main!A"+t.toString()+":B"+t.toString(),values:[["Notes:",r.serialized_data.dealbasicinfo.notes]]}),t=t+1,a.push({range:"Main!A"+t.toString()+":B"+t.toString(),values:[["Vision:",r.serialized_data.vision.devplan]]}),t=t+1,t=t+1,a.push({range:"Main!A"+t.toString()+":A"+t.toString(),values:[["Caculations provided here are for reference only and should be manually checked."]]}),a}function $a(e,r,o){const a=[];return a.push({repeatCell:{range:{sheetId:o.Main,startRowIndex:0,endRowIndex:r.serialized_data.dealbasicinfo.weblinks.length+6+1,startColumnIndex:0,endColumnIndex:1},cell:{userEnteredFormat:{textFormat:{bold:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}),a}var le={get_sheet_main_values:Sa,get_sheet_main:$a};function ka(e){function r(o,a,t,u,i){return{repeatCell:{range:{sheetId:e,startRowIndex:o,endRowIndex:a,startColumnIndex:t,endColumnIndex:u},cell:{userEnteredFormat:{numberFormat:{type:"NUMBER",pattern:i}}},fields:"userEnteredFormat.numberFormat"}}}return{makeboldandvaligntop:function(o,a,t,u){return{repeatCell:{range:{sheetId:e,startRowIndex:o,endRowIndex:a,startColumnIndex:t,endColumnIndex:u},cell:{userEnteredFormat:{textFormat:{bold:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}},makeitalicandvaligntop:function(o,a,t,u){return{repeatCell:{range:{sheetId:e,startRowIndex:o,endRowIndex:a,startColumnIndex:t,endColumnIndex:u},cell:{userEnteredFormat:{textFormat:{italic:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}},makeboldandvaligntopandsetfontsize:function(o,a,t,u,i){return{repeatCell:{range:{sheetId:e,startRowIndex:o,endRowIndex:a,startColumnIndex:t,endColumnIndex:u},cell:{userEnteredFormat:{textFormat:{fontSize:i,bold:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}},formatnumbermisc:function(o,a,t,u,i){return r(o,a,t,u,i)},formatcurrency:function(o,a,t,u){return r(o,a,t,u,"[$\xA3-809]#,##0.00")},formatpercentage:function(o,a,t,u){return r(o,a,t,u,"0.00%")},adjustcolumnwidth:function(o,a){return{updateDimensionProperties:{range:{sheetId:e,dimension:"COLUMNS",startIndex:o,endIndex:o+1},properties:{pixelSize:a},fields:"pixelSize"}}}}}var W={get_sheet_utils:ka};const g="Purchase Phase",pe="Bridge Amount";function Ca(e,r,o){return{name:"Buying Cash",pre_stage:function(a){},start_details:function(a){return[["Purchase Price",r.serialized_data.purchaseprice.purchaserangevalue.max,r.serialized_data.purchaseprice.purchaserangevalue.min]]},end_details:function(a){return[]}}}function qa(e,r,o){return{name:"Buying with a Mortgage",pre_stage:function(a,t){const u=[],i=a.cur_row;a.cur_row=a.cur_row+1,a.value_requests.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["","Worst","Best"]]}),a.requests.push(t.makeboldandvaligntop(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Purchase Price",r.serialized_data.purchaseprice.purchaserangevalue.max,r.serialized_data.purchaseprice.purchaserangevalue.min]]}),a.requests.push(t.formatcurrency(i,a.cur_row,1,3)),a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Mortage Rate",r.serialized_data.finance.mortgage.rate.max/100,r.serialized_data.finance.mortgage.rate.min/100]]}),a.requests.push(t.formatpercentage(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Mortgage LTV",r.serialized_data.finance.mortgage.ltv.max/100,r.serialized_data.finance.mortgage.ltv.min/100]]}),a.requests.push(t.formatpercentage(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Total Mortgage","=B"+(i+2).toString()+"*B"+(a.cur_row-1).toString(),"=C"+(i+2).toString()+"*C"+(a.cur_row-1).toString()]]}),a.requests.push(t.formatcurrency(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Monthly Payments","=(B"+(a.cur_row-1).toString()+"*B"+(i+3).toString()+")/12","=(C"+(a.cur_row-1).toString()+"*C"+(i+3).toString()+")/12"]]}),a.requests.push(t.formatcurrency(a.cur_row-1,a.cur_row,1,3)),a.misc_data.monthly_payments_row=a.cur_row,a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Deposit","=B"+(i+2).toString()+"-B"+(a.cur_row-2).toString(),"=C"+(i+2).toString()+"-C"+(a.cur_row-2).toString()]]}),a.requests.push(t.formatcurrency(a.cur_row-1,a.cur_row,1,3)),a.misc_data.deposit_row=a.cur_row,a.cur_row=a.cur_row+1,u.push({range:g+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Refurb Duration Months",r.serialized_data.refurbcost.refurbtimerange.max,r.serialized_data.refurbcost.refurbtimerange.min]]}),a.requests.push(t.formatnumbermisc(a.cur_row-1,a.cur_row,1,3,"0")),a.misc_data.refurb_duration_row=a.cur_row,a.requests.push(t.makeboldandvaligntop(i,a.cur_row,0,1)),a.cur_row=a.cur_row+1,a.value_requests.push(u)},start_details:function(a){return[["Deposit","=B"+a.misc_data.deposit_row.toString(),"=C"+a.misc_data.deposit_row.toString()],["Mortgage Arangement",r.serialized_data.finance.mortgage.arrangementfee,r.serialized_data.finance.mortgage.arrangementfee]]},end_details:function(a){return[["Mortgage Payments","=B"+a.misc_data.monthly_payments_row.toString()+"*B"+a.misc_data.refurb_duration_row.toString(),"=C"+a.misc_data.monthly_payments_row.toString()+"*C"+a.misc_data.refurb_duration_row.toString()],["(During refurbishment)","",""]]}}}function Ta(e,r,o){return{name:"Buying with a Bridge",pre_stage:function(a){},start_details:function(a){return[["Purchase Price",r.serialized_data.purchaseprice.purchaserangevalue.max,r.serialized_data.purchaseprice.purchaserangevalue.min]]},end_details:function(a){return[["Bridge Costs",r.finance_bridgecost.worst,r.finance_bridgecost.best],[pe,r.finance_bridgeamount.worst*-1,r.finance_bridgeamount.best*-1]]}}}function Aa(e,r,o){return r.serialized_data.finance.mortgage.usemortgage?qa(e,r):r.serialized_data.finance.bridge.usebridge?Ta(e,r):Ca(e,r)}function Ba(e,r,o){const a=W.get_sheet_utils(o[g]);let t={cur_row:0,requests:[],value_requests:[],misc_data:{}};t.requests.push(a.adjustcolumnwidth(0,170)),t.cur_row=t.cur_row+1,t.value_requests.push({range:g+"!A"+t.cur_row.toString(),values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:g+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Patch:",r.patch.name]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:g+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Address:",r.serialized_data.dealbasicinfo.address]]}),t.value_requests.push({range:g+"!E"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[[r.serialized_data.dealbasicinfo.postcode]]}),t.requests.push(a.makeboldandvaligntop(0,t.cur_row,0,1)),t.cur_row=t.cur_row+1;const u=Aa(e,r);t.cur_row=t.cur_row+1,t.value_requests.push({range:g+"!A"+t.cur_row.toString()+":A"+t.cur_row.toString(),values:[[u.name]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,1)),u.pre_stage(t,a),t.cur_row=t.cur_row+1,t.value_requests.push({range:g+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["","Worst","Best"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,1,3));const i=t.cur_row;let l=u.start_details(t);l.push(["Refurbishment",r.refurb_cost_total.max,r.refurb_cost_total.min]),l.push(["Stamp Duty",r.stampduty_total.max,r.stampduty_total.min]),r.othercosts_items_detail.forEach(function(f){l.push([f.name,-1*f.worst,-1*f.best])}),r.caculated_loan_details.forEach(function(f){l.push([f.name,f.amount*-1,f.amount*-1]),l.push([f.name+" interest",f.interest,f.interest])}),l=l.concat(u.end_details(t));let h={};l.forEach(function(f){t.cur_row=t.cur_row+1,h[f[0]]=t.cur_row,t.value_requests.push({range:g+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[[f[0],f[1],f[2]]]}),f[0]==="(During refurbishment)"?t.requests.push(a.makeitalicandvaligntop(t.cur_row-1,t.cur_row,0,1)):t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,1))}),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1;const m=t.cur_row;return t.value_requests.push({range:g+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Total Money needed","=SUM(B"+(i+1).toString()+":B"+(t.cur_row-1).toString()+")","=SUM(C"+(i+1).toString()+":C"+(t.cur_row-1).toString()+")"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,3)),t.requests.push(a.formatcurrency(i,t.cur_row,1,3)),r.serialized_data.refinance.refinance_userefinance&&Ra(t,a,r,m,h),{value_requests:t.value_requests,requests:t.requests}}function Ra(e,r,o,a,t){e.cur_row=e.cur_row+1,e.cur_row=e.cur_row+1,e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":B"+e.cur_row.toString(),values:[["Refinance"]]}),e.requests.push(r.makeboldandvaligntop(e.cur_row-1,e.cur_row,0,1)),e.cur_row=e.cur_row+1;const u=e.cur_row;e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["GDV",o.gdv_total.min,o.gdv_total.max]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3)),e.cur_row=e.cur_row+1;const i=e.cur_row;e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Refinance LTV",o.serialized_data.refinance.refinance_userefinance_ltv.min/100,o.serialized_data.refinance.refinance_userefinance_ltv.max/100]]}),e.requests.push(r.formatpercentage(e.cur_row-1,e.cur_row,1,3)),e.cur_row=e.cur_row+1,e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Refinance Rate",o.serialized_data.refinance.refinance_userefinance_rate.min/100,o.serialized_data.refinance.refinance_userefinance_rate.max/100]]}),e.requests.push(r.formatpercentage(e.cur_row-1,e.cur_row,1,3)),e.cur_row=e.cur_row+1;const l=e.cur_row;e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Refinance mortgage total","=B"+u.toString()+"*B"+i.toString(),"=C"+u.toString()+"*C"+i.toString()]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3));let h,m;function f(){typeof h=="undefined"&&(h=e.cur_row),m=e.cur_row}if(o.serialized_data.finance.bridge.usebridge){const k=t[pe];e.cur_row=e.cur_row+1,f(),e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Pay back bridge","=B"+k.toString()+" * -1","=C"+k.toString()+" * -1"]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3))}o.refinance_costs.forEach(function(k){e.cur_row=e.cur_row+1,f(),e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[[k.name,k.worst*-1,k.best*-1]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3))}),o.caculated_loan_details.forEach(function(k){e.cur_row=e.cur_row+1,f(),e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Pay back "+k.name,k.amount,k.amount]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3))}),e.cur_row=e.cur_row+1;const B=e.cur_row;e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Total after deductions","=B"+l.toString()+"-sum(B"+h.toString()+":B"+m.toString()+")","=C"+l.toString()+"-sum(C"+h.toString()+":C"+m.toString()+")"]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3)),e.requests.push(r.makeboldandvaligntop(e.cur_row-1,e.cur_row,0,3)),e.cur_row=e.cur_row+1;const I=e.cur_row;e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Original Money in","=B"+a.toString(),"=C"+a.toString()]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3)),e.requests.push(r.makeboldandvaligntop(e.cur_row-1,e.cur_row,0,3)),e.cur_row=e.cur_row+1,e.value_requests.push({range:g+"!A"+e.cur_row.toString()+":C"+e.cur_row.toString(),values:[["Amount Left in the deal","=B"+I.toString()+"-B"+B.toString(),"=C"+I.toString()+"-C"+B.toString()]]}),e.requests.push(r.formatcurrency(e.cur_row-1,e.cur_row,1,3)),e.requests.push(r.makeboldandvaligntop(e.cur_row-1,e.cur_row,0,3))}var Pa={sheet_name:g,get_sheet_values:Ba};const V="GDV Comparables";function Da(e,r,o){const a=W.get_sheet_utils(o[V]);let t={cur_row:0,requests:[],value_requests:[],misc_data:{}};const u=[120,246,100,74,100,100,47,100,100,100,145,100,198];let i=0;for(;i<u.length;)t.requests.push(a.adjustcolumnwidth(i,u[i])),i++;t.cur_row=t.cur_row+1,t.value_requests.push({range:V+"!A"+t.cur_row.toString(),values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:V+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Patch:",r.patch.name]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:V+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Address:",r.serialized_data.dealbasicinfo.address]]}),t.value_requests.push({range:V+"!E"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[[r.serialized_data.dealbasicinfo.postcode]]}),t.cur_row=t.cur_row+1,["EPC Floorspace:","Type:","Condition:","Sold History"].forEach(function(B){t.value_requests.push({range:V+"!A"+t.cur_row.toString()+":A"+t.cur_row.toString(),values:[[B]]}),t.cur_row=t.cur_row+1}),t.requests.push(a.makeboldandvaligntop(0,t.cur_row-1,0,1)),t.cur_row=t.cur_row+6,t.value_requests.push({range:V+"!A"+t.cur_row.toString()+":M"+t.cur_row.toString(),values:[["Source","Address","Type","Price type","Amount","Date","SQM","price per sqm","Condition","Value of ours","Distance","Place","Notes"]]}),t.cur_row=t.cur_row+1,t.requests.push(a.makeboldandvaligntop(t.cur_row-2,t.cur_row-1,0,13));const h=t.cur_row;let m=0;for(;m<15;)t.value_requests.push({range:V+"!A"+t.cur_row.toString()+":M"+t.cur_row.toString(),values:[["","","","SOLD","","","","=E"+t.cur_row.toString()+"/G"+t.cur_row.toString(),"","=H"+t.cur_row.toString()+"*$B$4","","",""]]}),t.cur_row=t.cur_row+1,m++;const f=t.cur_row;return t.requests.push(a.formatcurrency(h-1,f-1,4,5)),t.requests.push(a.formatcurrency(h-1,f-1,7,8)),t.requests.push(a.formatcurrency(h-1,f-1,9,10)),{value_requests:t.value_requests,requests:t.requests}}var Ia={sheet_name:V,get_sheet_values:Da};function Va(e,r,o,a,t){e.cur_row=e.cur_row+1,e.value_requests.push({range:r+"!A"+e.cur_row.toString(),values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),e.cur_row=e.cur_row+1,e.value_requests.push({range:r+"!A"+e.cur_row.toString(),values:[[t]]}),e.cur_row=e.cur_row+1,e.value_requests.push({range:r+"!A"+e.cur_row.toString()+":B"+e.cur_row.toString(),values:[["Patch:",o.patch.name]]}),e.cur_row=e.cur_row+1,e.value_requests.push({range:r+"!A"+e.cur_row.toString()+":B"+e.cur_row.toString(),values:[["Address:",o.serialized_data.dealbasicinfo.address]]}),e.requests.push(a.makeboldandvaligntop(0,e.cur_row,0,1)),e.cur_row=e.cur_row+1}var ge={header:Va};const b="HMO Monthly Profit Estimate";function za(e,r,o){const a=W.get_sheet_utils(o[b]);let t={cur_row:0,requests:[],value_requests:[],misc_data:{}};const u=[100,100,100,100,30];let i=0;for(;i<u.length;)t.requests.push(a.adjustcolumnwidth(i,u[i])),i++;ge.header(t,b,r,a,"Comparison of HMO income vs running costs"),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":A"+t.cur_row.toString(),values:[["Monthly Caculation"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":F"+t.cur_row.toString(),values:[["Option 1","","","","","Option 2"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":I"+t.cur_row.toString(),values:[["Room","Num","Monthly Rate","Total","","Room","Num","Monthly Rate","Total"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,9));const l=[["Ensuite","-1","550"],["Non-ensuite","-1","500"],["","",""],["","",""],["","",""],["","",""],["","",""],["","",""]],h=t.cur_row;l.forEach(function(k){t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":I"+t.cur_row.toString(),values:[[k[0],k[1],k[2],"=B"+t.cur_row.toString()+"*C"+t.cur_row.toString(),"",k[0],k[1],k[2],"=G"+t.cur_row.toString()+"*H"+t.cur_row.toString()]]})}),t.cur_row=t.cur_row+1;const m=t.cur_row;t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":I"+t.cur_row.toString(),values:[["Total","=sum(B"+(h+1).toString()+":B"+(t.cur_row-1).toString()+")","","=sum(D"+(h+1).toString()+":D"+(t.cur_row-1).toString()+")","","Total","=sum(G"+(h+1).toString()+":G"+(t.cur_row-1).toString()+")","","=sum(I"+(h+1).toString()+":I"+(t.cur_row-1).toString()+")"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,9)),t.requests.push(a.formatcurrency(h-1,t.cur_row,2,4)),t.requests.push(a.formatcurrency(h-1,t.cur_row,7,9)),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1;const f=t.cur_row;t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Used Figure","=D"+m.toString(),"(Select the total of the option above to use for the profit caculation)"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,2)),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":A"+t.cur_row.toString(),values:[["Monthly Costs"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,1)),t.cur_row=t.cur_row+1;const B=t.cur_row;t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Management","=B"+f.toString()+"*0.15","(assumed 15%)"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Maintainance","=B"+f.toString()+"*0.1","(10%)"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":D"+t.cur_row.toString(),values:[["Council tax","=1370.41/12","TODO VERIFY","(Put Band and link to local authority council tax page here as a note)"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Gas","155","TODO VERIFY"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Electric","120","TODO VERIFY"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Water","40","TODO VERIFY"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Internet","40","TODO VERIFY"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Building insurance","60","TODO VERIFY"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Company insurance",""]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["Company account",""]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":C"+t.cur_row.toString(),values:[["TV Licence","14.13","TODO VERIFY"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":D"+t.cur_row.toString(),values:[["HMO Licence","16.25","TODO VERIFY","(Place link to council HMO licencing page here)"]]}),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1;const I=t.cur_row;return t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Monthly Spend","=sum(B"+B.toString()+":B"+(t.cur_row-1).toString()+")"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,2)),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1,t.value_requests.push({range:b+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Monthly Profit","=B"+f.toString()+"-B"+I.toString()]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,2)),t.requests.push(a.formatcurrency(B-1,t.cur_row,1,2)),{value_requests:t.value_requests,requests:t.requests}}var ja={sheet_name:b,get_sheet_values:za};const E="HMO Room Sizes";function Ma(e,r,o){const a=W.get_sheet_utils(o[E]);let t={cur_row:0,requests:[],value_requests:[],misc_data:{}};const u=[130,100,58,58,100,200,200];let i=0;for(;i<u.length;)t.requests.push(a.adjustcolumnwidth(i,u[i])),i++;ge.header(t,E,r,a,"List of room sizes to check against licence standards"),t.cur_row=t.cur_row+1,t.value_requests.push({range:E+"!A"+t.cur_row.toString()+":A"+t.cur_row.toString(),values:[["Total area (sqm)"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,1)),t.cur_row=t.cur_row+1;const l=t.cur_row;return t.value_requests.push({range:E+"!A"+t.cur_row.toString()+":G"+t.cur_row.toString(),values:[["Level","Room on plan","x","y","sqm","Reconfig Use","Notes"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,7)),[["Ground","Kitchen","-1","-1"],["Ground","Dinning Room","-1","-1"],["Bedroom","Dinning Room","-1","-1"],["","","2",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""]].forEach(function(m){t.cur_row=t.cur_row+1,t.value_requests.push({range:E+"!A"+t.cur_row.toString()+":G"+t.cur_row.toString(),values:[[m[0],m[1],m[2],m[3],"=C"+t.cur_row.toString()+"*D"+t.cur_row.toString(),"",""]]})}),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1,t.value_requests.push({range:E+"!A"+t.cur_row.toString()+":G"+t.cur_row.toString(),values:[["","","","Total","=sum(E"+(l+1).toString()+":E"+(t.cur_row-1).toString()+")","",""]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,7)),{value_requests:t.value_requests,requests:t.requests}}var Ea={sheet_name:E,get_sheet_values:Ma};const A="Refurb Cost",ue=["Clear out (Skips)?","Windows?","Electric?","Boiler?","Fire Doors?","Fire alarm system?","Roof?","Decorate?","EPC Works?"],Oa=25;function Fa(e,r,o){const a=W.get_sheet_utils(o[A]);let t={cur_row:0,requests:[],value_requests:[],misc_data:{}};t.requests.push(a.adjustcolumnwidth(0,115)),t.requests.push(a.adjustcolumnwidth(1,149)),t.requests.push(a.adjustcolumnwidth(2,182)),t.requests.push(a.adjustcolumnwidth(3,110)),t.requests.push(a.adjustcolumnwidth(4,110)),t.cur_row=t.cur_row+1,t.value_requests.push({range:A+"!A"+t.cur_row.toString(),values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Patch:",r.patch.name]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":B"+t.cur_row.toString(),values:[["Address:",r.serialized_data.dealbasicinfo.address]]}),t.value_requests.push({range:A+"!E"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[[r.serialized_data.dealbasicinfo.postcode]]}),t.requests.push(a.makeboldandvaligntop(0,t.cur_row,0,1)),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1;const u=t.cur_row;t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["Room","Item","Description","Labour","Materials"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,0,5));let i=0;for(;i<Oa;)t.cur_row=t.cur_row+1,i<ue.length&&t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["",ue[i],"","",""]]}),i++;t.cur_row=t.cur_row+1;const l=t.cur_row;t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["","","Total","=sum(D"+(u+1).toString()+":D"+(t.cur_row-1).toString()+")","=sum(E"+(u+1).toString()+":E"+(t.cur_row-1).toString()+")"]]}),t.requests.push(a.makeboldandvaligntop(t.cur_row-1,t.cur_row,2,5)),t.requests.push(a.formatcurrency(u,t.cur_row,3,5)),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1;const h=t.cur_row;t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["","","","Gross Total","=sum(D"+l.toString()+":E"+l.toString()+")"]]}),t.cur_row=t.cur_row+1;const m=t.cur_row;return t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["","","","Contingency","=E"+h.toString()+"*0.1"]]}),t.cur_row=t.cur_row+1,t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["","","","VAT","=sum(E"+h.toString()+":E"+m.toString()+")*0.2"]]}),t.cur_row=t.cur_row+1,t.cur_row=t.cur_row+1,t.value_requests.push({range:A+"!A"+t.cur_row.toString()+":E"+t.cur_row.toString(),values:[["","","","Net Total","=sum(E"+h.toString()+":E"+(t.cur_row-22).toString()+")"]]}),t.requests.push(a.makeboldandvaligntopandsetfontsize(t.cur_row-1,t.cur_row,3,5,13)),t.requests.push(a.formatcurrency(h,t.cur_row,4,5)),{value_requests:t.value_requests,requests:t.requests}}var Ua={sheet_name:A,get_sheet_values:Fa};const Na=q({name:"SaveToGoogleSheetCompoennt",emits:["apiaddweblink","activity_log"],props:["serialized_data","patch","refurb_cost_total","stampduty_total","othercosts_items_detail","caculated_loan_details","finance_bridgecost","finance_bridgeamount","gdv_total","refinance_costs"],setup(){return{backend_connection_store:H()}},data(){return{}},computed:{security_role_cansave(){return this.backend_connection_store.security_role_cansave}},methods:{click_export(){K.show();const e=google.accounts.oauth2.initTokenClient({client_id:this.$rjmgclientid,scope:this.$rjmgscopes,callback:this.execute_export});gapi.client.getToken()===null?e.requestAccessToken({prompt:"consent"}):e.requestAccessToken({prompt:""})},execute_export(){try{gapi.client.sheets.spreadsheets.create({properties:{title:"evernetproperties.com-"+this.patch.name+"-"+this.serialized_data.dealbasicinfo.address}}).then(e=>{this.spreadsheets_batchupdate(e.result)})}catch(e){this.sheet_api_error_handler(e);return}},spreadsheets_batchupdate(e){let r={Main:e.sheets[0].properties.sheetId},o=[];o.push({updateSheetProperties:{properties:{sheetId:e.sheets[0].properties.sheetId,title:"Main"},fields:"title"}});let a=[Pa,Ia];typeof this.serialized_data.vision.strategy!="undefined"&&this.serialized_data.vision.strategy.hmo&&(a.push(ja),a.push(Ea)),a.push(Ua);let t=0;for(;t<a.length;)o.push({addSheet:{properties:{title:a[t].sheet_name}}}),t++;o=o.concat(le.get_sheet_main(e,this,r));const u={requests:o};try{gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.spreadsheetId,resource:u}).then(i=>{const l=i.result;console.log("spreadsheet Batch Update result",i.result.replies),i.result.replies.forEach(function(h){if(typeof h.addSheet!="undefined"){let m=0;for(;m<a.length;)h.addSheet.properties.title===a[m].sheet_name&&(r[a[m].sheet_name]=h.addSheet.properties.sheetId),m++}}),this.spreadsheets_batchupdate_after_all_sheets_added(e,r,a)})}catch(i){this.sheet_api_error_handler(i);return}},spreadsheets_batchupdate_after_all_sheets_added(e,r,o){let a=[],t=[];t=t.concat(le.get_sheet_main_values(e,this,r));let u=0;for(;u<o.length;){let l=o[u].get_sheet_values(e,this,r);a=a.concat(l.requests),t=t.concat(l.value_requests),u++}if(a.length===0){console.log("No requests required"),this.spreadsheets_values_batchupdate(e,r,t);return}const i={requests:a};try{gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.spreadsheetId,resource:i}).then(l=>{const h=l.result;console.log("spreadsheet Batch Update after all sheets added result",l.result.replies),this.spreadsheets_values_batchupdate(e,r,t)})}catch(l){this.sheet_api_error_handler(l);return}},spreadsheets_values_batchupdate(e,r,o){const a={data:o,valueInputOption:"USER_ENTERED"};try{gapi.client.sheets.spreadsheets.values.batchUpdate({spreadsheetId:e.spreadsheetId,resource:a}).then(t=>{const u=t.result;console.log(`${u.totalUpdatedCells} cells updated.`),this.sheet_final_complete(e)})}catch(t){this.sheet_api_error_handler(t);return}},open_sheet(e){window.open(e.spreadsheetUrl,"_blank").focus()},sheet_api_error_handler(e){K.hide(),console.log("Error-"+e.message),j.create({color:"negative",message:"Export to google sheets failed "+e.message,timeout:2e3})},sheet_final_complete(e){this.$emit("apiaddweblink",{url:e.spreadsheetUrl,displaytext:"My Calc"});const r={type:"admin",text:"Generated google sheet",head_notes:"Calculation"};this.$emit("activity_log",r),this.open_sheet(e),K.hide()}}}),Ga=s("div",{class:"text-h6"},"Export to Spreadsheet",-1),La=s("div",{class:"text-subtitle2"},"Export figures into a google docs spreadsheet.",-1),Wa=s("div",{class:"textdiv"}," This feature will generate a spreadsheet containing all the current values for this project and output it to a document in your google drive. ",-1);function Qa(e,r,o,a,t,u){return e.security_role_cansave?(d(),S(D,{key:0,inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:c(()=>[n($,null,{default:c(()=>[Ga,La]),_:1}),n($,null,{default:c(()=>[s("div",null,[n(C,{color:"primary",icon:"save",label:"Export to google sheets",onClick:e.click_export},null,8,["onClick"])]),Wa]),_:1})]),_:1})):y("",!0)}var Ha=T(Na,[["render",Qa]]);const Ya=q({name:"BrrCalcTodos",components:{TodoItem:Xe},setup(){return{backend_connection_store:H()}},data(){return{todos:[]}},computed:{todo_groups(){let e={"":!0};return this.todos.forEach(function(r){e[r.group]=!0}),e},done_todos(){return this.todos.filter(function(e){return e.done===!0})}},methods:{due_todos(e){return this.todos.filter(function(r){return r.group===e&&r.done===!1&&r.due===!0})},notdone_todos(e){return this.todos.filter(function(r){return r.group===e&&r.done===!1&&r.due===!1})},serializer_load_data(e){this.todos=e},add_single_todo(e){this.todos.push(e)},update_todo_item(e){const r=this;r.todos=r.todos.map(function(o){return o.id==e.id&&(o=e),o})},delete_todo_item(e){const r=this;r.todos=r.todos.filter(function(o){return o.id!==e})}}}),Ka={class:"text-h6 todos-card-head"},Ja={style:{width:"100%","max-width":"400px"}},Xa={key:0},Za={key:0,class:"todos-grouptitle"},xa=s("div",null,"Completed Items",-1);function es(e,r,o,a,t,u){const i=p("TodoItem");return d(),w("div",null,[n(D,{inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:c(()=>[n($,null,{default:c(()=>[s("div",Ka,[n(_e,{name:"rule",size:"30px"}),v(" Todo Items")]),s("div",Ja,[(d(!0),w(U,null,N(Object.keys(e.todo_groups),l=>(d(),w("div",{key:l},[e.due_todos(l).length+e.notdone_todos(l).length>0?(d(),w("div",Xa,[l!==""?(d(),w("div",Za,_(l),1)):y("",!0),s("div",null,[(d(!0),w(U,null,N(e.due_todos(l),h=>(d(),w("div",{key:h.id},[n(i,{todo:h,onUpdate_todo_item:e.update_todo_item,onDelete_todo_item:e.delete_todo_item},null,8,["todo","onUpdate_todo_item","onDelete_todo_item"])]))),128)),(d(!0),w(U,null,N(e.notdone_todos(l),h=>(d(),w("div",{key:h.id},[n(i,{todo:h,onUpdate_todo_item:e.update_todo_item,onDelete_todo_item:e.delete_todo_item},null,8,["todo","onUpdate_todo_item","onDelete_todo_item"])]))),128))])])):y("",!0)]))),128)),s("div",null,[xa,(d(!0),w(U,null,N(e.done_todos,l=>(d(),w("div",{key:l.id},[n(i,{todo:l,onUpdate_todo_item:e.update_todo_item,onDelete_todo_item:e.delete_todo_item},null,8,["todo","onUpdate_todo_item","onDelete_todo_item"])]))),128))])])]),_:1})]),_:1})])}var ts=T(Ya,[["render",es]]);const rs=q({name:"CalcBrrToFlip",components:{GdvCard:Me,PurchasePrice:Ee,RefurbCost:Oe,StampDuty:Fe,OtherCosts:Ue,DealSummary:Qt,Finance:Ne,Vision:Pt,DealRating:da,Refinance:Ft,DealBasicInfo:ya,ProjectSerializer:Ye,SaveToGoogleSheet:Ha,ActivityLog:Ke,BrrToolbar:Ct,Workflow:Je,FlipDealRating:Ge,Todos:ts},setup(){return{backend_connection_store:H()}},data(){return{tab:"main",isMounted:!1,purchaserange:{min:18e4,max:19e4},loaded_project_id:""}},computed:{project_type(){return he.project_type_constants.project_type_purchase},is_saved_project_with_id(){return this.loaded_project_id!==""},ever_saved(){return this.isMounted?this.security_role_cansave?this.$refs.BrrToolbar.ever_saved:(console.log("WARNING ever_saved checked when cansave is false"),!1):!1},reason_project_not_savable(){return this.isMounted?this.$refs.DealBasicInfo.reason_project_not_savable:""},security_role_cansave(){return this.backend_connection_store.security_role_cansave},is_valid_input(){return this.isMounted?!(!this.$refs.PurchasePrice.isValid||!this.$refs.GdvCard.isValid):!0},deal_summary_final_bal(){return this.isMounted?this.$refs.DealSummary.final_bal:{best:0,worst:0}},finance_refinance(){return this.isMounted?this.$refs.Refinance.get_refinance:{userefinance:!1,ltv:{min:75,max:75}}},caculated_loan_details(){return this.isMounted?this.$refs.Finance.caculated_loan_details:[]},finance_bridgecost(){return this.isMounted?this.$refs.Finance.bridgecost:{best:0,worst:0}},finance_bridgeamount(){return this.isMounted?this.$refs.Finance.bridgeamount:{best:0,worst:0}},finance_totalmoneyneeded(){return this.isMounted?this.$refs.Finance.totalmoneyneeded:{best:0,worst:0}},finance_in_items(){return this.isMounted?this.$refs.Finance.finance_in_items:[]},finance_in_items_without_cash(){return this.isMounted?this.$refs.Finance.finance_in_items_without_cash:[]},finance_during_items(){return this.isMounted?this.$refs.Finance.finance_during_items:[]},finance_out_items(){return this.isMounted?this.$refs.Finance.finance_out_items:[]},refinance_out_items(){return this.isMounted?this.$refs.Refinance.refinance_out_items:[]},refinance_costs(){return this.isMounted?this.$refs.Refinance.refinance_costs:[]},purchase_items(){return this.isMounted?this.$refs.PurchasePrice.purchase_items:[]},stampduty_items(){return this.isMounted?this.$refs.StampDuty.stampduty_items:[]},othercosts_items(){return this.isMounted?this.$refs.OtherCosts.othercosts_items:[]},othercosts_items_detail(){return this.isMounted?this.$refs.OtherCosts.othercosts_items_detail:[]},refurb_cost_items(){return this.isMounted?this.$refs.RefurbCost.refurb_cost_items:[]},refurb_cost_total(){return this.isMounted?this.$refs.RefurbCost.refurb_cost_total:[]},refurbmonths(){return this.isMounted?this.$refs.RefurbCost.refurbmonths:[]},stampduty_total(){return this.isMounted?this.$refs.StampDuty.stampduty:[]},othercosts_total(){return this.isMounted?this.$refs.OtherCosts.total:[]},gdv_total(){return this.isMounted?this.$refs.GdvCard.total:[]},serialized_data(){return this.security_role_cansave?this.isMounted?{dealbasicinfo:this.$refs.DealBasicInfo.serializer_card_data,vision:this.$refs.Vision.serializer_card_data,gdvcard:this.$refs.GdvCard.serializer_card_data,purchaseprice:this.$refs.PurchasePrice.serializer_card_data,refurbcost:this.$refs.RefurbCost.serializer_card_data,stampduty:this.$refs.StampDuty.serializer_card_data,othercosts:this.$refs.OtherCosts.serializer_card_data,finance:this.$refs.Finance.serializer_card_data,refinance:this.$refs.Refinance.serializer_card_data}:{}:(console.log("WARNING serialized_data checked when cansave is false"),{})},patch(){return this.isMounted?this.security_role_cansave?this.$refs.DealBasicInfo.patch:(console.log("WARNING patch method called when cansave is false"),{id:"notset",name:"Not Set"}):{id:"notset",name:"Not Set"}}},methods:{navigate_away(e){const r=this;if(!this.$refs.BrrToolbar.is_project_changed){this.$router.push(e.dest);return}this.$refs.BrrToolbar.click_save_btn(),setTimeout(function(){r.navigate_away(e)},100)},createtodo(e){const r=this,o={ok:function(a){r.$refs.todos.add_single_todo(a.data.todo),j.create({color:"bg-grey-2",message:"Todo added",timeout:2e3,color:"positive"})},error:function(a){j.create({color:"bg-grey-2",message:a.message,timeout:2e3,color:"negative"})}};r.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/projects/"+r.loaded_project_id+"/todos",method:"POST",data:e,callback:o})},apiaddweblink(e){return this.$refs.DealBasicInfo.apiaddweblink(e)},activity_log(e){if(!this.isMounted){console.log("ERROR - trying to log activity unmounted",e);return}this.$refs.ActivityLog.log_activity(e)},projectchanged(e){if(console.log("BrrCalc page received project changed from ",e),!this.security_role_cansave)return!1;if(!this.isMounted){console.log("WARNING = projectchanged called when mounted is false");return}if(typeof this.$refs.BrrToolbar=="undefined")return console.log("WARNING = projectchanged called when BrrToolbar is undefined"),!1;this.$refs.BrrToolbar.set_changed_true()},click_save_btn(){this.$refs.BrrToolbar.click_save_btn()},save_project(){this.$refs.ProjectSerializer.save_project({dict_of_card_info:this.serialized_data,activity_log:this.$refs.ActivityLog.serializer_card_data,workflow:this.$refs.Workflow.serializer_card_data,patch_id:this.serialized_data.dealbasicinfo.patch_id,passthroughdata:void 0})},load_project_into_cards(e){this.$refs.ProjectSerializer.serializer_load_data(e),this.$refs.DealBasicInfo.serializer_load_data(e.sub_section_details.dealbasicinfo),typeof e.sub_section_details.vision!="undefined"&&this.$refs.Vision.serializer_load_data(e.sub_section_details.vision),typeof e.sub_section_details.gdvcard!="undefined"&&this.$refs.GdvCard.serializer_load_data(e.sub_section_details.gdvcard),typeof e.sub_section_details.purchaseprice!="undefined"&&this.$refs.PurchasePrice.serializer_load_data(e.sub_section_details.purchaseprice),typeof e.sub_section_details.refurbcost!="undefined"&&this.$refs.RefurbCost.serializer_load_data(e.sub_section_details.refurbcost),typeof e.sub_section_details.stampduty!="undefined"&&this.$refs.StampDuty.serializer_load_data(e.sub_section_details.stampduty),typeof e.sub_section_details.othercosts!="undefined"&&this.$refs.OtherCosts.serializer_load_data(e.sub_section_details.othercosts),typeof e.sub_section_details.finance!="undefined"&&this.$refs.Finance.serializer_load_data(e.sub_section_details.finance),typeof e.sub_section_details.refinance!="undefined"&&this.$refs.Refinance.serializer_load_data(e.sub_section_details.refinance),this.$refs.ActivityLog.serializer_load_data(e.activity_log),this.$refs.Workflow.serializer_load_data(e.workflow),this.$refs.BrrToolbar.serializer_load_data({}),this.$refs.todos.serializer_load_data(e.todos)},save_project_complete({success:e,response:r,passthroughdata:o}){e&&(this.loaded_project_id=r.data.id),this.$refs.BrrToolbar.save_project_complete_notification({success:e,response:r})},load_project_api_fail(e){j.create({color:"bg-grey-2",message:"Error loading project "+e,timeout:2e3,color:"negative"}),this.load_complete()},load_project_api_success(e){this.loaded_project_id=e.data.id,this.load_project_into_cards(e.data),j.create({color:"bg-grey-2",message:"Project Loaded",timeout:2e3,color:"positive"}),this.load_complete()},load_complete(){const e=this;setTimeout(function(){e.isMounted=!0},105)},call_load_api(){const e=this,r={ok:e.load_project_api_success,error:e.load_project_api_fail};e.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/projects/"+e.$route.query.projectid,method:"GET",data:void 0,callback:r})}},mounted(){const e=this;if(typeof e.$route.query.projectid=="undefined"){if(e.load_complete(),typeof e.$route.query.patchid!="undefined"){if(!e.security_role_cansave)return;this.$refs.DealBasicInfo.select_patch_by_id(e.$route.query.patchid)}return}if(e.security_role_cansave){e.call_load_api();return}setTimeout(function(){e.call_load_api()},1e3)}}),as={class:"main-page fit col wrap justify-center items-center content-center"},ss={key:0},os=s("h1",null,"Project Analysis",-1),ns=[os],is={key:1},ls=s("h1",null,"Buy Refurbish Rent Refinance Calculator",-1),us=[ls],cs={class:"row"},_s={class:"row"};function ds(e,r,o,a,t,u){const i=p("BrrToolbar"),l=p("DealBasicInfo"),h=p("Vision"),m=p("GdvCard"),f=p("PurchasePrice"),B=p("RefurbCost"),I=p("StampDuty"),k=p("OtherCosts"),ve=p("Finance"),we=p("Refinance"),be=p("DealSummary"),ye=p("FlipDealRating"),Se=p("DealRating"),$e=p("ProjectSerializer"),ke=p("Workflow"),Ce=p("Todos"),qe=p("ActivityLog"),Te=p("SaveToGoogleSheet");return d(),S(Be,{class:"flex"},{default:c(()=>[s("div",as,[e.security_role_cansave?(d(),w("div",ss,ns)):y("",!0),e.security_role_cansave?y("",!0):(d(),w("div",is,us)),e.security_role_cansave?(d(),S(i,{key:2,ref:"BrrToolbar",reason_project_not_savable:e.reason_project_not_savable,is_saved_project_with_id:e.is_saved_project_with_id,onActivity_log:e.activity_log,onSaveproject:e.save_project,onCreatetodo:e.createtodo},null,8,["reason_project_not_savable","is_saved_project_with_id","onActivity_log","onSaveproject","onCreatetodo"])):y("",!0),e.security_role_cansave?(d(),S(Ae,{key:3,modelValue:e.tab,"onUpdate:modelValue":r[0]||(r[0]=Y=>e.tab=Y),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:c(()=>[n(te,{name:"main",label:"Main"}),n(te,{name:"project",label:"Project"})]),_:1},8,["modelValue"])):y("",!0),G(s("div",cs,[e.security_role_cansave?(d(),S(l,{key:0,ref:"DealBasicInfo",ever_saved:e.ever_saved,onProjectchanged:e.projectchanged,onNavigate_away:e.navigate_away},null,8,["ever_saved","onProjectchanged","onNavigate_away"])):y("",!0),n(h,{ref:"Vision",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"]),n(m,{ref:"GdvCard",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"]),n(f,{ref:"PurchasePrice",purchaserange:e.purchaserange,"onUpdate:purchaserange":r[1]||(r[1]=Y=>e.purchaserange=Y),onProjectchanged:e.projectchanged},null,8,["purchaserange","onProjectchanged"]),n(B,{ref:"RefurbCost",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"]),n(I,{ref:"StampDuty",purchaserange:e.purchaserange,onProjectchanged:e.projectchanged},null,8,["purchaserange","onProjectchanged"]),n(k,{ref:"OtherCosts",purchaserange:e.purchaserange,onProjectchanged:e.projectchanged},null,8,["purchaserange","onProjectchanged"]),n(ve,{ref:"Finance",purchaserange:e.purchaserange,refurb_cost_total:e.refurb_cost_total,stampduty_total:e.stampduty_total,othercosts_total:e.othercosts_total,refurbmonths:e.refurbmonths,gdv_total:e.gdv_total,onProjectchanged:e.projectchanged},null,8,["purchaserange","refurb_cost_total","stampduty_total","othercosts_total","refurbmonths","gdv_total","onProjectchanged"]),n(we,{ref:"Refinance",gdv_total:e.gdv_total,onProjectchanged:e.projectchanged},null,8,["gdv_total","onProjectchanged"]),n(be,{ref:"DealSummary",purchaserange:e.purchaserange,finance_in_items:e.finance_in_items,finance_out_items:e.finance_out_items,finance_during_items:e.finance_during_items,refinance_out_items:e.refinance_out_items,purchase_items:e.purchase_items,stampduty_items:e.stampduty_items,othercosts_items:e.othercosts_items,refurb_cost_items:e.refurb_cost_items,gdv_total:e.gdv_total,refurbmonths:e.refurbmonths,is_valid_input:e.is_valid_input},null,8,["purchaserange","finance_in_items","finance_out_items","finance_during_items","refinance_out_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","is_valid_input"]),n(ye,{ref:"FlipDealRating",purchaserange:e.purchaserange,finance_in_items_without_cash:e.finance_in_items_without_cash,finance_out_items:e.finance_out_items,finance_during_items:e.finance_during_items,purchase_items:e.purchase_items,stampduty_items:e.stampduty_items,othercosts_items:e.othercosts_items,refurb_cost_items:e.refurb_cost_items,gdv_total:e.gdv_total,refurbmonths:e.refurbmonths,is_valid_input:e.is_valid_input},null,8,["purchaserange","finance_in_items_without_cash","finance_out_items","finance_during_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","is_valid_input"]),n(Se,{ref:"DealRating",purchaserange:e.purchaserange,finance_totalmoneyneeded:e.finance_totalmoneyneeded,deal_summary_final_bal:e.deal_summary_final_bal,finance_refinance:e.finance_refinance,gdv_total:e.gdv_total,refurbmonths:e.refurbmonths,stampduty_total:e.stampduty_total,othercosts_total:e.othercosts_total,refurb_cost_total:e.refurb_cost_total,is_valid_input:e.is_valid_input},null,8,["purchaserange","finance_totalmoneyneeded","deal_summary_final_bal","finance_refinance","gdv_total","refurbmonths","stampduty_total","othercosts_total","refurb_cost_total","is_valid_input"]),e.security_role_cansave?(d(),S($e,{key:1,ref:"ProjectSerializer",onSaveprojectcomplete:e.save_project_complete,project_type:e.project_type},null,8,["onSaveprojectcomplete","project_type"])):y("",!0)],512),[[re,e.tab==="main"]]),G(s("div",_s,[e.security_role_cansave?(d(),S(ke,{key:0,ref:"Workflow",onProjectchanged:e.projectchanged,onActivity_log:e.activity_log,onClick_save_btn:e.click_save_btn},null,8,["onProjectchanged","onActivity_log","onClick_save_btn"])):y("",!0),e.security_role_cansave?(d(),S(Ce,{key:1,ref:"todos"},null,512)):y("",!0),e.security_role_cansave?(d(),S(qe,{key:2,ref:"ActivityLog",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"])):y("",!0),e.security_role_cansave?(d(),S(Te,{key:3,ref:"SaveToGoogleSheet",serialized_data:e.serialized_data,patch:e.patch,stampduty_total:e.stampduty_total,refurb_cost_total:e.refurb_cost_total,othercosts_items_detail:e.othercosts_items_detail,caculated_loan_details:e.caculated_loan_details,finance_bridgecost:e.finance_bridgecost,finance_bridgeamount:e.finance_bridgeamount,refinance_costs:e.refinance_costs,gdv_total:e.gdv_total,onApiaddweblink:e.apiaddweblink,onActivity_log:e.activity_log},null,8,["serialized_data","patch","stampduty_total","refurb_cost_total","othercosts_items_detail","caculated_loan_details","finance_bridgecost","finance_bridgeamount","refinance_costs","gdv_total","onApiaddweblink","onActivity_log"])):y("",!0)],512),[[re,e.tab==="project"]])])]),_:1})}var Vs=T(rs,[["render",ds]]);export{Vs as default};
