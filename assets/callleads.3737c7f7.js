import{_ as h,d as k,o as l,c as v,w as d,e as o,K as i,f as b,a as c,Q as f,L as _,M as y,O as w,ae as C,t as p,aa as g}from"./index.dcf5bd07.js";import{Q as $}from"./QPage.04a4d3d7.js";import{u as Q}from"./use-quasar.486d50b4.js";import{u as B}from"./backend_connection.a998e507.js";import"./axios.6e1fcf85.js";const u="2",m="1";function L(e){return typeof e.detail.workflow_lookup[u]=="undefined"||typeof e.detail.workflow_lookup[u][m]=="undefined"?0:e.detail.workflow_lookup[u][m].length}const P=k({name:"RentProjectCallLeads",components:{},setup(){const e=Q(),t=B();return{q:e,backend_connection_store:t}},data(){return{patches_data:[]}},computed:{total_number_of_calls(){return this.display_array.filter(function(e){return e.id==="all"})[0].num},display_array(){var e=[],t=0;return this.patches_data.map(function(a){if(a.loaded&&a.loadsuccess){const s=L(a);s>0&&(t+=s,e.push({id:a.from_user_profile.id,title:a.from_user_profile.name,num:s}))}else e.push({id:a.from_user_profile.id,title:a.from_user_profile.name,num:1})}),e.unshift({id:"all",title:"All Patches",num:t}),e},user_profile(){return this.backend_connection_store.user_profile}},methods:{recursive_load_patch_details(){const e=this.patches_data.filter(function(n){return n.loaded===!1});if(e.length===0)return;const t=e[0],a=this,s={ok:function(n){t.loaded=!0,t.loadsuccess=!0,t.detail=n.data,a.recursive_load_patch_details()},error:function(n){t.loaded=!0,t.loadsuccess=!1,a.recursive_load_patch_details()}};this.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/patches/"+t.from_user_profile.id,method:"GET",data:void 0,callback:s})}},mounted(){this.patches_data=this.user_profile.patches.map(function(e){return{from_user_profile:e,loaded:!1,loadsuccess:!0,detail:{}}}),this.recursive_load_patch_details()}}),T={class:"fit column wrap justify-start items-start content-center"},j=o("h2",null,"Call Rent to Rent Leads",-1),q=o("p",null,"List of all leads that need to be called",-1),N={key:0,class:"flex"},V={class:"text-h6"},E={key:1,class:"flex"},R={class:"text-h6"},S={class:"row"},A={key:0,class:"col q-ma-sm"},D={align:"right"};function F(e,t,a,s,n,G){return l(),v($,{class:"flex flex-center"},{default:d(()=>[o("div",T,[j,q,e.total_number_of_calls===0?(l(),i("div",N,[o("div",V,[b(" You have no outstanding leads to call. "),c(f,{color:"primary",label:"Enter more leads here",onClick:t[0]||(t[0]=r=>e.$router.push("/tools/rentproject/enterlead"))})])])):_("",!0),e.total_number_of_calls>0?(l(),i("div",E,[(l(!0),i(y,null,w(e.display_array,r=>(l(),i("div",{key:r.id},[c(g,{inline:"",class:"q-ma-sm card-style",onClick:I=>e.$router.push("/tools/rentproject/batchcallleads?patchid="+r.id)},{default:d(()=>[c(C,null,{default:d(()=>[o("div",R,p(r.title),1),o("div",S,[r.num!==0?(l(),i("div",A,[o("div",null,p(r.num)+" calls to make",1),o("div",D,[c(f,{color:"primary",icon:"call",label:"make calls"})])])):_("",!0)])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])):_("",!0)])]),_:1})}var x=h(P,[["render",F]]);export{x as default};
