import{H as y,Q as v,a as k,b,c as w,_ as P}from"./HeadToolbars.da1cabb2.js";import{Q as c}from"./QPage.eb06fdae.js";import{Q as C,_ as T}from"./PIMS Logo White.85662fa0.js";import{_ as A,d as L,P as l,N as S,r as _,o as s,c as x,w as n,a as t,e as o,K as r,ar as i,f as d,t as g}from"./index.d28e8c48.js";import{u as N}from"./backend_connection.afe2aebf.js";import"./QResizeObserver.29ced2b3.js";import"./QToolbar.428ecb2e.js";import"./position-engine.2d36dbe6.js";import"./axios.6e1fcf85.js";const Q=L({name:"MainLayout",components:{HeadToolbars:y},setup(){return{backend_connection_store:N()}},data(){return{page_to_show:"waiting"}},computed:{copyright(){return"\xA9 "+new Date().getFullYear()+" All Right Reserved"},connectionState(){return this.backend_connection_store.connectionStateString},isLoggedin(){return this.backend_connection_store.isLoggedin},security_role_cansave(){return this.backend_connection_store.security_role_cansave}},methods:{notifyAccept(){l.set("cookiesAccepted","true",{secure:!window.location.href.includes("localhost"),expires:180})},navigateToDataAndPrivacy(){this.$router.push("/privacy")},hasAcceptedCookie(){if(!l.has("cookiesAccepted"))return!1;var e=l.get("cookiesAccepted");return typeof e=="undefined"?!1:e==="true"},cookiePopup(){var e=this;this.hasAcceptedCookie()||S.create({color:"bg-grey-2",message:'By clicking \u201CAccept\u201D, you agree to the storing of cookies on your device to enhance site navigation, analyze site usage, and assist in our marketing efforts. Some of these may be "third party cookies".',timeout:0,actions:[{label:"View Privacy Policy",color:"primary",handler:e.navigateToDataAndPrivacy},{label:"Accept",color:"white",handler:e.notifyAccept}]})}},mounted(){const e=this,u={ok:function(a){e.page_to_show="loggedin"},error:function(a){e.page_to_show="noconnection"}},p={ok:function(a){e.isLoggedin?e.page_to_show="loggedin":e.backend_connection_store.login(u,e.$rjmgclientid)},error:function(a){e.page_to_show="noconnection"}};e.page_to_show="waiting",e.backend_connection_store.connect(p),e.cookiePopup()}}),B={class:"child_page_class"},D={key:0},H=o("h1",null,"Please wait...",-1),$={key:1},E=o("h1",null,"No Connection to server",-1),V={key:2},M=o("h1",null,"TODO Login button",-1),F={key:3},R=o("div",{class:"bottom-sub-toolbar bg-grey-5 fit column wrap justify-center items-center content-center text-white"},[o("img",{alt:"PIMS Logo",src:T,class:"pims-logo"}),d("Membership number 34541 (Robert Metcalf) "),o("img",{class:"bottom-logo",alt:"Evernet properties logo",src:P}),o("div",null,"Evernet Properties Limited | Company Number: 15345182 | Company registered office : 86-90, Paul Street, London EC2A 4NE")],-1),j={class:"footer row"},O={class:"left_footer col-grow"},z={class:"right_footer"};function I(e,u,p,a,K,Y){const f=_("HeadToolbars"),h=_("router-view"),m=_("router-link");return s(),x(v,{view:"lHh Lpr lFf"},{default:n(()=>[t(k,{elevated:"",class:"bg-grey-7 text-white"},{default:n(()=>[t(f)]),_:1}),t(b,null,{default:n(()=>[o("div",B,[e.page_to_show==="waiting"?(s(),r("div",D,[t(c,{class:"flex flex-center"},{default:n(()=>[H]),_:1})])):i("",!0),e.page_to_show==="noconnection"?(s(),r("div",$,[t(c,{class:"flex flex-center"},{default:n(()=>[E]),_:1})])):i("",!0),e.page_to_show==="connected"?(s(),r("div",V,[t(c,{class:"flex flex-center"},{default:n(()=>[M]),_:1})])):i("",!0),e.page_to_show==="loggedin"?(s(),r("div",F,[t(h)])):i("",!0)]),R]),_:1}),t(w,{elevated:"",class:"bg-grey-7 text-white"},{default:n(()=>[o("div",j,[o("div",O,[t(m,{to:"/privacy",class:"toolbar"},{default:n(()=>[d("Privacy Policy")]),_:1})]),o("div",z,[d(g(e.copyright)+" ",1),t(C,null,{default:n(()=>[o("table",null,[o("tr",null,[o("td",null,"Connection: "+g(e.connectionState),1)])])]),_:1})])])]),_:1})]),_:1})}var te=A(Q,[["render",I]]);export{te as default};
