import{_ as u,d as f,N as m,o as a,c as p,w as s,e as n,K as r,L as o,t as i,a as c,M as g,O as k,ai as b,a9 as y,f as C,ao as $}from"./index.ce16cc00.js";import{a as v,Q as l}from"./QItemSection.58b3832f.js";import{Q as j}from"./QList.7facff1a.js";import{Q as S}from"./QPage.5b728a67.js";import{u as Q}from"./backend_connection.15cca581.js";import{u as T}from"./data_caches.e9d63034.js";import"./axios.6e1fcf85.js";const N=f({name:"AgentsPage",setup(){const e=Q(),t=T();return{backend_connection_store:e,dataCachesStore:t}},data(){return{loaded:!1}},computed:{there_are_zero_agents(){return typeof this.patchagents_data.agents=="undefined"||Object.keys(this.patchagents_data.agents).length===0},patch_data(){return this.dataCachesStore.get_direct_from_cache({object_type:"patches",object_id:this.$route.params.patchid})},patchagents_data(){return this.dataCachesStore.get_direct_from_cache({object_type:"patchagents",object_id:this.$route.params.patchid})}},methods:{refresh(){const e=this,t={ok:e.refresh_success,error:e.refresh_error};this.dataCachesStore.get({backend_connection_store:this.backend_connection_store,object_type:"patches",object_id:e.$route.params.patchid,skip_cache:!1,callback:t})},refresh_success(e){const t=this,h={ok:t.refresh_success2,error:t.refresh_error};this.dataCachesStore.get({backend_connection_store:this.backend_connection_store,object_type:"patchagents",object_id:t.$route.params.patchid,skip_cache:!1,callback:h})},refresh_success2(e){this.loaded=!0},refresh_error(e){m.create({color:"negative",message:"Failed to find patch information",timeout:2e3}),this.$router.push("/tools/cansave/patches")},clickpatchagent(e){this.$router.push("/tools/agents/"+this.$route.params.patchid+"/"+e)}},mounted(){this.loaded=!1,this.refresh()}}),B={class:"cols"},w=n("h1",null,"Agent Notes",-1),A={key:0},L={key:1},V={key:0},z=n("p",null,"Agents with notes:",-1),D={key:1};function I(e,t,h,F,O,P){return a(),p(S,{class:"flex flex-center"},{default:s(()=>[n("div",B,[w,e.loaded?o("",!0):(a(),r("div",A," Loading... ")),e.loaded?(a(),r("div",L,[n("h2",null,i(e.patch_data.name),1),e.there_are_zero_agents?o("",!0):(a(),r("div",V,[z,c(j,{dense:""},{default:s(()=>[(a(!0),r(g,null,k(e.patchagents_data.agents,(d,_)=>b((a(),p(v,{key:_,clickable:"",onClick:E=>e.clickpatchagent(_)},{default:s(()=>[c(l,{avatar:""},{default:s(()=>[c(y,{color:"primary",name:"edit"})]),_:1}),c(l,null,{default:s(()=>[C(i(d.agent_name)+" ("+i(d.projects.length)+") ",1)]),_:2},1024)]),_:2},1032,["onClick"])),[[$]])),128))]),_:1})])),e.there_are_zero_agents?(a(),r("div",D," There are no agent notes stored for this patch. ")):o("",!0)])):o("",!0)])]),_:1})}var J=u(N,[["render",I]]);export{J as default};
