import{Q as G}from"./QPage.1ea0f190.js";import{v as y,_ as w,y as f,z as p,A as r,B as l,C as e,ad as O,ae as A,ag as b,af as V,D as i,ar as L,E as S,H as s,aq as R,c as W,e as H,n as z,q as Y,x as _,N as P,a7 as J,F as K,G as X}from"./index.cd103895.js";import{Q as Z,I as F,a as x,b as h,c as $,F as tt,d as et,G as at,P as lt,R as nt,S as st,O as rt,e as ot}from"./FeatureTable.cb9bcf29.js";import{u as D}from"./utils.7b533ce3.js";import{Q as it}from"./QExpansionItem.5a63071a.js";import{u as ct}from"./utils.5f33790e.js";import{u as ut}from"./backend_connection.ad147349.js";import"./position-engine.02e28372.js";import"./axios.6e1fcf85.js";const _t=y({name:"BrrCalcVision",data(){return{devplan:""}},methods:{helpdevplan(){this.$q.dialog({title:"What is the development plan?",message:"Enter the development plan. E.g. Split into two flats"}).onOk(()=>{})}}}),dt=e("div",{class:"text-h6"},"Vision",-1),ft={class:"row"};function mt(t,n,a,u,d,m){return f(),p(V,{inline:"",class:"q-ma-sm card-style"},{default:r(()=>[l(b,null,{default:r(()=>[dt,e("div",ft,[l(O,{modelValue:t.devplan,"onUpdate:modelValue":n[0]||(n[0]=o=>t.devplan=o),label:"What is the development plan?",class:"col-grow"},null,8,["modelValue"]),l(A,{round:"",color:"primary",icon:"info",onClick:t.helpdevplan},null,8,["onClick"])])]),_:1})]),_:1})}var ht=w(_t,[["render",mt]]);const pt=y({name:"BrrCalcFinance",props:["gdv_total"],data(){return{refinance:{userefinance:!0,ltv:{min:75,max:75}}}},methods:{format_currency(t){return D.format_currency(t)}},computed:{get_refinance(){return this.refinance},refinanceamount(){return{worst:this.gdv_total.min*(this.refinance.ltv.min/100),best:this.gdv_total.max*(this.refinance.ltv.max/100)}},refinance_out_items(){let t=[];return this.refinance.userefinance&&t.push({name:"Mortgage Refinance",worst:this.refinanceamount.worst,best:this.refinanceamount.best}),t}}}),bt=e("div",{class:"text-h6"},"Refinance",-1),vt={key:0};function gt(t,n,a,u,d,m){return f(),p(V,{inline:"",class:"q-ma-sm card-style"},{default:r(()=>[l(b,null,{default:r(()=>[bt,i(" This section is for adding refinance details. After the refurbishment is complete the refinance stage can be used to pull money out of the deal. "),l(L,{modelValue:t.refinance.userefinance,"onUpdate:modelValue":n[0]||(n[0]=o=>t.refinance.userefinance=o),label:"Refinance after refurbishment"},null,8,["modelValue"]),t.refinance.userefinance?(f(),S("div",vt,[i(" Refinance LTV "+s(t.refinance.ltv.min)+"% - "+s(t.refinance.ltv.max)+"% ",1),l(Z,{modelValue:t.refinance.ltv,"onUpdate:modelValue":n[1]||(n[1]=o=>t.refinance.ltv=o),min:0,max:100,step:5,"thumb-size":"40px","drag-range":"",label:"","left-label-value":t.refinance.ltv.min+"%","right-label-value":t.refinance.ltv.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),e("div",null,"Refinance amount: "+s(t.format_currency(t.refinanceamount.worst))+" - "+s(t.format_currency(t.refinanceamount.best)),1)])):R("",!0)]),_:1})]),_:1})}var yt=w(pt,[["render",gt]]),T=W({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:n}){const a=H(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>z("tr",{class:a.value},Y(n.default))}});function Q(t){return t.filter(function(n){return n.type==="ledger"})}function I(t,n){t.push({type:"blank",key:t.length}),t.push({type:"title",key:t.length,name:n})}function g(t,n,a,u){let d=Q(t);var m=void 0,o=void 0;d.length>0&&(m=d[d.length-1].worst,o=d[d.length-1].best);function c(k,v){var C=0;typeof k!="undefined"&&(C=k.bal);var B="",M="";return v>0?B=v:M=v,{in:B,out:M,bal:C+v}}t.push({type:"ledger",key:t.length,name:n,worst:c(m,a),best:c(o,u)})}const wt=y({name:"BrrCalcDealSummary",props:["is_valid_input","purchaserange","finance_in_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","finance_out_items","refinance_out_items","finance_during_items"],components:{InvalidMessage:F},data(){return{table:{columns:[{name:"item",label:"Item",field:"item"},{name:"win",label:"In",field:"win"},{name:"wout",label:"Out",field:"wout"},{name:"wbal",label:"Balance",field:"wbal"},{name:"bin",label:"In",field:"bin"},{name:"bout",label:"Out",field:"bout"},{name:"bbal",label:"Balance",field:"bbal"}]}}},methods:{format_currency(t){return typeof t=="string"&&t===""?"":D.format_currency(t)}},computed:{final_bal(){let t=Q(this.items);return t.length===0?{worst:0,best:0}:{worst:t[t.length-1].worst.bal,best:t[t.length-1].best.bal}},money_in(){var t=this.finance_in_items.reduce((a,u)=>a+u.worst,0),n=this.finance_in_items.reduce((a,u)=>a+u.best,0);return{worst:t,best:n}},items(){var t=[];typeof this.finance_in_items!="undefined"&&this.finance_in_items.map(function(a){g(t,a.name,a.worst,a.best)}),typeof this.purchase_items!="undefined"&&this.purchase_items.map(function(a){g(t,a.name,a.worst,a.best)}),typeof this.stampduty_items!="undefined"&&this.stampduty_items.map(function(a){g(t,a.name,a.worst,a.best)}),typeof this.othercosts_items!="undefined"&&this.othercosts_items.map(function(a){g(t,a.name,a.worst,a.best)}),I(t,"During Project"),typeof this.finance_during_items!="undefined"&&this.finance_during_items.map(function(a){g(t,a.name,a.worst,a.best)}),typeof this.refurb_cost_items!="undefined"&&this.refurb_cost_items.map(function(a){g(t,a.name,a.worst,a.best)});let n=!1;return typeof this.refinance_out_items!="undefined"&&(this.refinance_out_items.length>0&&(n=!0,I(t,"Exit finance")),this.refinance_out_items.map(function(a){g(t,a.name,a.worst,a.best)})),typeof this.finance_out_items!="undefined"&&(this.finance_out_items.length>0&&(n||I(t,"Exit finance")),this.finance_out_items.map(function(a){g(t,a.name,a.worst,a.best)})),t}}}),$t=e("div",{class:"text-h6"},"Cashflow Summary",-1),kt=e("div",{class:"text-subtitle2"},"This section gives a break down of money in and out of the deal. It is broken down twice, for best and worst case figures.",-1),Ct=e("div",null," \xA0 ",-1);function Rt(t,n,a,u,d,m){const o=_("InvalidMessage");return f(),p(V,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:r(()=>[l(b,null,{default:r(()=>[$t,kt]),_:1}),l(b,null,{default:r(()=>[l(o,{is_valid_input:t.is_valid_input},null,8,["is_valid_input"]),e("div",null,[l(x,{columns:t.table.columns,rows:t.items,"hide-bottom":"","rows-per-page-options":[100]},{header:r(c=>[l(T,null,{default:r(()=>[l(h),l(h,{colspan:"3",class:"worstcasetablecell"},{default:r(()=>[i("Worst Case")]),_:1}),l(h,{colspan:"3"},{default:r(()=>[i("Best Case")]),_:1})]),_:1}),l(T,{props:c},{default:r(()=>[l(h,null,{default:r(()=>[i(" Item ")]),_:1}),l(h,{class:"worstcasetablecell"},{default:r(()=>[i(" In ")]),_:1}),l(h,{class:"worstcasetablecell"},{default:r(()=>[i(" Out ")]),_:1}),l(h,{class:"worstcasetablecell"},{default:r(()=>[i(" Balance ")]),_:1}),l(h,null,{default:r(()=>[i(" In ")]),_:1}),l(h,null,{default:r(()=>[i(" Out ")]),_:1}),l(h,null,{default:r(()=>[i(" Balance ")]),_:1})]),_:2},1032,["props"])]),body:r(c=>[c.row.type==="ledger"?(f(),p(T,{key:0},{default:r(()=>[l($,{class:"tablerowcell"},{default:r(()=>[i(s(c.row.name),1)]),_:2},1024),l($,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:r(()=>[i(s(t.format_currency(c.row.worst.in)),1)]),_:2},1024),l($,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:r(()=>[i(s(t.format_currency(c.row.worst.out)),1)]),_:2},1024),l($,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:r(()=>[i(s(t.format_currency(c.row.worst.bal)),1)]),_:2},1024),l($,{class:"valuetablecell tablerowcell"},{default:r(()=>[i(s(t.format_currency(c.row.best.in)),1)]),_:2},1024),l($,{class:"valuetablecell tablerowcell"},{default:r(()=>[i(s(t.format_currency(c.row.best.out)),1)]),_:2},1024),l($,{class:"valuetablecell tablerowcell"},{default:r(()=>[i(s(t.format_currency(c.row.best.bal)),1)]),_:2},1024)]),_:2},1024)):R("",!0),c.row.type==="blank"?(f(),p(T,{key:1},{default:r(()=>[l(h,{colspan:"7"},{default:r(()=>[i("\xA0")]),_:1})]),_:1})):R("",!0),c.row.type==="title"?(f(),p(T,{key:2},{default:r(()=>[l(h,{colspan:"7"},{default:r(()=>[i(s(c.row.name),1)]),_:2},1024)]),_:2},1024)):R("",!0)]),_:1},8,["columns","rows"])]),Ct]),_:1})]),_:1})}var Dt=w(wt,[["render",Rt]]);const Tt=y({name:"BrrCalcDealRatingAlternativeSummary",props:["purchaserange","finance_refinance","stampduty_total","othercosts_total","refurb_cost_total","gdv_total"],methods:{format_currency(t){return D.format_currency(t)}},computed:{mortgage_rate_display(){return this.finance_refinance.userefinance?{best:this.finance_refinance.ltv.max+"%",worst:this.finance_refinance.ltv.min+"%"}:{best:"N/A",worst:"N/A"}},mortgage(){return this.finance_refinance.userefinance?{best:this.finance_refinance.ltv.max/100*this.purchaserange.min,worst:this.finance_refinance.ltv.min/100*this.purchaserange.max}:{best:0,worst:0}},deposit(){return{best:this.purchaserange.min-this.mortgage.best,worst:this.purchaserange.max-this.mortgage.worst}},total_money_in(){return{best:this.mortgage.best+this.deposit.best+this.stampduty_total.min+this.othercosts_total.min+this.refurb_cost_total.min,worst:this.mortgage.worst+this.deposit.worst+this.stampduty_total.max+this.othercosts_total.max+this.refurb_cost_total.max}},new_mortgage_amount(){return{best:this.gdv_total.max*(this.finance_refinance.ltv.max/100),worst:this.gdv_total.min*(this.finance_refinance.ltv.min/100)}},monay_pulled_out(){return{best:this.gdv_total.max-this.new_mortgage_amount.best,worst:this.gdv_total.min-this.new_mortgage_amount.worst}},profit(){return{best:this.gdv_total.max-this.total_money_in.best,worst:this.gdv_total.min-this.total_money_in.worst}},money_left_in(){return{best:this.monay_pulled_out.best-this.profit.best,worst:this.monay_pulled_out.worst-this.profit.worst}}}}),Vt={class:"alternativetable"},Bt=e("thead",null,[e("tr",null,[e("th",{class:"text-left alternativetablecell"}),e("th",{class:"text-center alternativetablecell worstcasetablecell"},"Worst case"),e("th",{class:"text-center alternativetablecell"},"Best case")])],-1),Mt=e("td",{class:"text-left alternativetablecell"},"Price offered",-1),St={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Pt={class:"text-right alternativetablecell yellowtablecell totaltablecell"},It=e("td",{class:"text-left alternativetablecell"},"Mortgage %",-1),Ot={class:"text-right alternativetablecell yellowtablecell totaltablecell"},At={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Ft=e("td",{class:"text-left alternativetablecell"},"Mortgage",-1),Qt={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},qt={class:"text-right alternativetablecell totaltablecell"},Et=e("td",{class:"text-left alternativetablecell"},"Deposit",-1),jt={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Nt={class:"text-right alternativetablecell totaltablecell"},Ut=e("td",{class:"text-left alternativetablecell"},"Stamp Duty",-1),Gt={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Lt={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Wt=e("td",{class:"text-left alternativetablecell"},"Other costs (Legals, etc)",-1),Ht={class:"text-right alternativetablecell yellowtablecell totaltablecell"},zt={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Yt=e("td",{class:"text-left alternativetablecell"},"Total Refurb Costs",-1),Jt={class:"text-right alternativetablecell bluetablecell totaltablecell"},Kt={class:"text-right alternativetablecell bluetablecell totaltablecell"},Xt=e("td",{class:"text-left alternativetablecell"},"Total Money In",-1),Zt={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},xt={class:"text-right alternativetablecell totaltablecell"},te=e("tr",null,[e("td",null,"\xA0"),e("td",{class:"worstcasetablecell"}),e("td")],-1),ee=e("td",{class:"text-left alternativetablecell"},"End Value",-1),ae={class:"text-right alternativetablecell yellowtablecell totaltablecell"},le={class:"text-right alternativetablecell yellowtablecell totaltablecell"},ne=e("td",{class:"text-left alternativetablecell"},"New Mortgage Amount",-1),se={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},re={class:"text-right alternativetablecell totaltablecell"},oe=e("td",{class:"text-left alternativetablecell"},"Money Pulled Out",-1),ie={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},ce={class:"text-right alternativetablecell totaltablecell"},ue=e("tr",null,[e("td",null,"\xA0"),e("td",{class:"worstcasetablecell"}),e("td")],-1),_e=e("td",{class:"text-left alternativetablecell"},"Profit",-1),de={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},fe={class:"text-right alternativetablecell totaltablecell"},me=e("td",{class:"text-left alternativetablecell"},"Money Left In",-1),he={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},pe={class:"text-right alternativetablecell totaltablecell"};function be(t,n,a,u,d,m){return f(),p(it,{"expand-separator":"",label:"Alternative summary format"},{default:r(()=>[e("div",null,[i(" This is another way of viewing the project numbers that is commonly used. I have included this for comparison. "),e("table",Vt,[Bt,e("tbody",null,[e("tr",null,[Mt,e("td",St,s(t.format_currency(t.purchaserange.max)),1),e("td",Pt,s(t.format_currency(t.purchaserange.min)),1)]),e("tr",null,[It,e("td",Ot,s(t.mortgage_rate_display.worst),1),e("td",At,s(t.mortgage_rate_display.best),1)]),e("tr",null,[Ft,e("td",Qt,s(t.format_currency(t.mortgage.worst)),1),e("td",qt,s(t.format_currency(t.mortgage.best)),1)]),e("tr",null,[Et,e("td",jt,s(t.format_currency(t.deposit.worst)),1),e("td",Nt,s(t.format_currency(t.deposit.best)),1)]),e("tr",null,[Ut,e("td",Gt,s(t.format_currency(t.stampduty_total.max)),1),e("td",Lt,s(t.format_currency(t.stampduty_total.min)),1)]),e("tr",null,[Wt,e("td",Ht,s(t.format_currency(t.othercosts_total.max)),1),e("td",zt,s(t.format_currency(t.othercosts_total.min)),1)]),e("tr",null,[Yt,e("td",Jt,s(t.format_currency(t.refurb_cost_total.max)),1),e("td",Kt,s(t.format_currency(t.refurb_cost_total.min)),1)]),e("tr",null,[Xt,e("th",Zt,s(t.format_currency(t.total_money_in.worst)),1),e("th",xt,s(t.format_currency(t.total_money_in.best)),1)]),te,e("tr",null,[ee,e("td",ae,s(t.format_currency(t.gdv_total.min)),1),e("td",le,s(t.format_currency(t.gdv_total.max)),1)]),e("tr",null,[ne,e("td",se,s(t.format_currency(t.new_mortgage_amount.worst)),1),e("td",re,s(t.format_currency(t.new_mortgage_amount.best)),1)]),e("tr",null,[oe,e("td",ie,s(t.format_currency(t.monay_pulled_out.worst)),1),e("td",ce,s(t.format_currency(t.monay_pulled_out.best)),1)]),ue,e("tr",null,[_e,e("td",de,s(t.format_currency(t.profit.worst)),1),e("td",fe,s(t.format_currency(t.profit.best)),1)]),e("tr",null,[me,e("td",he,s(t.format_currency(t.money_left_in.worst)),1),e("td",pe,s(t.format_currency(t.money_left_in.best)),1)])])]),i(" Note: The profit amounts may not match because this method does not take into account finance costs. ")])]),_:1})}var ve=w(Tt,[["render",be]]);const ge=y({name:"BrrCalcDealRatingCompareDoneup",props:["purchaserange","refurb_cost_total","gdv_total"],methods:{format_currency(t){return D.format_currency(t)},format_percent(t){return D.format_percent(t)}},computed:{total_spent(){return{worst:this.purchaserange.max+this.refurb_cost_total.max,best:this.purchaserange.min+this.refurb_cost_total.min}},gain(){return{worst:this.gdv_total.min-this.total_spent.worst,best:this.gdv_total.max-this.total_spent.best}},profit_percentage(){return{worst:this.gain.worst/this.total_spent.worst,best:this.gain.best/this.total_spent.best}}}}),ye=e("div",{class:"text-h5"},"Compare this project to buying a done up property",-1),we=e("div",null,"This section compares this project with buying a property that is already done up. To account for the time and risk involved with a refurbishment we expect the end value of the property to be more than if we had just bought one.",-1),$e={class:"alternativetable"},ke=e("thead",null,[e("tr",null,[e("th",{class:"text-left alternativetablecell"}),e("th",{class:"text-center alternativetablecell worstcasetablecell"},"Worst case"),e("th",{class:"text-center alternativetablecell"},"Best case")])],-1),Ce=e("td",{class:"text-left alternativetablecell"},"Purchase + Refurb",-1),Re={class:"text-right alternativetablecell worstcasetablecell"},De={class:"text-right alternativetablecell"},Te=e("td",{class:"text-left alternativetablecell"},"End Value",-1),Ve={class:"text-right alternativetablecell worstcasetablecell"},Be={class:"text-right alternativetablecell"},Me=e("td",{class:"text-left alternativetablecell totaltablecell"},"Gain",-1),Se={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Pe={class:"text-right alternativetablecell totaltablecell"},Ie=e("td",{class:"text-left alternativetablecell totaltablecell"},"Percentage",-1),Oe={class:"text-right alternativetablecell worstcasetablecell finaltotaltablecell"},Ae={class:"text-right alternativetablecell finaltotaltablecell"};function Fe(t,n,a,u,d,m){return f(),S("div",null,[ye,we,e("table",$e,[ke,e("tbody",null,[e("tr",null,[Ce,e("td",Re,s(t.format_currency(t.total_spent.worst)),1),e("td",De,s(t.format_currency(t.total_spent.best)),1)]),e("tr",null,[Te,e("td",Ve,s(t.format_currency(t.gdv_total.min)),1),e("td",Be,s(t.format_currency(t.gdv_total.max)),1)]),e("tr",null,[Me,e("td",Se,s(t.format_currency(t.gain.worst)),1),e("td",Pe,s(t.format_currency(t.gain.best)),1)]),e("tr",null,[Ie,e("td",Oe,s(t.format_percent(t.profit_percentage.worst)),1),e("td",Ae,s(t.format_percent(t.profit_percentage.best)),1)])])])])}var Qe=w(ge,[["render",Fe]]);const qe=y({name:"BrrCalcDealRating",props:["is_valid_input","finance_totalmoneyneeded","deal_summary_final_bal","finance_refinance","gdv_total","refurbmonths","purchaserange","stampduty_total","othercosts_total","refurb_cost_total"],components:{dealRatingAlternativeSummary:ve,FeatureTable:tt,InvalidMessage:F,dealRatingCompareDoneup:Qe},data(){return{}},methods:{format_currency(t){return D.format_currency(t)}},computed:{features(){let t=[];var n=Math.min(this.cash_out_of_deal_minus_cash_in.best,this.cash_out_of_deal_minus_cash_in.worst);n>0?t.push({type:"positive",text:"All money out deal! - All initial investment returned plus at least "+this.format_currency(n)}):t.push({type:"negative",text:"Not all money out deal! - Might leave "+this.format_currency(-1*n)+" in."});var a=Math.min(this.profit.best,this.profit.worst);a<0?t.push({type:"negative",text:"Deal makes a loss! - End value might be "+this.format_currency(-1*a)+" less than investment."}):a<this.gdv_total.min*.25?t.push({type:"negative",text:"Low amount of profit! - Low profit "+this.format_currency(a)+" less than 25% of gdv."}):t.push({type:"positive",text:"Profit making deal! - Profit of "+this.format_currency(a)+"!"});var u=Math.min(this.annualroi.worst,this.annualroi.best);return u<3?t.push({type:"negative",text:"Very low ROI! "+u.toFixed(1)+"%"}):u>10&&t.push({type:"positive",text:"Good ROI! "+u.toFixed(1)+"%"}),t},cash_out_of_deal_minus_cash_in(){return{best:this.deal_summary_final_bal.best-this.finance_totalmoneyneeded.best,worst:this.deal_summary_final_bal.worst-this.finance_totalmoneyneeded.worst}},percent_left_in(){return this.finance_refinance.userefinance?{best:100-this.finance_refinance.ltv.max,worst:100-this.finance_refinance.ltv.min}:{best:100,worst:100}},amount_equity_left_in(){return{best:this.gdv_total.max*(this.percent_left_in.best/100),worst:this.gdv_total.min*(this.percent_left_in.worst/100)}},total_end_value(){return{best:this.amount_equity_left_in.best+this.deal_summary_final_bal.best,worst:this.amount_equity_left_in.worst+this.deal_summary_final_bal.worst}},profit(){return{best:this.total_end_value.best-this.finance_totalmoneyneeded.best,worst:this.total_end_value.worst-this.finance_totalmoneyneeded.worst}},roi(){return{best:100*this.profit.best/this.finance_totalmoneyneeded.best,worst:100*this.profit.worst/this.finance_totalmoneyneeded.worst}},annualroi(){return{worst:this.roi.worst*(12/this.refurbmonths.worst),best:this.roi.best*(12/this.refurbmonths.best)}}}}),Ee=e("div",{class:"text-h6"},"Project Rating",-1),je=e("div",{class:"text-subtitle2"},"How good is this project?",-1),Ne=e("div",{class:"text-h5"},"Profit/Loss",-1),Ue=e("div",null,"Compare what we have put into the deal vs what we get out of it. These calculations won't account for time invested or the risk taken on in the project",-1),Ge={class:"text-h5"},Le=e("div",{class:"text-h6"},"Deal Features",-1);function We(t,n,a,u,d,m){const o=_("InvalidMessage"),c=_("dealRatingCompareDoneup"),k=_("dealRatingAlternativeSummary"),v=_("FeatureTable");return f(),p(V,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:r(()=>[l(b,null,{default:r(()=>[Ee,je]),_:1}),l(b,null,{default:r(()=>[l(o,{is_valid_input:t.is_valid_input},null,8,["is_valid_input"]),Ne,Ue,e("div",Ge,"Total cash in: "+s(t.format_currency(t.finance_totalmoneyneeded.worst))+" - "+s(t.format_currency(t.finance_totalmoneyneeded.best))+" Worst - Best",1),l(c,{purchaserange:t.purchaserange,refurb_cost_total:t.refurb_cost_total,gdv_total:t.gdv_total},null,8,["purchaserange","refurb_cost_total","gdv_total"])]),_:1}),l(b,null,{default:r(()=>[l(k,{purchaserange:t.purchaserange,finance_refinance:t.finance_refinance,stampduty_total:t.stampduty_total,othercosts_total:t.othercosts_total,refurb_cost_total:t.refurb_cost_total,gdv_total:t.gdv_total},null,8,["purchaserange","finance_refinance","stampduty_total","othercosts_total","refurb_cost_total","gdv_total"])]),_:1}),l(b,null,{default:r(()=>[Le,l(v,{features:t.features,"onUpdate:features":n[0]||(n[0]=C=>t.features=C)},null,8,["features"])]),_:1})]),_:1})}var He=w(qe,[["render",We]]);function ze(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))}const Ye=y({name:"DealBasicInfo",setup(){return{backend_connection_store:ut()}},data(){return{patch:{id:"notset",name:"Not Set"},address:"",postcode:"",weblinks:[],new_patch_value:""}},computed:{security_role_cansave(){return this.backend_connection_store.security_role_cansave},patch_list(){return this.backend_connection_store.user_profile.patches.concat([{id:"create",name:"Add..."}])}},methods:{select_patch(t){if(t.id==="create"){const n=this;this.$q.dialog({title:"Add new patch",message:"Enter the name for the new patch",html:!1,ok:{push:!0,label:"Ok"},cancel:{push:!0,label:"Cancel"},prompt:{model:"",type:"text"}}).onOk(a=>{n.new_patch_value=a;const u={ok:n.createpatchcallback,error:function(m){console.log("s",m),P.create({color:"negative",message:"Create patch failed "+m.response.data.message,timeout:2e3})}},d={patch_name:a};this.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/me/patches",method:"POST",data:d,callback:u})})}},createpatchcallback(t){this.backend_connection_store.update_user_profile({user_profile:t.data,then:this.createpatchcallback2})},createpatchcallback2(){const t=this;this.patch=this.patch_list.filter(function(n){return n.name===t.new_patch_value})[0],this.new_patch_value=""},delweblink(t){console.log("TODO"),this.weblinks=this.weblinks.filter(function(n){return t!==n.id})},addweblink(){const t=this;this.$q.dialog({title:"Add weblink",message:"Add weblink to information about this property (rightmove, zoopla, etc.)",html:!1,ok:{push:!0,label:"Ok"},cancel:{push:!0,label:"Cancel"},prompt:{model:"",type:"text"}}).onOk(n=>{t.weblinks.push({id:ze(),label:n})})},isEmpty(t){return t==null?!0:t.length==0},copy_text(t){const n={ok:function(a){P.create({color:"bg-grey-2",message:"Copied to clipboard",timeout:2e3})},error:function(a){P.create({color:"negative",message:"Copy failed",timeout:2e3})}};ct.copyTextToClipboard2(t,n)}}}),Je=e("div",{class:"text-h6"},"Basic Information",-1),Ke=e("div",{class:"text-subtitle2"},"Basic information about this project",-1),Xe=e("div",{class:"text-h6"},"Weblinks",-1);function Ze(t,n,a,u,d,m){return t.security_role_cansave?(f(),p(V,{key:0,inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:r(()=>[l(b,null,{default:r(()=>[Je,Ke]),_:1}),l(b,null,{default:r(()=>[e("div",null,[l(et,{modelValue:t.patch,"onUpdate:modelValue":[n[0]||(n[0]=o=>t.patch=o),t.select_patch],options:t.patch_list,label:"Patch","emit-value":"","option-label":"name"},null,8,["modelValue","options","onUpdate:modelValue"])]),e("div",null,[l(O,{filled:"",clearable:"",modelValue:t.address,"onUpdate:modelValue":n[1]||(n[1]=o=>t.address=o),label:"Address"},null,8,["modelValue"])]),e("div",null,[l(O,{filled:"",clearable:"",modelValue:t.postcode,"onUpdate:modelValue":n[3]||(n[3]=o=>t.postcode=o),label:"Postcode"},{append:r(()=>[t.isEmpty(t.postcode)?R("",!0):(f(),p(J,{key:0,class:"q-field__focusable-action",name:"content_copy",onClick:n[2]||(n[2]=o=>t.copy_text(t.postcode))}))]),_:1},8,["modelValue"])])]),_:1}),l(b,null,{default:r(()=>[e("div",null,[Xe,(f(!0),S(X,null,K(t.weblinks,o=>(f(),S("div",{key:o},[i(s(o.label)+" ",1),l(A,{round:"",color:"primary",icon:"delete",onClick:c=>t.delweblink(o.id)},null,8,["onClick"])]))),128)),l(A,{round:"",color:"primary",icon:"add",onClick:t.addweblink},null,8,["onClick"])])]),_:1})]),_:1})):R("",!0)}var xe=w(Ye,[["render",Ze]]);const ta=y({name:"CalcBrrToFlip",components:{GdvCard:at,PurchasePrice:lt,RefurbCost:nt,StampDuty:st,OtherCosts:rt,DealSummary:Dt,Finance:ot,Vision:ht,DealRating:He,Refinance:yt,DealBasicInfo:xe},data(){return{isMounted:!1,purchaserange:{min:18e4,max:19e4}}},computed:{is_valid_input(){return this.isMounted?!(!this.$refs.PurchasePrice.isValid||!this.$refs.GdvCard.isValid):!0},deal_summary_final_bal(){return this.isMounted?this.$refs.DealSummary.final_bal:{best:0,worst:0}},finance_refinance(){return this.isMounted?this.$refs.Refinance.get_refinance:{userefinance:!1,ltv:{min:75,max:75}}},finance_totalmoneyneeded(){return this.isMounted?this.$refs.Finance.totalmoneyneeded:{best:0,worst:0}},finance_in_items(){return this.isMounted?this.$refs.Finance.finance_in_items:[]},finance_during_items(){return this.isMounted?this.$refs.Finance.finance_during_items:[]},finance_out_items(){return this.isMounted?this.$refs.Finance.finance_out_items:[]},refinance_out_items(){return this.isMounted?this.$refs.Refinance.refinance_out_items:[]},purchase_items(){return this.isMounted?this.$refs.PurchasePrice.purchase_items:[]},stampduty_items(){return this.isMounted?this.$refs.StampDuty.stampduty_items:[]},othercosts_items(){return this.isMounted?this.$refs.OtherCosts.othercosts_items:[]},refurb_cost_items(){return this.isMounted?this.$refs.RefurbCost.refurb_cost_items:[]},refurb_cost_total(){return this.isMounted?this.$refs.RefurbCost.refurb_cost_total:[]},refurbmonths(){return this.isMounted?this.$refs.RefurbCost.refurbmonths:[]},stampduty_total(){return this.isMounted?this.$refs.StampDuty.stampduty:[]},othercosts_total(){return this.isMounted?this.$refs.OtherCosts.total:[]},gdv_total(){return this.isMounted?this.$refs.GdvCard.total:[]}},mounted(){const t=this;setTimeout(function(){t.isMounted=!0},5)}}),ea={class:"main-page fit col wrap justify-center items-center content-center"},aa=e("h1",null,"Buy Refurbish Rent Refinance Calculator",-1),la=e("div",null,"This calculator can be used for calculating deal information for a Buy, Refurbish, Rent, Refinance project (BRRR). You can use this page to perform these calculations.",-1),na={class:"row"};function sa(t,n,a,u,d,m){const o=_("DealBasicInfo"),c=_("Vision"),k=_("GdvCard"),v=_("PurchasePrice"),C=_("RefurbCost"),B=_("StampDuty"),M=_("OtherCosts"),q=_("Finance"),E=_("Refinance"),j=_("DealSummary"),N=_("DealRating");return f(),p(G,{class:"flex flex-center"},{default:r(()=>[e("div",ea,[aa,la,e("div",na,[l(o,{ref:"DealBasicInfo"},null,512),l(c,{ref:"Vision"},null,512),l(k,{ref:"GdvCard"},null,512),l(v,{ref:"PurchasePrice",purchaserange:t.purchaserange,"onUpdate:purchaserange":n[0]||(n[0]=U=>t.purchaserange=U)},null,8,["purchaserange"]),l(C,{ref:"RefurbCost"},null,512),l(B,{ref:"StampDuty",purchaserange:t.purchaserange},null,8,["purchaserange"]),l(M,{ref:"OtherCosts",purchaserange:t.purchaserange},null,8,["purchaserange"]),l(q,{ref:"Finance",purchaserange:t.purchaserange,refurb_cost_total:t.refurb_cost_total,stampduty_total:t.stampduty_total,othercosts_total:t.othercosts_total,refurbmonths:t.refurbmonths,gdv_total:t.gdv_total},null,8,["purchaserange","refurb_cost_total","stampduty_total","othercosts_total","refurbmonths","gdv_total"]),l(E,{ref:"Refinance",gdv_total:t.gdv_total},null,8,["gdv_total"]),l(j,{ref:"DealSummary",purchaserange:t.purchaserange,finance_in_items:t.finance_in_items,finance_out_items:t.finance_out_items,finance_during_items:t.finance_during_items,refinance_out_items:t.refinance_out_items,purchase_items:t.purchase_items,stampduty_items:t.stampduty_items,othercosts_items:t.othercosts_items,refurb_cost_items:t.refurb_cost_items,gdv_total:t.gdv_total,refurbmonths:t.refurbmonths,is_valid_input:t.is_valid_input},null,8,["purchaserange","finance_in_items","finance_out_items","finance_during_items","refinance_out_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","is_valid_input"]),l(N,{ref:"DealRating",purchaserange:t.purchaserange,finance_totalmoneyneeded:t.finance_totalmoneyneeded,deal_summary_final_bal:t.deal_summary_final_bal,finance_refinance:t.finance_refinance,gdv_total:t.gdv_total,refurbmonths:t.refurbmonths,stampduty_total:t.stampduty_total,othercosts_total:t.othercosts_total,refurb_cost_total:t.refurb_cost_total,is_valid_input:t.is_valid_input},null,8,["purchaserange","finance_totalmoneyneeded","deal_summary_final_bal","finance_refinance","gdv_total","refurbmonths","stampduty_total","othercosts_total","refurb_cost_total","is_valid_input"])])])]),_:1})}var ha=w(ta,[["render",sa]]);export{ha as default};
