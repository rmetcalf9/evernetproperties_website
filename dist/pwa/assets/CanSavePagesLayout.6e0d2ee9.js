import{Q as y,a as w}from"./QToolbar.1459c80b.js";import{c as b,Q as k,a as P,b as C,d as L,_ as h}from"./main_logo.eb6da30f.js";import{Q as _}from"./QPage.2982b404.js";import{Q as T,_ as A}from"./PIMS Logo White.e456fa20.js";import{_ as Q,d as S,P as d,N as x,r as m,o as s,c as N,w as o,a as n,e as t,f as r,g as a,h as E,F as j,aq as c,t as u}from"./index.eaa801da.js";import{u as B}from"./backend_connection.d36127ff.js";import"./position-engine.986add74.js";import"./axios.6e1fcf85.js";const D=S({name:"MainLayout",setup(){return{backend_connection_store:B()}},data(){return{menu_items:b.get_menu_items(),page_to_show:"waiting"}},computed:{copyright(){return"\xA9 "+new Date().getFullYear()+" All Right Reserved"},connectionState(){return this.backend_connection_store.connectionStateString},isLoggedin(){return this.backend_connection_store.isLoggedin},security_role_cansave(){return this.backend_connection_store.security_role_cansave}},methods:{notifyAccept(){d.set("cookiesAccepted","true",{secure:!window.location.href.includes("localhost"),expires:180})},navigateToDataAndPrivacy(){this.$router.push("/privacy")},hasAcceptedCookie(){if(!d.has("cookiesAccepted"))return!1;var e=d.get("cookiesAccepted");return typeof e=="undefined"?!1:e==="true"},cookiePopup(){var e=this;this.hasAcceptedCookie()||x.create({color:"bg-grey-2",message:'By clicking \u201CAccept\u201D, you agree to the storing of cookies on your device to enhance site navigation, analyze site usage, and assist in our marketing efforts. Some of these may be "third party cookies".',timeout:0,actions:[{label:"View Privacy Policy",color:"primary",handler:e.navigateToDataAndPrivacy},{label:"Accept",color:"white",handler:e.notifyAccept}]})}},mounted(){const e=this,p={ok:function(i){e.page_to_show="loggedin"},error:function(i){e.page_to_show="noconnection"}},g={ok:function(i){e.isLoggedin?e.page_to_show="loggedin":e.backend_connection_store.login(p,e.$rjmgclientid)},error:function(i){e.page_to_show="noconnection"}};e.page_to_show="waiting",e.backend_connection_store.connect(g),e.cookiePopup()}}),$={class:"row no-wrap justify-start items-center content-start"},F=t("img",{class:"main-logo",alt:"Evernet properties logo",src:h},null,-1),V={class:"column no-wrap justify-start items-center content-start"},M=t("div",null," We find properties ",-1),R={class:"sub-toolbar bg-grey-5 fit row no-wrap justify-center items-center content-start"},H={class:"child_page_class"},O={key:0},q=t("h1",null,"Please wait...",-1),z={key:1},I=t("h1",null,"No Connection to server",-1),W={key:2},Y=t("h1",null,"TODO Login button",-1),G={key:3},J=t("div",{class:"bottom-sub-toolbar bg-grey-5 fit column wrap justify-center items-center content-center text-white"},[t("img",{alt:"PIMS Logo",src:A,class:"pims-logo"}),r("Membership number 34541 (Robert Metcalf) "),t("img",{class:"bottom-logo",alt:"Evernet properties logo",src:h}),t("div",null,"Evernet Properties Limited | Company Number: 15345182 | Company registered office : 86-90, Paul Street, London EC2A 4NE")],-1),K={class:"footer row"},U={class:"left_footer col-grow"},X={class:"right_footer"};function Z(e,p,g,i,ee,te){const f=m("router-link"),v=m("router-view");return s(),N(k,{view:"lHh Lpr lFf"},{default:o(()=>[n(P,{elevated:"",class:"bg-grey-7 text-white"},{default:o(()=>[n(y,{class:"main-toolbar column no-wrap justify-start items-center content-start"},{default:o(()=>[t("div",$,[F,t("div",V,[n(w,null,{default:o(()=>[r(" Evernet Properties Limited ")]),_:1}),M])])]),_:1}),t("div",R,[(s(!0),a(j,null,E(e.menu_items,l=>(s(),a("div",{key:l.name},[n(f,{to:l.target,class:"toolbar"},{default:o(()=>[r(u(l.name),1)]),_:2},1032,["to"])]))),128))])]),_:1}),n(C,null,{default:o(()=>[t("div",H,[e.page_to_show==="waiting"?(s(),a("div",O,[n(_,{class:"flex flex-center"},{default:o(()=>[q]),_:1})])):c("",!0),e.page_to_show==="noconnection"?(s(),a("div",z,[n(_,{class:"flex flex-center"},{default:o(()=>[I]),_:1})])):c("",!0),e.page_to_show==="connected"?(s(),a("div",W,[n(_,{class:"flex flex-center"},{default:o(()=>[Y]),_:1})])):c("",!0),e.page_to_show==="loggedin"?(s(),a("div",G,[n(v)])):c("",!0)]),J]),_:1}),n(L,{elevated:"",class:"bg-grey-7 text-white"},{default:o(()=>[t("div",K,[t("div",U,[n(f,{to:"/privacy",class:"toolbar"},{default:o(()=>[r("Privacy Policy")]),_:1})]),t("div",X,[r(u(e.copyright)+" ",1),n(T,null,{default:o(()=>[t("table",null,[t("tr",null,[t("td",null,"Connection: "+u(e.connectionState),1)])])]),_:1})])])]),_:1})]),_:1})}var _e=Q(D,[["render",Z]]);export{_e as default};
