import{_ as g,d as f,N as h,o as d,c as m,w as v,e as t,t as r,a as y,Q as p,K as L,L as k}from"./index.f52b62e1.js";import{Q as x}from"./QPage.e9a97261.js";function l({attemptsRemaining:o,bestAttemptSoFar:e,callback:a,allowLowAccuracy:s}){var n=8e3,i=!0,u=0;if(typeof s=="undefined"&&(s=!1),s&&(o=1,n=void 0,i=!1,u=void 0),e.coords.accuracy<11&&(o=0),o===0){var _={coords:{latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed,heading:e.coords.heading,altitude:e.coords.altitude,accuracy:e.coords.accuracy,altitudeAccuracy:e.coords.altitudeAccuracy},timestamp:e.timestamp};a.ok(_);return}navigator.geolocation.getCurrentPosition(c=>{c.coords.accuracy<e.coords.accuracy&&(e=c),l({attemptsRemaining:o-1,bestAttemptSoFar:e,callback:a})},c=>{a.error(c)},{maximumAge:u,timeout:n,enableHighAccuracy:i})}var B={getLocation:l};const N=f({name:"ToolsLocationPage",components:{},data(){return{status:0,error_message:"",cur_location:{}}},computed:{status_text(){return this.status===0?"Initial":this.status===1?"Finding Location...":this.status===2?"Failed to find location - "+this.error_message:this.status===3?"Location Found":this.status===4?"Postcode Found":"Unknown"}},methods:{rescan(){this.status=1;var o={coords:{accuracy:99999}},e={ok:this.rescan_positive,error:this.rescan_negative};B.getLocation({attemptsRemaining:4,bestAttemptSoFar:o,callback:e,allowLowAccuracy:!1})},rescan_positive(o){this.status=3,this.cur_location=o,console.log("positive response",o)},rescan_negative(o){this.status=2,this.error_message=o.message,console.log("rescan_negative",o),h.create({color:"bg-grey-2",message:"Failed to access location services",timeout:2e3,color:"negative"})}},mounted(){this.rescan()}}),C={class:"cols"},P=t("h1",null,"Location Scanner",-1),Q=t("td",null,"Status:",-1),$={key:0},V=t("td",null,"Location:",-1),H=t("td",null,null,-1);function w(o,e,a,s,n,i){return d(),m(x,{class:"flex flex-center locationpage-main"},{default:v(()=>[t("div",C,[P,t("table",null,[t("tr",null,[Q,t("td",null,r(o.status_text),1),t("td",null,[y(p,{round:"",color:"primary",icon:"refresh"})])]),o.status>2?(d(),L("tr",$,[V,t("td",null,r(o.cur_location.coords.latitude)+", "+r(o.cur_location.coords.longitude),1),H])):k("",!0)])])]),_:1})}var I=g(N,[["render",w]]);export{I as default};
