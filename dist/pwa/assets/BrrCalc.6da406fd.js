import{i as kt,h as Te,ar as Xe,j as W,k as C,n as Ze,B as $t,an as de,as as St,q as b,$ as Fe,a3 as Ct,at as Tt,a7 as _e,A as qt,u as xe,au as Pt,al as Bt,g as fe,S as qe,T as Oe,m as ve,v as Rt,a8 as jt,a9 as At,x as et,d as V,_ as D,o as h,K as R,a as o,ae as U,w as d,af as Y,ag as I,e as s,ad as J,av as tt,aw as at,r as $,c as P,f as k,ax as rt,t as _,aq as B,N as Z,L as Re,M as je,am as be,ay as Pe,az as It,ao as Ue}from"./index.f98cf0b6.js";import{Q as Mt}from"./QResizeObserver.2669055c.js";import{r as zt,Q as Vt,a as Q,b as ne,c as Dt,d as Lt}from"./QTable.d403a077.js";import{Q as Et}from"./QPage.572918db.js";import{C as st}from"./ClosePopup.c385860c.js";import{Q as Nt,I as nt,F as Ft,G as Ot,P as Ut,R as Wt,S as Qt,O as Gt,a as Ht}from"./FeatureTable.58b1fd37.js";import{u as ce}from"./utils.7bd545ec.js";import{Q as Kt}from"./QExpansionItem.12030ffd.js";import{u as Jt}from"./utils.5f33790e.js";import{u as ye}from"./backend_connection.6fce82e2.js";import{W as we}from"./Workflow_main.5fb27a38.js";import"./QItemLabel.8c51a593.js";import"./position-engine.227f3c27.js";import"./axios.6e1fcf85.js";let Yt=0;const Xt=["click","keydown"],Zt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Yt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function xt(e,t,n,a){const r=kt(Xe,Te);if(r===Te)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Te;const{proxy:i}=xe(),l=W(null),u=W(null),p=W(null),L=C(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),y=C(()=>r.currentModel.value===e.name),z=C(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(y.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(a!==void 0?a.linkClass.value:"")),j=C(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),S=C(()=>e.disable===!0||r.hasFocus.value===!0||y.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function F(g,E){if(E!==!0&&l.value!==null&&l.value.focus(),e.disable===!0){a!==void 0&&a.hasRouterLink.value===!0&&Fe(g);return}if(a===void 0){r.updateModel({name:e.name}),n("click",g);return}if(a.hasRouterLink.value===!0){const O=(A={})=>{let G;const K=A.to===void 0||Pt(A.to,e.to)===!0?r.avoidRouteWatcher=Bt():null;return a.navigateToRouterLink(g,{...A,returnRouterError:!0}).catch(se=>{G=se}).then(se=>{if(K===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,G===void 0&&(se===void 0||se.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:e.name})),A.returnRouterError===!0)return G!==void 0?Promise.reject(G):se})};n("click",g,O),g.defaultPrevented!==!0&&O();return}n("click",g)}function H(g){Ct(g,[13,32])?F(g,!0):Tt(g)!==!0&&g.keyCode>=35&&g.keyCode<=40&&g.altKey!==!0&&g.metaKey!==!0&&r.onKbdNavigate(g.keyCode,i.$el)===!0&&Fe(g),n("keydown",g)}function re(){const g=r.tabProps.value.narrowIndicator,E=[],O=b("div",{ref:p,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&E.push(b(_e,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&E.push(b("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&E.push(e.alertIcon!==void 0?b(_e,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):b("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),g===!0&&E.push(O);const A=[b("div",{class:"q-focus-helper",tabindex:-1,ref:l}),b("div",{class:j.value},qt(t.default,E))];return g===!1&&A.push(O),A}const x={name:C(()=>e.name),rootRef:u,tabIndicatorRef:p,routeData:a};Ze(()=>{r.unregisterTab(x)}),$t(()=>{r.registerTab(x)});function oe(g,E){const O={ref:u,class:z.value,tabindex:S.value,role:"tab","aria-selected":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:F,onKeydown:H,...E};return de(b(g,O,re()),[[St,L.value]])}return{renderTab:oe,$tabs:r}}var We=fe({name:"QTab",props:Zt,emits:Xt,setup(e,{slots:t,emit:n}){const{renderTab:a}=xt(e,t,n);return()=>a("div")}});function ea(e,t,n){const a=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?a[0]:a[1]}${e?` text-${e}`:""}`}const ta=["left","center","right","justify"];var aa=fe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>ta.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:a}=xe(),{$q:r}=a,{registerTick:i}=qe(),{registerTick:l}=qe(),{registerTick:u}=qe(),{registerTimeout:p,removeTimeout:L}=Oe(),{registerTimeout:y,removeTimeout:z}=Oe(),j=W(null),S=W(null),F=W(e.modelValue),H=W(!1),re=W(!0),x=W(!1),oe=W(!1),g=[],E=W(0),O=W(!1);let A=null,G=null,K;const se=C(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ea(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),lt=C(()=>{const c=E.value,f=F.value;for(let m=0;m<c;m++)if(g[m].name.value===f)return!0;return!1}),it=C(()=>`q-tabs__content--align-${H.value===!0?"left":oe.value===!0?"justify":e.align}`),ct=C(()=>`q-tabs row no-wrap items-center q-tabs--${H.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ut=C(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+it.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),he=C(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),me=C(()=>e.vertical!==!0&&r.lang.rtl===!0),ke=C(()=>zt===!1&&me.value===!0);ve(me,ie),ve(()=>e.modelValue,c=>{$e({name:c,setCurrent:!0,skipEmit:!0})}),ve(()=>e.outsideArrows,pe);function $e({name:c,setCurrent:f,skipEmit:m}){F.value!==c&&(m!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",c),(f===!0||e["onUpdate:modelValue"]===void 0)&&(dt(F.value,c),F.value=c))}function pe(){i(()=>{Ae({width:j.value.offsetWidth,height:j.value.offsetHeight})})}function Ae(c){if(he.value===void 0||S.value===null)return;const f=c[he.value.container],m=Math.min(S.value[he.value.scroll],Array.prototype.reduce.call(S.value.children,(q,w)=>q+(w[he.value.content]||0),0)),T=f>0&&m>f;H.value=T,T===!0&&l(ie),oe.value=f<parseInt(e.breakpoint,10)}function dt(c,f){const m=c!=null&&c!==""?g.find(q=>q.name.value===c):null,T=f!=null&&f!==""?g.find(q=>q.name.value===f):null;if(m&&T){const q=m.tabIndicatorRef.value,w=T.tabIndicatorRef.value;A!==null&&(clearTimeout(A),A=null),q.style.transition="none",q.style.transform="none",w.style.transition="none",w.style.transform="none";const v=q.getBoundingClientRect(),N=w.getBoundingClientRect();w.style.transform=e.vertical===!0?`translate3d(0,${v.top-N.top}px,0) scale3d(1,${N.height?v.height/N.height:1},1)`:`translate3d(${v.left-N.left}px,0,0) scale3d(${N.width?v.width/N.width:1},1,1)`,u(()=>{A=setTimeout(()=>{A=null,w.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",w.style.transform="none"},70)})}T&&H.value===!0&&le(T.rootRef.value)}function le(c){const{left:f,width:m,top:T,height:q}=S.value.getBoundingClientRect(),w=c.getBoundingClientRect();let v=e.vertical===!0?w.top-T:w.left-f;if(v<0){S.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(v),ie();return}v+=e.vertical===!0?w.height-q:w.width-m,v>0&&(S.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(v),ie())}function ie(){const c=S.value;if(c===null)return;const f=c.getBoundingClientRect(),m=e.vertical===!0?c.scrollTop:Math.abs(c.scrollLeft);me.value===!0?(re.value=Math.ceil(m+f.width)<c.scrollWidth-1,x.value=m>0):(re.value=m>0,x.value=e.vertical===!0?Math.ceil(m+f.height)<c.scrollHeight:Math.ceil(m+f.width)<c.scrollWidth)}function Ie(c){G!==null&&clearInterval(G),G=setInterval(()=>{ht(c)===!0&&ee()},5)}function Me(){Ie(ke.value===!0?Number.MAX_SAFE_INTEGER:0)}function ze(){Ie(ke.value===!0?0:Number.MAX_SAFE_INTEGER)}function ee(){G!==null&&(clearInterval(G),G=null)}function _t(c,f){const m=Array.prototype.filter.call(S.value.children,N=>N===f||N.matches&&N.matches(".q-tab.q-focusable")===!0),T=m.length;if(T===0)return;if(c===36)return le(m[0]),m[0].focus(),!0;if(c===35)return le(m[T-1]),m[T-1].focus(),!0;const q=c===(e.vertical===!0?38:37),w=c===(e.vertical===!0?40:39),v=q===!0?-1:w===!0?1:void 0;if(v!==void 0){const N=me.value===!0?-1:1,X=m.indexOf(f)+v*N;return X>=0&&X<T&&(le(m[X]),m[X].focus({preventScroll:!0})),!0}}const ft=C(()=>ke.value===!0?{get:c=>Math.abs(c.scrollLeft),set:(c,f)=>{c.scrollLeft=-f}}:e.vertical===!0?{get:c=>c.scrollTop,set:(c,f)=>{c.scrollTop=f}}:{get:c=>c.scrollLeft,set:(c,f)=>{c.scrollLeft=f}});function ht(c){const f=S.value,{get:m,set:T}=ft.value;let q=!1,w=m(f);const v=c<w?-1:1;return w+=v*5,w<0?(q=!0,w=0):(v===-1&&w<=c||v===1&&w>=c)&&(q=!0,w=c),T(f,w),ie(),q}function Ve(c,f){for(const m in c)if(c[m]!==f[m])return!1;return!0}function mt(){let c=null,f={matchedLen:0,queryDiff:9999,hrefLen:0};const m=g.filter(v=>v.routeData!==void 0&&v.routeData.hasRouterLink.value===!0),{hash:T,query:q}=a.$route,w=Object.keys(q).length;for(const v of m){const N=v.routeData.exact.value===!0;if(v.routeData[N===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:X,query:Se,matched:wt,href:yt}=v.routeData.resolvedLink.value,Ce=Object.keys(Se).length;if(N===!0){if(X!==T||Ce!==w||Ve(q,Se)===!1)continue;c=v.name.value;break}if(X!==""&&X!==T||Ce!==0&&Ve(Se,q)===!1)continue;const te={matchedLen:wt.length,queryDiff:w-Ce,hrefLen:yt.length-X.length};if(te.matchedLen>f.matchedLen){c=v.name.value,f=te;continue}else if(te.matchedLen!==f.matchedLen)continue;if(te.queryDiff<f.queryDiff)c=v.name.value,f=te;else if(te.queryDiff!==f.queryDiff)continue;te.hrefLen>f.hrefLen&&(c=v.name.value,f=te)}c===null&&g.some(v=>v.routeData===void 0&&v.name.value===F.value)===!0||$e({name:c,setCurrent:!0})}function pt(c){if(L(),O.value!==!0&&j.value!==null&&c.target&&typeof c.target.closest=="function"){const f=c.target.closest(".q-tab");f&&j.value.contains(f)===!0&&(O.value=!0,H.value===!0&&le(f))}}function gt(){p(()=>{O.value=!1},30)}function ge(){Le.avoidRouteWatcher===!1?y(mt):z()}function De(){if(K===void 0){const c=ve(()=>a.$route.fullPath,ge);K=()=>{c(),K=void 0}}}function vt(c){g.push(c),E.value++,pe(),c.routeData===void 0||a.$route===void 0?y(()=>{if(H.value===!0){const f=F.value,m=f!=null&&f!==""?g.find(T=>T.name.value===f):null;m&&le(m.rootRef.value)}}):(De(),c.routeData.hasRouterLink.value===!0&&ge())}function bt(c){g.splice(g.indexOf(c),1),E.value--,pe(),K!==void 0&&c.routeData!==void 0&&(g.every(f=>f.routeData===void 0)===!0&&K(),ge())}const Le={currentModel:F,tabProps:se,hasFocus:O,hasActiveTab:lt,registerTab:vt,unregisterTab:bt,verifyRouteModel:ge,updateModel:$e,onKbdNavigate:_t,avoidRouteWatcher:!1};Rt(Xe,Le);function Ee(){A!==null&&clearTimeout(A),ee(),K!==void 0&&K()}let Ne;return Ze(Ee),jt(()=>{Ne=K!==void 0,Ee()}),At(()=>{Ne===!0&&De(),pe()}),()=>b("div",{ref:j,class:ct.value,role:"tablist",onFocusin:pt,onFocusout:gt},[b(Mt,{onResize:Ae}),b("div",{ref:S,class:ut.value,onScroll:ie},et(t.default)),b(_e,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(re.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Me,onTouchstartPassive:Me,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee}),b(_e,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(x.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ze,onTouchstartPassive:ze,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee})])}});const ra=b("div",{class:"q-space"});var sa=fe({name:"QSpace",setup(){return()=>ra}});const na=V({name:"BrrCalcToolbarCallSellingAgent",emits:["activity_log"],data(){return{dialog_visible:W(!1),spoke_to:"",notes:""}},computed:{isDisabled(){return this.spoke_to.length<1||this.notes<3}},methods:{open_dialog(){this.dialog_visible=!0,this.spoke_to="",this.notes=""},click_selling_agent_btn(){const e={type:"call_agent",text:"Called selling agent spoke to ("+this.spoke_to+") - "+this.notes,head_notes:void 0};this.$emit("activity_log",e),this.dialog_visible=!1}}}),oa={class:"brrcalctoolbar"},la=s("div",{class:"text-h6"},"Log call with selling agent",-1);function ia(e,t,n,a,r,i){return h(),R("div",oa,[o(U,{color:"primary",icon:"call",label:"Selling agent",onClick:e.open_dialog},null,8,["onClick"]),o(at,{modelValue:e.dialog_visible,"onUpdate:modelValue":t[3]||(t[3]=l=>e.dialog_visible=l)},{default:d(()=>[o(Y,null,{default:d(()=>[o(I,{class:"row items-center q-pb-none"},{default:d(()=>[la,o(sa),de(o(U,{icon:"close",flat:"",round:"",dense:""},null,512),[[st]])]),_:1}),o(I,null,{default:d(()=>[s("div",null,[o(J,{filled:"",clearable:"",modelValue:e.spoke_to,"onUpdate:modelValue":t[0]||(t[0]=l=>e.spoke_to=l),label:"Spoke to",rules:[l=>l.length>2||"Too short"]},null,8,["modelValue","rules"])]),s("div",null,[o(J,{filled:"",autogrow:"",modelValue:e.notes,"onUpdate:modelValue":t[1]||(t[1]=l=>e.notes=l),label:"Notes",rules:[l=>l.length>2||"Too short"]},null,8,["modelValue","rules"])]),o(tt,{align:"right",class:"text-primary"},{default:d(()=>[o(U,{icon:"call",label:"Cancel",onClick:t[2]||(t[2]=l=>this.dialog_visible=!1)}),o(U,{color:"primary",icon:"call",label:"Save",onClick:e.click_selling_agent_btn,disable:e.isDisabled},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ca=D(na,[["render",ia]]);const ua=V({name:"BrrCalcToolbarSaveButton",props:["reason_project_not_savable"],emits:["saveproject"],data(){return{changed:!1,autosave_seconds_left:60,ever_saved:!1,save_in_progress:!1,save_monitor_function_running:!1}},computed:{no_save_message(){return this.reason_project_not_savable!==""?this.reason_project_not_savable:this.save_in_progress?"Saving...":""},can_save(){return this.save_in_progress?!1:!!this.changed},save_btn_text(){return this.no_save_message!==""?"Not able to save ("+this.no_save_message+")":this.changed?this.autosave_seconds_left===-1?"Save Now":"Save now (auto save in "+this.autosave_seconds_left+")":this.ever_saved?"Saved":"Not able to save (No changes)"}},methods:{serializer_load_data(e){this.ever_saved=!0},click_btn(){this.autosave_seconds_left=-1,this.save_now()},set_changed_true(){this.changed=!0,this.no_save_message===""&&(this.autosave_seconds_left=5,this.start_save_monitor_function())},start_save_monitor_function(){this.save_monitor_function_running||this.save_monitor_function()},save_monitor_function(){if(this.save_monitor_function_running=!0,this.save_in_progress)return;if(this.autosave_seconds_left===-1){this.save_monitor_function_running=!1;return}const e=this;if(e.autosave_seconds_left=e.autosave_seconds_left-1,e.autosave_seconds_left<1){this.save_monitor_function_running=!1,this.save_now();return}setTimeout(e.save_monitor_function,1e3)},save_now(){!this.can_save||(this.save_in_progress=!0,this.$emit("saveproject"))},save_project_complete_notification({success:e,response:t}){console.log("SaveButton - Save completed notification recieved"),this.save_in_progress=!1,e?(this.changed=!1,this.ever_saved=!0):this.autosave_seconds_left=-1}}}),da={class:"brrcalctoolbar"};function _a(e,t,n,a,r,i){return h(),R("div",da,[o(U,{color:"primary",icon:"save",label:e.save_btn_text,onClick:e.click_btn},null,8,["label","onClick"])])}var fa=D(ua,[["render",_a]]);const ha=V({name:"BrrCalcToolbar",props:["reason_project_not_savable"],emits:["activity_log","saveproject"],components:{CallSellingAgent:ca,SaveButton:fa},data(){return{}},computed:{ever_saved(){return this.$refs.SaveToolbar.ever_saved}},methods:{set_changed_true(){this.$refs.SaveToolbar.set_changed_true()},save_project_complete_notification(e){this.$refs.SaveToolbar.save_project_complete_notification(e)},serializer_load_data(e){this.$refs.SaveToolbar.serializer_load_data(e)}}}),ma={class:"row brrcalctoolbar"};function pa(e,t,n,a,r,i){const l=$("SaveButton"),u=$("CallSellingAgent");return h(),R("div",ma,[o(l,{ref:"SaveToolbar",onSaveproject:t[0]||(t[0]=p=>e.$emit("saveproject")),reason_project_not_savable:e.reason_project_not_savable},null,8,["reason_project_not_savable"]),o(u,{onActivity_log:t[1]||(t[1]=p=>e.$emit("activity_log",p))})])}var ga=D(ha,[["render",pa]]);const va=V({name:"BrrCalcVision",emits:["projectchanged"],data(){return{devplan:"",emit_project_change_notification:!0}},computed:{serializer_card_data(){return{devplan:this.devplan}}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Vision")}},methods:{helpdevplan(){this.$q.dialog({title:"What is the development plan?",message:"Enter the development plan. E.g. Split into two flats"}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.devplan=e.devplan;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}}}),ba=s("div",{class:"text-h6"},"Vision",-1),wa={class:"row"};function ya(e,t,n,a,r,i){return h(),P(Y,{inline:"",class:"q-ma-sm card-style"},{default:d(()=>[o(I,null,{default:d(()=>[ba,s("div",wa,[o(J,{modelValue:e.devplan,"onUpdate:modelValue":t[0]||(t[0]=l=>e.devplan=l),label:"What is the development plan?",class:"col-grow"},null,8,["modelValue"]),o(U,{round:"",color:"primary",icon:"info",onClick:e.helpdevplan},null,8,["onClick"])])]),_:1})]),_:1})}var ka=D(va,[["render",ya]]);const $a=V({name:"BrrCalcFinance",emits:["projectchanged"],props:["gdv_total"],data(){return{refinance:{userefinance:!0,ltv:{min:75,max:75}},emit_project_change_notification:!0}},methods:{format_currency(e){return ce.format_currency(e)},serializer_load_data(e){this.emit_project_change_notification=!1,this.refinance.userefinance=e.refinance_userefinance,this.refinance.ltv=e.refinance_userefinance_ltv;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Refinance")}},computed:{serializer_card_data(){return{refinance_userefinance:this.refinance.userefinance,refinance_userefinance_ltv:this.refinance.ltv}},get_refinance(){return this.refinance},refinanceamount(){return{worst:this.gdv_total.min*(this.refinance.ltv.min/100),best:this.gdv_total.max*(this.refinance.ltv.max/100)}},refinance_out_items(){let e=[];return this.refinance.userefinance&&e.push({name:"Mortgage Refinance",worst:this.refinanceamount.worst,best:this.refinanceamount.best}),e}}}),Sa=s("div",{class:"text-h6"},"Refinance",-1),Ca={key:0};function Ta(e,t,n,a,r,i){return h(),P(Y,{inline:"",class:"q-ma-sm card-style"},{default:d(()=>[o(I,null,{default:d(()=>[Sa,k(" This section is for adding refinance details. After the refurbishment is complete the refinance stage can be used to pull money out of the deal. "),o(rt,{modelValue:e.refinance.userefinance,"onUpdate:modelValue":t[0]||(t[0]=l=>e.refinance.userefinance=l),label:"Refinance after refurbishment"},null,8,["modelValue"]),e.refinance.userefinance?(h(),R("div",Ca,[k(" Refinance LTV "+_(e.refinance.ltv.min)+"% - "+_(e.refinance.ltv.max)+"% ",1),o(Nt,{modelValue:e.refinance.ltv,"onUpdate:modelValue":t[1]||(t[1]=l=>e.refinance.ltv=l),min:0,max:100,step:5,"thumb-size":"40px","drag-range":"",label:"","left-label-value":e.refinance.ltv.min+"%","right-label-value":e.refinance.ltv.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),s("div",null,"Refinance amount: "+_(e.format_currency(e.refinanceamount.worst))+" - "+_(e.format_currency(e.refinanceamount.best)),1)])):B("",!0)]),_:1})]),_:1})}var qa=D($a,[["render",Ta]]),ue=fe({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const n=C(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>b("tr",{class:n.value},et(t.default))}});function ot(e){return e.filter(function(t){return t.type==="ledger"})}function Be(e,t){e.push({type:"blank",key:e.length}),e.push({type:"title",key:e.length,name:t})}function ae(e,t,n,a){let r=ot(e);var i=void 0,l=void 0;r.length>0&&(i=r[r.length-1].worst,l=r[r.length-1].best);function u(p,L){var y=0;typeof p!="undefined"&&(y=p.bal);var z="",j="";return L>0?z=L:j=L,{in:z,out:j,bal:y+L}}e.push({type:"ledger",key:e.length,name:t,worst:u(i,n),best:u(l,a)})}const Pa=V({name:"BrrCalcDealSummary",props:["is_valid_input","purchaserange","finance_in_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","finance_out_items","refinance_out_items","finance_during_items"],components:{InvalidMessage:nt},data(){return{table:{columns:[{name:"item",label:"Item",field:"item"},{name:"win",label:"In",field:"win"},{name:"wout",label:"Out",field:"wout"},{name:"wbal",label:"Balance",field:"wbal"},{name:"bin",label:"In",field:"bin"},{name:"bout",label:"Out",field:"bout"},{name:"bbal",label:"Balance",field:"bbal"}]}}},methods:{format_currency(e){return typeof e=="string"&&e===""?"":ce.format_currency(e)}},computed:{final_bal(){let e=ot(this.items);return e.length===0?{worst:0,best:0}:{worst:e[e.length-1].worst.bal,best:e[e.length-1].best.bal}},money_in(){var e=this.finance_in_items.reduce((n,a)=>n+a.worst,0),t=this.finance_in_items.reduce((n,a)=>n+a.best,0);return{worst:e,best:t}},items(){var e=[];typeof this.finance_in_items!="undefined"&&this.finance_in_items.map(function(n){ae(e,n.name,n.worst,n.best)}),typeof this.purchase_items!="undefined"&&this.purchase_items.map(function(n){ae(e,n.name,n.worst,n.best)}),typeof this.stampduty_items!="undefined"&&this.stampduty_items.map(function(n){ae(e,n.name,n.worst,n.best)}),typeof this.othercosts_items!="undefined"&&this.othercosts_items.map(function(n){ae(e,n.name,n.worst,n.best)}),Be(e,"During Project"),typeof this.finance_during_items!="undefined"&&this.finance_during_items.map(function(n){ae(e,n.name,n.worst,n.best)}),typeof this.refurb_cost_items!="undefined"&&this.refurb_cost_items.map(function(n){ae(e,n.name,n.worst,n.best)});let t=!1;return typeof this.refinance_out_items!="undefined"&&(this.refinance_out_items.length>0&&(t=!0,Be(e,"Exit finance")),this.refinance_out_items.map(function(n){ae(e,n.name,n.worst,n.best)})),typeof this.finance_out_items!="undefined"&&(this.finance_out_items.length>0&&(t||Be(e,"Exit finance")),this.finance_out_items.map(function(n){ae(e,n.name,n.worst,n.best)})),e}}}),Ba=s("div",{class:"text-h6"},"Cashflow Summary",-1),Ra=s("div",{class:"text-subtitle2"},"This section gives a break down of money in and out of the deal. It is broken down twice, for best and worst case figures.",-1),ja=s("div",null," \xA0 ",-1);function Aa(e,t,n,a,r,i){const l=$("InvalidMessage");return h(),P(Y,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:d(()=>[o(I,null,{default:d(()=>[Ba,Ra]),_:1}),o(I,null,{default:d(()=>[o(l,{is_valid_input:e.is_valid_input},null,8,["is_valid_input"]),s("div",null,[o(Vt,{columns:e.table.columns,rows:e.items,"hide-bottom":"","rows-per-page-options":[100]},{header:d(u=>[o(ue,null,{default:d(()=>[o(Q),o(Q,{colspan:"3",class:"worstcasetablecell"},{default:d(()=>[k("Worst Case")]),_:1}),o(Q,{colspan:"3"},{default:d(()=>[k("Best Case")]),_:1})]),_:1}),o(ue,{props:u},{default:d(()=>[o(Q,null,{default:d(()=>[k(" Item ")]),_:1}),o(Q,{class:"worstcasetablecell"},{default:d(()=>[k(" In ")]),_:1}),o(Q,{class:"worstcasetablecell"},{default:d(()=>[k(" Out ")]),_:1}),o(Q,{class:"worstcasetablecell"},{default:d(()=>[k(" Balance ")]),_:1}),o(Q,null,{default:d(()=>[k(" In ")]),_:1}),o(Q,null,{default:d(()=>[k(" Out ")]),_:1}),o(Q,null,{default:d(()=>[k(" Balance ")]),_:1})]),_:2},1032,["props"])]),body:d(u=>[u.row.type==="ledger"?(h(),P(ue,{key:0},{default:d(()=>[o(ne,{class:"tablerowcell"},{default:d(()=>[k(_(u.row.name),1)]),_:2},1024),o(ne,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:d(()=>[k(_(e.format_currency(u.row.worst.in)),1)]),_:2},1024),o(ne,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:d(()=>[k(_(e.format_currency(u.row.worst.out)),1)]),_:2},1024),o(ne,{class:"worstcasetablecell valuetablecell tablerowcell"},{default:d(()=>[k(_(e.format_currency(u.row.worst.bal)),1)]),_:2},1024),o(ne,{class:"valuetablecell tablerowcell"},{default:d(()=>[k(_(e.format_currency(u.row.best.in)),1)]),_:2},1024),o(ne,{class:"valuetablecell tablerowcell"},{default:d(()=>[k(_(e.format_currency(u.row.best.out)),1)]),_:2},1024),o(ne,{class:"valuetablecell tablerowcell"},{default:d(()=>[k(_(e.format_currency(u.row.best.bal)),1)]),_:2},1024)]),_:2},1024)):B("",!0),u.row.type==="blank"?(h(),P(ue,{key:1},{default:d(()=>[o(Q,{colspan:"7"},{default:d(()=>[k("\xA0")]),_:1})]),_:1})):B("",!0),u.row.type==="title"?(h(),P(ue,{key:2},{default:d(()=>[o(Q,{colspan:"7"},{default:d(()=>[k(_(u.row.name),1)]),_:2},1024)]),_:2},1024)):B("",!0)]),_:1},8,["columns","rows"])]),ja]),_:1})]),_:1})}var Ia=D(Pa,[["render",Aa]]);const Ma=V({name:"BrrCalcDealRatingAlternativeSummary",props:["purchaserange","finance_refinance","stampduty_total","othercosts_total","refurb_cost_total","gdv_total"],methods:{format_currency(e){return ce.format_currency(e)}},computed:{mortgage_rate_display(){return this.finance_refinance.userefinance?{best:this.finance_refinance.ltv.max+"%",worst:this.finance_refinance.ltv.min+"%"}:{best:"N/A",worst:"N/A"}},mortgage(){return this.finance_refinance.userefinance?{best:this.finance_refinance.ltv.max/100*this.purchaserange.min,worst:this.finance_refinance.ltv.min/100*this.purchaserange.max}:{best:0,worst:0}},deposit(){return{best:this.purchaserange.min-this.mortgage.best,worst:this.purchaserange.max-this.mortgage.worst}},total_money_in(){return{best:this.mortgage.best+this.deposit.best+this.stampduty_total.min+this.othercosts_total.min+this.refurb_cost_total.min,worst:this.mortgage.worst+this.deposit.worst+this.stampduty_total.max+this.othercosts_total.max+this.refurb_cost_total.max}},new_mortgage_amount(){return{best:this.gdv_total.max*(this.finance_refinance.ltv.max/100),worst:this.gdv_total.min*(this.finance_refinance.ltv.min/100)}},monay_pulled_out(){return{best:this.gdv_total.max-this.new_mortgage_amount.best,worst:this.gdv_total.min-this.new_mortgage_amount.worst}},profit(){return{best:this.gdv_total.max-this.total_money_in.best,worst:this.gdv_total.min-this.total_money_in.worst}},money_left_in(){return{best:this.monay_pulled_out.best-this.profit.best,worst:this.monay_pulled_out.worst-this.profit.worst}}}}),za={class:"alternativetable"},Va=s("thead",null,[s("tr",null,[s("th",{class:"text-left alternativetablecell"}),s("th",{class:"text-center alternativetablecell worstcasetablecell"},"Worst case"),s("th",{class:"text-center alternativetablecell"},"Best case")])],-1),Da=s("td",{class:"text-left alternativetablecell"},"Price offered",-1),La={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Ea={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Na=s("td",{class:"text-left alternativetablecell"},"Mortgage %",-1),Fa={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Oa={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Ua=s("td",{class:"text-left alternativetablecell"},"Mortgage",-1),Wa={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Qa={class:"text-right alternativetablecell totaltablecell"},Ga=s("td",{class:"text-left alternativetablecell"},"Deposit",-1),Ha={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Ka={class:"text-right alternativetablecell totaltablecell"},Ja=s("td",{class:"text-left alternativetablecell"},"Stamp Duty",-1),Ya={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Xa={class:"text-right alternativetablecell yellowtablecell totaltablecell"},Za=s("td",{class:"text-left alternativetablecell"},"Other costs (Legals, etc)",-1),xa={class:"text-right alternativetablecell yellowtablecell totaltablecell"},er={class:"text-right alternativetablecell yellowtablecell totaltablecell"},tr=s("td",{class:"text-left alternativetablecell"},"Total Refurb Costs",-1),ar={class:"text-right alternativetablecell bluetablecell totaltablecell"},rr={class:"text-right alternativetablecell bluetablecell totaltablecell"},sr=s("td",{class:"text-left alternativetablecell"},"Total Money In",-1),nr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},or={class:"text-right alternativetablecell totaltablecell"},lr=s("tr",null,[s("td",null,"\xA0"),s("td",{class:"worstcasetablecell"}),s("td")],-1),ir=s("td",{class:"text-left alternativetablecell"},"End Value",-1),cr={class:"text-right alternativetablecell yellowtablecell totaltablecell"},ur={class:"text-right alternativetablecell yellowtablecell totaltablecell"},dr=s("td",{class:"text-left alternativetablecell"},"New Mortgage Amount",-1),_r={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},fr={class:"text-right alternativetablecell totaltablecell"},hr=s("td",{class:"text-left alternativetablecell"},"Money Pulled Out",-1),mr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},pr={class:"text-right alternativetablecell totaltablecell"},gr=s("tr",null,[s("td",null,"\xA0"),s("td",{class:"worstcasetablecell"}),s("td")],-1),vr=s("td",{class:"text-left alternativetablecell"},"Profit",-1),br={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},wr={class:"text-right alternativetablecell totaltablecell"},yr=s("td",{class:"text-left alternativetablecell"},"Money Left In",-1),kr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},$r={class:"text-right alternativetablecell totaltablecell"};function Sr(e,t,n,a,r,i){return h(),P(Kt,{"expand-separator":"",label:"Alternative summary format"},{default:d(()=>[s("div",null,[k(" This is another way of viewing the project numbers that is commonly used. I have included this for comparison. "),s("table",za,[Va,s("tbody",null,[s("tr",null,[Da,s("td",La,_(e.format_currency(e.purchaserange.max)),1),s("td",Ea,_(e.format_currency(e.purchaserange.min)),1)]),s("tr",null,[Na,s("td",Fa,_(e.mortgage_rate_display.worst),1),s("td",Oa,_(e.mortgage_rate_display.best),1)]),s("tr",null,[Ua,s("td",Wa,_(e.format_currency(e.mortgage.worst)),1),s("td",Qa,_(e.format_currency(e.mortgage.best)),1)]),s("tr",null,[Ga,s("td",Ha,_(e.format_currency(e.deposit.worst)),1),s("td",Ka,_(e.format_currency(e.deposit.best)),1)]),s("tr",null,[Ja,s("td",Ya,_(e.format_currency(e.stampduty_total.max)),1),s("td",Xa,_(e.format_currency(e.stampduty_total.min)),1)]),s("tr",null,[Za,s("td",xa,_(e.format_currency(e.othercosts_total.max)),1),s("td",er,_(e.format_currency(e.othercosts_total.min)),1)]),s("tr",null,[tr,s("td",ar,_(e.format_currency(e.refurb_cost_total.max)),1),s("td",rr,_(e.format_currency(e.refurb_cost_total.min)),1)]),s("tr",null,[sr,s("th",nr,_(e.format_currency(e.total_money_in.worst)),1),s("th",or,_(e.format_currency(e.total_money_in.best)),1)]),lr,s("tr",null,[ir,s("td",cr,_(e.format_currency(e.gdv_total.min)),1),s("td",ur,_(e.format_currency(e.gdv_total.max)),1)]),s("tr",null,[dr,s("td",_r,_(e.format_currency(e.new_mortgage_amount.worst)),1),s("td",fr,_(e.format_currency(e.new_mortgage_amount.best)),1)]),s("tr",null,[hr,s("td",mr,_(e.format_currency(e.monay_pulled_out.worst)),1),s("td",pr,_(e.format_currency(e.monay_pulled_out.best)),1)]),gr,s("tr",null,[vr,s("td",br,_(e.format_currency(e.profit.worst)),1),s("td",wr,_(e.format_currency(e.profit.best)),1)]),s("tr",null,[yr,s("td",kr,_(e.format_currency(e.money_left_in.worst)),1),s("td",$r,_(e.format_currency(e.money_left_in.best)),1)])])]),k(" Note: The profit amounts may not match because this method does not take into account finance costs. ")])]),_:1})}var Cr=D(Ma,[["render",Sr]]);const Tr=V({name:"BrrCalcDealRatingCompareDoneup",props:["purchaserange","refurb_cost_total","gdv_total"],methods:{format_currency(e){return ce.format_currency(e)},format_percent(e){return ce.format_percent(e)}},computed:{total_spent(){return{worst:this.purchaserange.max+this.refurb_cost_total.max,best:this.purchaserange.min+this.refurb_cost_total.min}},gain(){return{worst:this.gdv_total.min-this.total_spent.worst,best:this.gdv_total.max-this.total_spent.best}},profit_percentage(){return{worst:this.gain.worst/this.total_spent.worst,best:this.gain.best/this.total_spent.best}}}}),qr=s("div",{class:"text-h5"},"Compare this project to buying a done up property",-1),Pr=s("div",null,"This section compares this project with buying a property that is already done up. To account for the time and risk involved with a refurbishment we expect the end value of the property to be more than if we had just bought one.",-1),Br={class:"alternativetable"},Rr=s("thead",null,[s("tr",null,[s("th",{class:"text-left alternativetablecell"}),s("th",{class:"text-center alternativetablecell worstcasetablecell"},"Worst case"),s("th",{class:"text-center alternativetablecell"},"Best case")])],-1),jr=s("td",{class:"text-left alternativetablecell"},"Purchase + Refurb",-1),Ar={class:"text-right alternativetablecell worstcasetablecell"},Ir={class:"text-right alternativetablecell"},Mr=s("td",{class:"text-left alternativetablecell"},"End Value",-1),zr={class:"text-right alternativetablecell worstcasetablecell"},Vr={class:"text-right alternativetablecell"},Dr=s("td",{class:"text-left alternativetablecell totaltablecell"},"Gain",-1),Lr={class:"text-right alternativetablecell worstcasetablecell totaltablecell"},Er={class:"text-right alternativetablecell totaltablecell"},Nr=s("td",{class:"text-left alternativetablecell totaltablecell"},"Percentage",-1),Fr={class:"text-right alternativetablecell worstcasetablecell finaltotaltablecell"},Or={class:"text-right alternativetablecell finaltotaltablecell"};function Ur(e,t,n,a,r,i){return h(),R("div",null,[qr,Pr,s("table",Br,[Rr,s("tbody",null,[s("tr",null,[jr,s("td",Ar,_(e.format_currency(e.total_spent.worst)),1),s("td",Ir,_(e.format_currency(e.total_spent.best)),1)]),s("tr",null,[Mr,s("td",zr,_(e.format_currency(e.gdv_total.min)),1),s("td",Vr,_(e.format_currency(e.gdv_total.max)),1)]),s("tr",null,[Dr,s("td",Lr,_(e.format_currency(e.gain.worst)),1),s("td",Er,_(e.format_currency(e.gain.best)),1)]),s("tr",null,[Nr,s("td",Fr,_(e.format_percent(e.profit_percentage.worst)),1),s("td",Or,_(e.format_percent(e.profit_percentage.best)),1)])])])])}var Wr=D(Tr,[["render",Ur]]);const Qr=V({name:"BrrCalcDealRating",props:["is_valid_input","finance_totalmoneyneeded","deal_summary_final_bal","finance_refinance","gdv_total","refurbmonths","purchaserange","stampduty_total","othercosts_total","refurb_cost_total"],components:{dealRatingAlternativeSummary:Cr,FeatureTable:Ft,InvalidMessage:nt,dealRatingCompareDoneup:Wr},data(){return{}},methods:{format_currency(e){return ce.format_currency(e)}},computed:{features(){let e=[];var t=Math.min(this.cash_out_of_deal_minus_cash_in.best,this.cash_out_of_deal_minus_cash_in.worst);t>0?e.push({type:"positive",text:"All money out deal! - All initial investment returned plus at least "+this.format_currency(t)}):e.push({type:"negative",text:"Not all money out deal! - Might leave "+this.format_currency(-1*t)+" in."});var n=Math.min(this.profit.best,this.profit.worst);n<0?e.push({type:"negative",text:"Deal makes a loss! - End value might be "+this.format_currency(-1*n)+" less than investment."}):n<this.gdv_total.min*.25?e.push({type:"negative",text:"Low amount of profit! - Low profit "+this.format_currency(n)+" less than 25% of gdv."}):e.push({type:"positive",text:"Profit making deal! - Profit of "+this.format_currency(n)+"!"});var a=Math.min(this.annualroi.worst,this.annualroi.best);return a<3?e.push({type:"negative",text:"Very low ROI! "+a.toFixed(1)+"%"}):a>10&&e.push({type:"positive",text:"Good ROI! "+a.toFixed(1)+"%"}),e},cash_out_of_deal_minus_cash_in(){return{best:this.deal_summary_final_bal.best-this.finance_totalmoneyneeded.best,worst:this.deal_summary_final_bal.worst-this.finance_totalmoneyneeded.worst}},percent_left_in(){return this.finance_refinance.userefinance?{best:100-this.finance_refinance.ltv.max,worst:100-this.finance_refinance.ltv.min}:{best:100,worst:100}},amount_equity_left_in(){return{best:this.gdv_total.max*(this.percent_left_in.best/100),worst:this.gdv_total.min*(this.percent_left_in.worst/100)}},total_end_value(){return{best:this.amount_equity_left_in.best+this.deal_summary_final_bal.best,worst:this.amount_equity_left_in.worst+this.deal_summary_final_bal.worst}},profit(){return{best:this.total_end_value.best-this.finance_totalmoneyneeded.best,worst:this.total_end_value.worst-this.finance_totalmoneyneeded.worst}},roi(){return{best:100*this.profit.best/this.finance_totalmoneyneeded.best,worst:100*this.profit.worst/this.finance_totalmoneyneeded.worst}},annualroi(){return{worst:this.roi.worst*(12/this.refurbmonths.worst),best:this.roi.best*(12/this.refurbmonths.best)}}}}),Gr=s("div",{class:"text-h6"},"Project Rating",-1),Hr=s("div",{class:"text-subtitle2"},"How good is this project?",-1),Kr=s("div",{class:"text-h5"},"Profit/Loss",-1),Jr=s("div",null,"Compare what we have put into the deal vs what we get out of it. These calculations won't account for time invested or the risk taken on in the project",-1),Yr={class:"text-h5"},Xr=s("div",{class:"text-h6"},"Deal Features",-1);function Zr(e,t,n,a,r,i){const l=$("InvalidMessage"),u=$("dealRatingCompareDoneup"),p=$("dealRatingAlternativeSummary"),L=$("FeatureTable");return h(),P(Y,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:d(()=>[o(I,null,{default:d(()=>[Gr,Hr]),_:1}),o(I,null,{default:d(()=>[o(l,{is_valid_input:e.is_valid_input},null,8,["is_valid_input"]),Kr,Jr,s("div",Yr,"Total cash in: "+_(e.format_currency(e.finance_totalmoneyneeded.worst))+" - "+_(e.format_currency(e.finance_totalmoneyneeded.best))+" Worst - Best",1),o(u,{purchaserange:e.purchaserange,refurb_cost_total:e.refurb_cost_total,gdv_total:e.gdv_total},null,8,["purchaserange","refurb_cost_total","gdv_total"])]),_:1}),o(I,null,{default:d(()=>[o(p,{purchaserange:e.purchaserange,finance_refinance:e.finance_refinance,stampduty_total:e.stampduty_total,othercosts_total:e.othercosts_total,refurb_cost_total:e.refurb_cost_total,gdv_total:e.gdv_total},null,8,["purchaserange","finance_refinance","stampduty_total","othercosts_total","refurb_cost_total","gdv_total"])]),_:1}),o(I,null,{default:d(()=>[Xr,o(L,{features:e.features,"onUpdate:features":t[0]||(t[0]=y=>e.features=y)},null,8,["features"])]),_:1})]),_:1})}var xr=D(Qr,[["render",Zr]]);function es(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16))}const ts=V({name:"WebLinksComponent",props:["weblinks"],emits:["updateweblinks"],data(){return{edit_dialog:{visible:!1,record:{},title:"",message:""}}},computed:{weblinkdisplay(){return this.weblinks.map(function(e){if(typeof e.displaytext!="undefined"&&e.displaytext.trim().length>0)return{id:e.id,label:e.label,text:e.displaytext,icon:"star"};const t=new URL(e.label);let n="web",a=t.hostname;return t.hostname==="www.google.com"&&(t.pathname.startsWith("/maps/@")&&(t.pathname.includes("/data=")?(a="Google Streetview",n="streetview"):(a="Google Map",n="map")),t.pathname.startsWith("/maps/place")&&(a="Google Place",n="place")),{id:e.id,label:e.label,text:a,icon:n}})}},methods:{editweblink(e){this.edit_dialog.record=JSON.parse(JSON.stringify(this.weblinks.filter(function(t){return t.id===e})[0])),this.edit_dialog.title="Edit Weblink",this.edit_dialog.message="",this.edit_dialog.visible=!0},editweblinkok(){if(!this.validate_weblink(this.edit_dialog.record))return;const e=this,t=this.weblinks.filter(function(n){return e.edit_dialog.record.id!==n.id});t.push(this.edit_dialog.record),this.edit_dialog.visible=!1,e.$emit("updateweblinks",t)},clickweblink(e){window.open(e.label,"_blank").focus()},delweblink(e){const t=this.weblinks.filter(function(n){return e!==n.id});this.edit_dialog.visible=!1,this.$emit("updateweblinks",t)},validate_weblink(e){return e.label.startsWith("http")?!0:(Z.create({color:"bg-grey-2",message:"Link must start with http",timeout:2e3,color:"negative"}),!1)},addweblink(){this.edit_dialog.title="Add Weblink",this.edit_dialog.message="Add weblink to information about this property (rightmove, zoopla, etc.)",this.edit_dialog.record={id:es(),label:"",displaytext:""},this.edit_dialog.visible=!0}}}),as={class:"text-h6"},rs={style:{width:"25vw"}};function ss(e,t,n,a,r,i){return h(),R("div",null,[(h(!0),R(Re,null,je(e.weblinkdisplay,l=>(h(),R("div",{key:l},[o(Dt,{clickable:"",onClick:u=>e.clickweblink(l),removable:"",onRemove:u=>e.editweblink(l.id),color:"primary","text-color":"white",icon:l.icon,"icon-remove":"edit"},{default:d(()=>[k(_(l.text),1)]),_:2},1032,["onClick","onRemove","icon"])]))),128)),o(U,{round:"",color:"primary",icon:"add",onClick:e.addweblink},null,8,["onClick"]),o(at,{modelValue:e.edit_dialog.visible,"onUpdate:modelValue":t[3]||(t[3]=l=>e.edit_dialog.visible=l)},{default:d(()=>[o(Y,null,{default:d(()=>[o(I,null,{default:d(()=>[s("div",as,_(e.edit_dialog.title),1)]),_:1}),o(I,{class:"q-pt-none"},{default:d(()=>[s("div",rs,[k(_(e.edit_dialog.message)+" ",1),o(J,{modelValue:e.edit_dialog.record.displaytext,"onUpdate:modelValue":t[0]||(t[0]=l=>e.edit_dialog.record.displaytext=l),label:"Display Text",clearable:""},null,8,["modelValue"]),o(J,{modelValue:e.edit_dialog.record.label,"onUpdate:modelValue":t[1]||(t[1]=l=>e.edit_dialog.record.label=l),label:"URL",clearable:""},null,8,["modelValue"])])]),_:1}),o(tt,{align:"right"},{default:d(()=>[o(U,{flat:"",label:"Delete",color:"negative",onClick:t[2]||(t[2]=l=>e.delweblink(e.edit_dialog.record.id))}),de(o(U,{flat:"",label:"Cancel",color:"primary"},null,512),[[st]]),o(U,{flat:"",label:"OK",onClick:e.editweblinkok},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ns=D(ts,[["render",ss]]);function Qe(){return{type:"self",value:""}}const os=V({name:"DealBasicInfo",emits:["projectchanged"],props:["ever_saved"],components:{Weblinks:ns},setup(){return{backend_connection_store:ye()}},data(){return{patch:{id:"notset",name:"Not Set"},address:"",postcode:"",weblinks:[],new_patch_value:"",selling_agent:"",notes:"",emit_project_change_notification:!0,deal_source:Qe(),deal_source_local_only:{self_check_box:!1,value:""}}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","DealBasicInfo:serializer")}},computed:{deal_source_is_self(){return this.deal_source.type==="self"},serializer_card_data(){return{patch_id:this.patch.id,address:this.address,postcode:this.postcode,weblinks:this.weblinks,selling_agent:this.selling_agent,notes:this.notes,deal_source:this.deal_source}},reason_project_not_savable(){return this.patch.id==="notset"?"Select patch":typeof this.address=="undefeind"||this.address===null||this.address.length<3?"Enter address":""},security_role_cansave(){return this.backend_connection_store.security_role_cansave},patch_list(){return this.backend_connection_store.user_profile.patches.concat([{id:"create",name:"Add..."}])}},methods:{updatedealsource(){let e="self";this.deal_source_local_only.self_check_box===!1&&(e="text");let t=this.deal_source_local_only.value;this.deal_source={type:e,value:t}},updateweblinks(e){this.weblinks=e,this.emit_project_change_notification&&this.$emit("projectchanged","DealBasicInfo:updateweblinks")},serializer_load_data(e){this.emit_project_change_notification=!1,this.address=e.address,this.postcode=e.postcode,this.weblinks=e.weblinks,this.selling_agent=e.selling_agent,this.notes=e.notes,this.patch=this.patch_list.filter(function(n){return n.id===e.patch_id})[0],typeof e.deal_source=="undefined"?this.deal_source=Qe():this.deal_source=e.deal_source,this.deal_source_local_only.self_check_box=this.deal_source.type==="self",this.deal_source_local_only.value=this.deal_source.value,this.updatedealsource();const t=this;setTimeout(function(){t.emit_project_change_notification=!0,t.changed=!1,t.autosave_seconds_left=-1},50)},select_patch_by_id(e){this.patch=this.patch_list.filter(function(t){return t.id===e})[0]},select_patch(e){if(e.id==="create"){const t=this;this.$q.dialog({title:"Add new patch",message:"Enter the name for the new patch",html:!1,ok:{push:!0,label:"Ok"},cancel:{push:!0,label:"Cancel"},prompt:{model:"",type:"text"}}).onOk(n=>{t.new_patch_value=n;const a={ok:t.createpatchcallback,error:function(i){Z.create({color:"negative",message:"Create patch failed "+i.response.data.message,timeout:2e3})}},r={patch_name:n};this.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/me/patches",method:"POST",data:r,callback:a})})}},createpatchcallback(e){this.backend_connection_store.update_user_profile({user_profile:e.data.user_profile,then:this.createpatchcallback2})},createpatchcallback2(){const e=this;this.patch=this.patch_list.filter(function(t){return t.name===e.new_patch_value})[0],this.new_patch_value=""},isEmpty(e){return e==null?!0:e.length==0},copy_text(e){const t={ok:function(n){Z.create({color:"bg-grey-2",message:"Copied to clipboard",timeout:2e3})},error:function(n){Z.create({color:"negative",message:"Copy failed",timeout:2e3})}};Jt.copyTextToClipboard2(e,t)}}}),ls=s("div",{class:"text-h6"},"Basic Information",-1),is=s("div",{class:"text-subtitle2"},"Basic information about this project",-1),cs={key:0},us={key:1},ds=s("div",{class:"text-h6"},"Weblinks",-1),_s=s("div",null,"Deal Source",-1);function fs(e,t,n,a,r,i){const l=$("Weblinks");return e.security_role_cansave?(h(),P(Y,{key:0,inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:d(()=>[o(I,null,{default:d(()=>[ls,is]),_:1}),o(I,null,{default:d(()=>[e.ever_saved?B("",!0):(h(),R("div",cs,[o(Lt,{modelValue:e.patch,"onUpdate:modelValue":[t[0]||(t[0]=u=>e.patch=u),e.select_patch],options:e.patch_list,label:"Patch","emit-value":"","option-label":"name"},null,8,["modelValue","options","onUpdate:modelValue"])])),e.ever_saved?(h(),R("div",us," Patch: "+_(e.patch.name),1)):B("",!0),s("div",null,[o(J,{filled:"",clearable:"",modelValue:e.address,"onUpdate:modelValue":t[1]||(t[1]=u=>e.address=u),label:"Address"},null,8,["modelValue"])]),s("div",null,[o(J,{filled:"",clearable:"",modelValue:e.postcode,"onUpdate:modelValue":t[3]||(t[3]=u=>e.postcode=u),label:"Postcode"},{append:d(()=>[e.isEmpty(e.postcode)?B("",!0):(h(),P(_e,{key:0,class:"q-field__focusable-action",name:"content_copy",onClick:t[2]||(t[2]=u=>e.copy_text(e.postcode))}))]),_:1},8,["modelValue"])])]),_:1}),o(be,{class:"basic-info-seperator"}),o(I,null,{default:d(()=>[s("div",null,[ds,o(l,{weblinks:e.weblinks,onUpdateweblinks:e.updateweblinks},null,8,["weblinks","onUpdateweblinks"])]),o(be,{class:"basic-info-seperator"}),s("div",null,[o(J,{filled:"",clearable:"",modelValue:e.selling_agent,"onUpdate:modelValue":t[4]||(t[4]=u=>e.selling_agent=u),label:"Selling Agent"},null,8,["modelValue"])]),o(be,{class:"basic-info-seperator"}),s("div",null,[o(J,{filled:"",autogrow:"",modelValue:e.notes,"onUpdate:modelValue":t[5]||(t[5]=u=>e.notes=u),label:"Notes"},null,8,["modelValue"])]),o(be,{class:"basic-info-seperator"}),_s,s("div",null,[o(rt,{modelValue:e.deal_source_local_only.self_check_box,"onUpdate:modelValue":[t[6]||(t[6]=u=>e.deal_source_local_only.self_check_box=u),e.updatedealsource],label:"Self sourced"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[o(J,{filled:"",autogrow:"",modelValue:e.deal_source_local_only.value,"onUpdate:modelValue":[t[7]||(t[7]=u=>e.deal_source_local_only.value=u),e.updatedealsource],label:"Name of source",disable:e.deal_source_local_only.self_check_box},null,8,["modelValue","disable","onUpdate:modelValue"])])]),_:1})]),_:1})):B("",!0)}var hs=D(os,[["render",fs]]);function ms(e,t,n){const a=[];a.push({range:"Main!A1",values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),a.push({range:"Main!A2:B2",values:[["Patch:",t.patch.name]]}),a.push({range:"Main!A3:B3",values:[["Address:",t.serialized_data.dealbasicinfo.address]]}),a.push({range:"Main!E3:E3",values:[[t.serialized_data.dealbasicinfo.postcode]]}),a.push({range:"Main!A4:A4",values:[["Links:"]]});let r=3;return t.serialized_data.dealbasicinfo.weblinks.forEach(function(i){r=r+1,a.push({range:"Main!B"+r.toString()+":B"+r.toString(),values:[['=HYPERLINK("'+i.label+'", "'+i.label+'")']]})}),r=r+1,r=r+1,a.push({range:"Main!A"+r.toString()+":B"+r.toString(),values:[["Selling Agent:",t.serialized_data.dealbasicinfo.selling_agent]]}),r=r+1,a.push({range:"Main!A"+r.toString()+":B"+r.toString(),values:[["Notes:",t.serialized_data.dealbasicinfo.notes]]}),r=r+1,a.push({range:"Main!A"+r.toString()+":B"+r.toString(),values:[["Vision:",t.serialized_data.vision.devplan]]}),r=r+1,r=r+1,a.push({range:"Main!A"+r.toString()+":A"+r.toString(),values:[["Caculations provided here are for reference only and should be manually checked."]]}),a}function ps(e,t,n){const a=[];return a.push({repeatCell:{range:{sheetId:n.Main,startRowIndex:0,endRowIndex:t.serialized_data.dealbasicinfo.weblinks.length+6+1,startColumnIndex:0,endColumnIndex:1},cell:{userEnteredFormat:{textFormat:{bold:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}),a}var Ge={get_sheet_main_values:ms,get_sheet_main:ps};function gs(e){function t(n,a,r,i,l){return{repeatCell:{range:{sheetId:e,startRowIndex:n,endRowIndex:a,startColumnIndex:r,endColumnIndex:i},cell:{userEnteredFormat:{numberFormat:{type:"NUMBER",pattern:l}}},fields:"userEnteredFormat.numberFormat"}}}return{makeboldandvaligntop:function(n,a,r,i){return{repeatCell:{range:{sheetId:e,startRowIndex:n,endRowIndex:a,startColumnIndex:r,endColumnIndex:i},cell:{userEnteredFormat:{textFormat:{bold:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}},makeitalicandvaligntop:function(n,a,r,i){return{repeatCell:{range:{sheetId:e,startRowIndex:n,endRowIndex:a,startColumnIndex:r,endColumnIndex:i},cell:{userEnteredFormat:{textFormat:{italic:!0},verticalAlignment:"TOP"}},fields:"userEnteredFormat(textFormat, verticalAlignment)"}}},formatnumbermisc:function(n,a,r,i,l){return t(n,a,r,i,l)},formatcurrency:function(n,a,r,i){return t(n,a,r,i,"[$\xA3-809]#,##0.00")},formatpercentage:function(n,a,r,i){return t(n,a,r,i,"0.00%")},adjustcolumnwidth:function(n,a){return{updateDimensionProperties:{range:{sheetId:e,dimension:"COLUMNS",startIndex:n,endIndex:n+1},properties:{pixelSize:a},fields:"pixelSize"}}}}}var vs={get_sheet_utils:gs};const M="Purchase Phase";function bs(e,t,n){return{name:"Buying Cash",pre_stage:function(a){},start_details:function(a){return[["Purchase Price",t.serialized_data.purchaseprice.purchaserangevalue.max,t.serialized_data.purchaseprice.purchaserangevalue.min]]},end_details:function(a){return[]}}}function ws(e,t,n){return{name:"Buying with a Mortgage",pre_stage:function(a,r){const i=[],l=a.cur_row;a.cur_row=a.cur_row+1,a.value_requests.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["","Worst","Best"]]}),a.requests.push(r.makeboldandvaligntop(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Purchase Price",t.serialized_data.purchaseprice.purchaserangevalue.max,t.serialized_data.purchaseprice.purchaserangevalue.min]]}),a.requests.push(r.formatcurrency(l,a.cur_row,1,3)),a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Mortage Rate",t.serialized_data.finance.mortgage.rate.max/100,t.serialized_data.finance.mortgage.rate.min/100]]}),a.requests.push(r.formatpercentage(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Mortgage LTV",t.serialized_data.finance.mortgage.ltv.max/100,t.serialized_data.finance.mortgage.ltv.min/100]]}),a.requests.push(r.formatpercentage(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Total Mortgage","=B"+(l+2).toString()+"*B"+(a.cur_row-1).toString(),"=C"+(l+2).toString()+"*C"+(a.cur_row-1).toString()]]}),a.requests.push(r.formatcurrency(a.cur_row-1,a.cur_row,1,3)),a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Monthly Payments","=(B"+(a.cur_row-1).toString()+"*B"+(l+3).toString()+")/12","=(C"+(a.cur_row-1).toString()+"*C"+(l+3).toString()+")/12"]]}),a.requests.push(r.formatcurrency(a.cur_row-1,a.cur_row,1,3)),a.misc_data.monthly_payments_row=a.cur_row,a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Deposit","=B"+(l+2).toString()+"-B"+(a.cur_row-2).toString(),"=C"+(l+2).toString()+"-C"+(a.cur_row-2).toString()]]}),a.requests.push(r.formatcurrency(a.cur_row-1,a.cur_row,1,3)),a.misc_data.deposit_row=a.cur_row,a.cur_row=a.cur_row+1,i.push({range:M+"!A"+a.cur_row.toString()+":C"+a.cur_row.toString(),values:[["Refurb Duration Months",t.serialized_data.refurbcost.refurbtimerange.max,t.serialized_data.refurbcost.refurbtimerange.min]]}),a.requests.push(r.formatnumbermisc(a.cur_row-1,a.cur_row,1,3,"0")),a.misc_data.refurb_duration_row=a.cur_row,a.requests.push(r.makeboldandvaligntop(l,a.cur_row,0,1)),a.cur_row=a.cur_row+1,a.value_requests.push(i)},start_details:function(a){return[["Deposit","=B"+a.misc_data.deposit_row.toString(),"=C"+a.misc_data.deposit_row.toString()],["Mortgage Arangement",t.serialized_data.finance.mortgage.arrangementfee,t.serialized_data.finance.mortgage.arrangementfee]]},end_details:function(a){return[["Mortgage Payments","=B"+a.misc_data.monthly_payments_row.toString()+"*B"+a.misc_data.refurb_duration_row.toString(),"=C"+a.misc_data.monthly_payments_row.toString()+"*C"+a.misc_data.refurb_duration_row.toString()],["(During refurbishment)","",""]]}}}function ys(e,t,n){return{name:"Buying with a Bridge",pre_stage:function(a){},start_details:function(a){return[["Purchase Price",t.serialized_data.purchaseprice.purchaserangevalue.max,t.serialized_data.purchaseprice.purchaserangevalue.min]]},end_details:function(a){return[["Bridge Costs",t.finance_bridgecost.worst,t.finance_bridgecost.best]]}}}function ks(e,t,n){return t.serialized_data.finance.mortgage.usemortgage?ws(e,t):t.serialized_data.finance.bridge.usebridge?ys(e,t):bs(e,t)}function $s(e,t,n){const a=vs.get_sheet_utils(n[M]);let r={cur_row:0,requests:[],value_requests:[],misc_data:{}};r.requests.push(a.adjustcolumnwidth(0,170)),r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString(),values:[['=HYPERLINK("www.evernetproperties.com", "Project calculation generated by www.evernetproperties.com")']]}),r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString()+":B"+r.cur_row.toString(),values:[["Patch:",t.patch.name]]}),r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString()+":B"+r.cur_row.toString(),values:[["Address:",t.serialized_data.dealbasicinfo.address]]}),r.value_requests.push({range:M+"!E"+r.cur_row.toString()+":E"+r.cur_row.toString(),values:[[t.serialized_data.dealbasicinfo.postcode]]}),r.requests.push(a.makeboldandvaligntop(0,r.cur_row,0,1)),r.cur_row=r.cur_row+1;const i=ks(e,t);r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString()+":A"+r.cur_row.toString(),values:[[i.name]]}),r.requests.push(a.makeboldandvaligntop(r.cur_row-1,r.cur_row,0,1)),i.pre_stage(r,a),r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString()+":C"+r.cur_row.toString(),values:[["","Worst","Best"]]}),r.requests.push(a.makeboldandvaligntop(r.cur_row-1,r.cur_row,1,3));const l=r.cur_row;let u=i.start_details(r);return u.push(["Refurbishment",t.refurb_cost_total.max,t.refurb_cost_total.min]),u.push(["Stamp Duty",t.stampduty_total.max,t.stampduty_total.min]),t.othercosts_items_detail.forEach(function(p){u.push([p.name,-1*p.worst,-1*p.best])}),t.caculated_loan_details.forEach(function(p){u.push([p.name+" interest",p.interest,p.interest])}),u=u.concat(i.end_details(r)),u.forEach(function(p){r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString()+":C"+r.cur_row.toString(),values:[[p[0],p[1],p[2]]]}),p[0]==="(During refurbishment)"?r.requests.push(a.makeitalicandvaligntop(r.cur_row-1,r.cur_row,0,1)):r.requests.push(a.makeboldandvaligntop(r.cur_row-1,r.cur_row,0,1))}),r.cur_row=r.cur_row+1,r.cur_row=r.cur_row+1,r.value_requests.push({range:M+"!A"+r.cur_row.toString()+":C"+r.cur_row.toString(),values:[["Total Money needed","=SUM(B"+(l+1).toString()+":B"+(r.cur_row-1).toString()+")","=SUM(C"+(l+1).toString()+":C"+(r.cur_row-1).toString()+")"]]}),r.requests.push(a.makeboldandvaligntop(r.cur_row-1,r.cur_row,0,3)),r.requests.push(a.formatcurrency(l,r.cur_row,1,3)),{value_requests:r.value_requests,requests:r.requests}}var He={sheet_name:M,get_sheet_values:$s};const Ss=V({name:"SaveToGoogleSheetCompoennt",props:["serialized_data","patch","refurb_cost_total","stampduty_total","othercosts_items_detail","caculated_loan_details","finance_bridgecost"],setup(){return{backend_connection_store:ye()}},data(){return{}},computed:{security_role_cansave(){return this.backend_connection_store.security_role_cansave}},methods:{click_export(){Pe.show();const e=google.accounts.oauth2.initTokenClient({client_id:this.$rjmgclientid,scope:this.$rjmgscopes,callback:this.execute_export});gapi.client.getToken()===null?e.requestAccessToken({prompt:"consent"}):e.requestAccessToken({prompt:""})},execute_export(){try{gapi.client.sheets.spreadsheets.create({properties:{title:"evernetproperties.com-"+this.patch.name+"-"+this.serialized_data.dealbasicinfo.address}}).then(e=>{this.spreadsheets_batchupdate(e.result)})}catch(e){this.sheet_api_error_handler(e);return}},spreadsheets_batchupdate(e){let t={Main:e.sheets[0].properties.sheetId},n=[];n.push({updateSheetProperties:{properties:{sheetId:e.sheets[0].properties.sheetId,title:"Main"},fields:"title"}});const a=[He.sheet_name];a.forEach(function(i){n.push({addSheet:{properties:{title:i}}})}),n=n.concat(Ge.get_sheet_main(e,this,t));const r={requests:n};try{gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.spreadsheetId,resource:r}).then(i=>{const l=i.result;console.log("spreadsheet Batch Update result",i.result.replies),i.result.replies.forEach(function(u){typeof u.addSheet!="undefined"&&a.forEach(function(p){u.addSheet.properties.title===p&&(t[p]=u.addSheet.properties.sheetId)})}),this.spreadsheets_batchupdate_after_all_sheets_added(e,t)})}catch(i){this.sheet_api_error_handler(i);return}},spreadsheets_batchupdate_after_all_sheets_added(e,t){let n=[],a=[];a=a.concat(Ge.get_sheet_main_values(e,this,t));let r=He.get_sheet_values(e,this,t);if(n=n.concat(r.requests),a=a.concat(r.value_requests),n.length===0){console.log("No requests required"),this.spreadsheets_values_batchupdate(e,t,a);return}const i={requests:n};try{gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.spreadsheetId,resource:i}).then(l=>{const u=l.result;console.log("spreadsheet Batch Update after all sheets added result",l.result.replies),this.spreadsheets_values_batchupdate(e,t,a)})}catch(l){this.sheet_api_error_handler(l);return}},spreadsheets_values_batchupdate(e,t,n){const a={data:n,valueInputOption:"USER_ENTERED"};try{gapi.client.sheets.spreadsheets.values.batchUpdate({spreadsheetId:e.spreadsheetId,resource:a}).then(r=>{const i=r.result;console.log(`${i.totalUpdatedCells} cells updated.`),this.sheet_final_complete(e)})}catch(r){this.sheet_api_error_handler(r);return}},open_sheet(e){window.open(e.spreadsheetUrl,"_blank").focus()},sheet_api_error_handler(e){Pe.hide(),console.log("Error-"+e.message),Z.create({color:"negative",message:"Export to google sheets failed "+e.message,timeout:2e3})},sheet_final_complete(e){this.open_sheet(e),Pe.hide()}}}),Cs=s("div",{class:"text-h6"},"Export to Spreadsheet",-1),Ts=s("div",{class:"text-subtitle2"},"Export figures into a google docs spreadsheet.",-1),qs=s("div",{class:"textdiv"}," This feature will generate a spreadsheet containing all the current values for this project and output it to a document in your google drive. ",-1);function Ps(e,t,n,a,r,i){return e.security_role_cansave?(h(),P(Y,{key:0,inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:d(()=>[o(I,null,{default:d(()=>[Cs,Ts]),_:1}),o(I,null,{default:d(()=>[s("div",null,[o(U,{color:"primary",icon:"save",label:"Export to google sheets",onClick:e.click_export},null,8,["onClick"])]),qs]),_:1})]),_:1})):B("",!0)}var Bs=D(Ss,[["render",Ps]]),Ke=fe({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const n=C(()=>e.sent===!0?"sent":"received"),a=C(()=>`q-message-text-content q-message-text-content--${n.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),r=C(()=>`q-message-text q-message-text--${n.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),i=C(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),l=C(()=>e.size!==void 0?`col-${e.size}`:""),u=C(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function p(y){return t.stamp!==void 0?[y,b("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[y,b("div",{class:"q-message-stamp",[u.value.stamp]:e.stamp})]:[y]}function L(y,z){const j=z===!0?y.length>1?S=>S:S=>b("div",[S]):S=>b("div",{[u.value.msg]:S});return y.map((S,F)=>b("div",{key:F,class:r.value},[b("div",{class:a.value},p(j(S)))]))}return()=>{const y=[];t.avatar!==void 0?y.push(t.avatar()):e.avatar!==void 0&&y.push(b("img",{class:`q-message-avatar q-message-avatar--${n.value}`,src:e.avatar,"aria-hidden":"true"}));const z=[];t.name!==void 0?z.push(b("div",{class:`q-message-name q-message-name--${n.value}`},t.name())):e.name!==void 0&&z.push(b("div",{class:`q-message-name q-message-name--${n.value}`,[u.value.name]:e.name})),t.default!==void 0?z.push(L(It(t.default()),!0)):e.text!==void 0&&z.push(L(e.text)),y.push(b("div",{class:l.value},z));const j=[];return t.label!==void 0?j.push(b("div",{class:"q-message-label"},t.label())):e.label!==void 0&&j.push(b("div",{class:"q-message-label",[u.value.label]:e.label})),j.push(b("div",{class:i.value},y)),b("div",{class:`q-message q-message-${n.value}`},j)}}});function Je(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16))}const Rs=V({name:"BrrCalcActivityJob",emits:["projectchanged"],data(){return{activity_log:[],emit_project_change_notification:!0}},computed:{serializer_card_data(){return this.activity_log},activity_log_display(){let e=[];const t={book_viewing:{sent:!0,name:"Viewing booked"},hold_viewing:{sent:!1,name:"Viewing"},call_agent:{sent:!0,name:"Call to agent"},wf_move:{sent:!1,name:"Workflow"},offer_made:{sent:!0,name:"Offer made"},offer_rejected:{sent:!1,name:"Offer rejected"},offer_accepted:{sent:!1,name:"Offer accepted"}};let n="";return this.activity_log.forEach(function(a){const r=new Date(a.timestamp),i=r.toDateString(),l=r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});n!==i&&(n=i,e=e.concat([{id:Je(),label:n}]));let u=t[a.type].name;typeof a.head_notes!="undefined"&&(u=u+" ("+a.head_notes+")"),e=e.concat({id:a.t,label:void 0,name:u,text:a.text,sent:t[a.type].sent,stamp:l,avatar:"activity_log_icon_"+a.type+".png"})}),e}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","ActivityLog:serializer")}},methods:{log_activity(e){this.activity_log.push({id:Je(),type:e.type,timestamp:new Date().toISOString(),text:e.text,head_notes:e.head_notes}),this.$emit("projectchanged","ActivityLog:log_activity")},serializer_load_data(e){this.emit_project_change_notification=!1,this.activity_log=e;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}}}),js=s("div",{class:"text-h6"},"Activity Log",-1),As={style:{width:"100%","max-width":"400px"}},Is={key:0},Ms={key:1},zs=["src"];function Vs(e,t,n,a,r,i){return h(),P(Y,{inline:"",class:"q-ma-sm card-style featurecard col-grow"},{default:d(()=>[o(I,null,{default:d(()=>[js,s("div",As,[(h(!0),R(Re,null,je(e.activity_log_display,l=>(h(),R("div",{key:l.id},[typeof l.label=="string"?(h(),R("div",Is,[o(Ke,{label:l.label},null,8,["label"])])):B("",!0),typeof l.label=="undefined"?(h(),R("div",Ms,[o(Ke,{name:l.name,text:[l.text],sent:l.sent,stamp:l.stamp,avatar:l.avatar},{avatar:d(()=>[s("img",{class:"q-message-avatar q-message-avatar--sent",alt:"Avatar",src:"/"+l.avatar},null,8,zs)]),_:2},1032,["name","text","sent","stamp","avatar"])])):B("",!0)]))),128))])]),_:1})]),_:1})}var Ds=D(Rs,[["render",Vs]]);function Ye(){return{workflow_used_id:we.default_workflow_id,current_stage:we.workflows[we.default_workflow_id].initial_stage}}const Ls=V({name:"BrrCalcWorkflow",emits:["projectchanged","activity_log"],data(){return{workflow_data:Ye(),emit_project_change_notification:!0}},computed:{serializer_card_data(){return this.workflow_data},workflow_model(){return we.workflows[this.workflow_data.workflow_used_id]}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Workflow")}},methods:{progress(e){const t={type:"wf_move",text:"From "+this.workflow_model.stages[this.workflow_data.current_stage].name+" to "+this.workflow_model.stages[e].name,head_notes:"Progressed through workflow"};this.workflow_data.current_stage=e,this.$emit("activity_log",t)},serializer_load_data(e){this.emit_project_change_notification=!1,typeof e.workflow_used_id=="undefined"?this.workflow_data=Ye():this.workflow_data=e;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}}}),Es={class:"text-h6"},Ns={class:"col"},Fs={key:0},Os={key:0},Us={key:1,class:"resetbuttondiv"};function Ws(e,t,n,a,r,i){return h(),P(Y,{inline:"",class:"q-ma-sm card-style"},{default:d(()=>[o(I,null,{default:d(()=>[s("div",Es,"Workflow - "+_(e.workflow_model.name),1),s("div",Ns,[s("div",null,[s("h3",null,"Stage: "+_(e.workflow_model.stages[e.workflow_data.current_stage].name),1)]),typeof e.workflow_model.stages[e.workflow_data.current_stage].progression!="undefined"?(h(),R("table",Fs,[s("tbody",null,[s("tr",null,[s("td",null,[(h(!0),R(Re,null,je(e.workflow_model.stages[e.workflow_data.current_stage].progression.success,l=>(h(),R("div",{key:l.next_stage},[o(U,{color:"positive",icon:"donut_large",label:"Progress to next stage ("+e.workflow_model.stages[l.next_stage].name+")",onClick:u=>e.progress(l.next_stage)},null,8,["label","onClick"])]))),128))]),typeof e.workflow_model.stages[e.workflow_data.current_stage].progression.failed!="undefined"?(h(),R("td",Os,[o(U,{color:"negative",icon:"directions_off",label:e.workflow_model.stages[e.workflow_model.stages[e.workflow_data.current_stage].progression.failed].name,onClick:t[0]||(t[0]=l=>e.progress(e.workflow_model.stages[e.workflow_data.current_stage].progression.failed))},null,8,["label"])])):B("",!0)])])])):B("",!0),e.workflow_data.current_stage!==e.workflow_model.initial_stage?(h(),R("div",Us,[o(U,{icon:"donut_large",label:"Reset workflow",onClick:t[1]||(t[1]=l=>e.progress(e.workflow_model.initial_stage))})])):B("",!0)])]),_:1})]),_:1})}var Qs=D(Ls,[["render",Ws]]);const Gs=V({name:"ProjectSerializer",emits:["saveprojectcomplete"],setup(){return{backend_connection_store:ye()}},data(){return{loaded_project_id:void 0,proj_summary_data:{metadata:void 0,timestamp_first_entered:void 0}}},methods:{serializer_load_data(e){this.loaded_project_id=e.id,this.proj_summary_data.timestamp_first_entered=e.timestamp_first_entered,this.proj_summary_data.metadata=e.metadata},save_project({dict_of_card_info:e,activity_log:t,workflow:n}){const a={};for(const u in Object.keys(e)){const p=Object.keys(e)[u];a[p]=JSON.parse(JSON.stringify(e[p]))}const r={user_id:this.backend_connection_store.user_profile.id,patch_id:e.dealbasicinfo.patch_id,timestamp_first_entered:this.proj_summary_data.timestamp_first_entered,initial_phase:{total_money_in:0,start_value:0,end_value:0,flip_roi:0},reoccurring_phase:[],location:{},workflow:n,activity_log:t,sub_section_details:a,tags:[],risks:[]};typeof this.loaded_project_id!="undefined"?(r.id=this.loaded_project_id,r.metadata=this.proj_summary_data.metadata):r.timestamp_first_entered=new Date().toISOString();const i=this,l={ok:i.save_api_call_success,error:i.save_api_call_fail};this.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/projects",method:"POST",data:r,callback:l})},save_api_call_success(e){this.$emit("saveprojectcomplete",{success:!0,response:e}),this.serializer_load_data(e.data),Z.create({color:"positive",message:"Project Saved",timeout:2e3})},save_api_call_fail(e){this.$emit("saveprojectcomplete",{success:!1,response:e}),Z.create({color:"negative",message:"Save failed - "+e.response.data.message,timeout:2e3})}},mounted(){}});function Hs(e,t,n,a,r,i){return h(),R("div")}var Ks=D(Gs,[["render",Hs]]);const Js=V({name:"CalcBrrToFlip",components:{GdvCard:Ot,PurchasePrice:Ut,RefurbCost:Wt,StampDuty:Qt,OtherCosts:Gt,DealSummary:Ia,Finance:Ht,Vision:ka,DealRating:xr,Refinance:qa,DealBasicInfo:hs,ProjectSerializer:Ks,SaveToGoogleSheet:Bs,ActivityLog:Ds,BrrToolbar:ga,Workflow:Qs},setup(){return{backend_connection_store:ye()}},data(){return{tab:"main",isMounted:!1,purchaserange:{min:18e4,max:19e4}}},computed:{ever_saved(){return this.isMounted?this.security_role_cansave?this.$refs.BrrToolbar.ever_saved:(console.log("WARNING ever_saved checked when cansave is false"),!1):!1},reason_project_not_savable(){return this.isMounted?this.$refs.DealBasicInfo.reason_project_not_savable:""},security_role_cansave(){return this.backend_connection_store.security_role_cansave},is_valid_input(){return this.isMounted?!(!this.$refs.PurchasePrice.isValid||!this.$refs.GdvCard.isValid):!0},deal_summary_final_bal(){return this.isMounted?this.$refs.DealSummary.final_bal:{best:0,worst:0}},finance_refinance(){return this.isMounted?this.$refs.Refinance.get_refinance:{userefinance:!1,ltv:{min:75,max:75}}},caculated_loan_details(){return this.isMounted?this.$refs.Finance.caculated_loan_details:[]},finance_bridgecost(){return this.isMounted?this.$refs.Finance.bridgecost:{best:0,worst:0}},finance_totalmoneyneeded(){return this.isMounted?this.$refs.Finance.totalmoneyneeded:{best:0,worst:0}},finance_in_items(){return this.isMounted?this.$refs.Finance.finance_in_items:[]},finance_during_items(){return this.isMounted?this.$refs.Finance.finance_during_items:[]},finance_out_items(){return this.isMounted?this.$refs.Finance.finance_out_items:[]},refinance_out_items(){return this.isMounted?this.$refs.Refinance.refinance_out_items:[]},purchase_items(){return this.isMounted?this.$refs.PurchasePrice.purchase_items:[]},stampduty_items(){return this.isMounted?this.$refs.StampDuty.stampduty_items:[]},othercosts_items(){return this.isMounted?this.$refs.OtherCosts.othercosts_items:[]},othercosts_items_detail(){return this.isMounted?this.$refs.OtherCosts.othercosts_items_detail:[]},refurb_cost_items(){return this.isMounted?this.$refs.RefurbCost.refurb_cost_items:[]},refurb_cost_total(){return this.isMounted?this.$refs.RefurbCost.refurb_cost_total:[]},refurbmonths(){return this.isMounted?this.$refs.RefurbCost.refurbmonths:[]},stampduty_total(){return this.isMounted?this.$refs.StampDuty.stampduty:[]},othercosts_total(){return this.isMounted?this.$refs.OtherCosts.total:[]},gdv_total(){return this.isMounted?this.$refs.GdvCard.total:[]},serialized_data(){return this.security_role_cansave?this.isMounted?{dealbasicinfo:this.$refs.DealBasicInfo.serializer_card_data,vision:this.$refs.Vision.serializer_card_data,gdvcard:this.$refs.GdvCard.serializer_card_data,purchaseprice:this.$refs.PurchasePrice.serializer_card_data,refurbcost:this.$refs.RefurbCost.serializer_card_data,stampduty:this.$refs.StampDuty.serializer_card_data,othercosts:this.$refs.OtherCosts.serializer_card_data,finance:this.$refs.Finance.serializer_card_data,refinance:this.$refs.Refinance.serializer_card_data}:{}:(console.log("WARNING serialized_data checked when cansave is false"),{})},patch(){return this.isMounted?this.security_role_cansave?this.$refs.DealBasicInfo.patch:(console.log("WARNING patch method called when cansave is false"),{id:"notset",name:"Not Set"}):{id:"notset",name:"Not Set"}}},methods:{activity_log(e){if(!this.isMounted){console.log("ERROR - trying to log activity unmounted",e);return}this.$refs.ActivityLog.log_activity(e)},projectchanged(e){if(console.log("BrrCalc page recieved project changed from ",e),!this.security_role_cansave)return!1;if(!this.isMounted){console.log("WARNING = projectchanged called when mounted is false");return}if(typeof this.$refs.BrrToolbar=="undefined")return console.log("WARNING = projectchanged called when BrrToolbar is undefined"),!1;this.$refs.BrrToolbar.set_changed_true()},save_project(){this.$refs.ProjectSerializer.save_project({dict_of_card_info:this.serialized_data,activity_log:this.$refs.ActivityLog.serializer_card_data,workflow:this.$refs.Workflow.serializer_card_data})},load_project_into_cards(e){this.$refs.ProjectSerializer.serializer_load_data(e),this.$refs.DealBasicInfo.serializer_load_data(e.sub_section_details.dealbasicinfo),typeof e.sub_section_details.vision!="undefined"&&this.$refs.Vision.serializer_load_data(e.sub_section_details.vision),typeof e.sub_section_details.gdvcard!="undefined"&&this.$refs.GdvCard.serializer_load_data(e.sub_section_details.gdvcard),typeof e.sub_section_details.purchaseprice!="undefined"&&this.$refs.PurchasePrice.serializer_load_data(e.sub_section_details.purchaseprice),typeof e.sub_section_details.refurbcost!="undefined"&&this.$refs.RefurbCost.serializer_load_data(e.sub_section_details.refurbcost),typeof e.sub_section_details.stampduty!="undefined"&&this.$refs.StampDuty.serializer_load_data(e.sub_section_details.stampduty),typeof e.sub_section_details.othercosts!="undefined"&&this.$refs.OtherCosts.serializer_load_data(e.sub_section_details.othercosts),typeof e.sub_section_details.finance!="undefined"&&this.$refs.Finance.serializer_load_data(e.sub_section_details.finance),typeof e.sub_section_details.refinance!="undefined"&&this.$refs.Refinance.serializer_load_data(e.sub_section_details.refinance),this.$refs.ActivityLog.serializer_load_data(e.activity_log),this.$refs.Workflow.serializer_load_data(e.workflow),this.$refs.BrrToolbar.serializer_load_data({})},save_project_complete({success:e,response:t}){this.$refs.BrrToolbar.save_project_complete_notification({success:e,response:t})},load_project_api_fail(e){Z.create({color:"bg-grey-2",message:"Error loading project "+e,timeout:2e3,color:"negative"}),this.load_complete()},load_project_api_success(e){this.load_project_into_cards(e.data),Z.create({color:"bg-grey-2",message:"Project Loaded",timeout:2e3,color:"positive"}),this.load_complete()},load_complete(){const e=this;setTimeout(function(){e.isMounted=!0},105)},call_load_api(){const e=this,t={ok:e.load_project_api_success,error:e.load_project_api_fail};e.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/projects/"+e.$route.query.projectid,method:"GET",data:void 0,callback:t})}},mounted(){const e=this;if(typeof e.$route.query.projectid=="undefined"){if(e.load_complete(),typeof e.$route.query.patchid!="undefined"){if(!e.security_role_cansave)return;this.$refs.DealBasicInfo.select_patch_by_id(e.$route.query.patchid)}return}if(e.security_role_cansave){e.call_load_api();return}setTimeout(function(){e.call_load_api()},1e3)}}),Ys={class:"main-page fit col wrap justify-center items-center content-center"},Xs=s("h1",null,"Buy Refurbish Rent Refinance Calculator",-1),Zs=s("div",null,"This calculator can be used for calculating deal information for a Buy, Refurbish, Rent, Refinance project (BRRR).",-1),xs={class:"row"},en={class:"row"};function tn(e,t,n,a,r,i){const l=$("BrrToolbar"),u=$("DealBasicInfo"),p=$("Vision"),L=$("GdvCard"),y=$("PurchasePrice"),z=$("RefurbCost"),j=$("StampDuty"),S=$("OtherCosts"),F=$("Finance"),H=$("Refinance"),re=$("DealSummary"),x=$("DealRating"),oe=$("ProjectSerializer"),g=$("Workflow"),E=$("ActivityLog"),O=$("SaveToGoogleSheet");return h(),P(Et,{class:"flex"},{default:d(()=>[s("div",Ys,[Xs,Zs,e.security_role_cansave?(h(),P(l,{key:0,ref:"BrrToolbar",reason_project_not_savable:e.reason_project_not_savable,onActivity_log:e.activity_log,onSaveproject:e.save_project},null,8,["reason_project_not_savable","onActivity_log","onSaveproject"])):B("",!0),e.security_role_cansave?(h(),P(aa,{key:1,modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=A=>e.tab=A),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:d(()=>[o(We,{name:"main",label:"Main"}),o(We,{name:"project",label:"Project"})]),_:1},8,["modelValue"])):B("",!0),de(s("div",xs,[e.security_role_cansave?(h(),P(u,{key:0,ref:"DealBasicInfo",ever_saved:e.ever_saved,onProjectchanged:e.projectchanged},null,8,["ever_saved","onProjectchanged"])):B("",!0),o(p,{ref:"Vision",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"]),o(L,{ref:"GdvCard",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"]),o(y,{ref:"PurchasePrice",purchaserange:e.purchaserange,"onUpdate:purchaserange":t[1]||(t[1]=A=>e.purchaserange=A),onProjectchanged:e.projectchanged},null,8,["purchaserange","onProjectchanged"]),o(z,{ref:"RefurbCost",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"]),o(j,{ref:"StampDuty",purchaserange:e.purchaserange,onProjectchanged:e.projectchanged},null,8,["purchaserange","onProjectchanged"]),o(S,{ref:"OtherCosts",purchaserange:e.purchaserange,onProjectchanged:e.projectchanged},null,8,["purchaserange","onProjectchanged"]),o(F,{ref:"Finance",purchaserange:e.purchaserange,refurb_cost_total:e.refurb_cost_total,stampduty_total:e.stampduty_total,othercosts_total:e.othercosts_total,refurbmonths:e.refurbmonths,gdv_total:e.gdv_total,onProjectchanged:e.projectchanged},null,8,["purchaserange","refurb_cost_total","stampduty_total","othercosts_total","refurbmonths","gdv_total","onProjectchanged"]),o(H,{ref:"Refinance",gdv_total:e.gdv_total,onProjectchanged:e.projectchanged},null,8,["gdv_total","onProjectchanged"]),o(re,{ref:"DealSummary",purchaserange:e.purchaserange,finance_in_items:e.finance_in_items,finance_out_items:e.finance_out_items,finance_during_items:e.finance_during_items,refinance_out_items:e.refinance_out_items,purchase_items:e.purchase_items,stampduty_items:e.stampduty_items,othercosts_items:e.othercosts_items,refurb_cost_items:e.refurb_cost_items,gdv_total:e.gdv_total,refurbmonths:e.refurbmonths,is_valid_input:e.is_valid_input},null,8,["purchaserange","finance_in_items","finance_out_items","finance_during_items","refinance_out_items","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","is_valid_input"]),o(x,{ref:"DealRating",purchaserange:e.purchaserange,finance_totalmoneyneeded:e.finance_totalmoneyneeded,deal_summary_final_bal:e.deal_summary_final_bal,finance_refinance:e.finance_refinance,gdv_total:e.gdv_total,refurbmonths:e.refurbmonths,stampduty_total:e.stampduty_total,othercosts_total:e.othercosts_total,refurb_cost_total:e.refurb_cost_total,is_valid_input:e.is_valid_input},null,8,["purchaserange","finance_totalmoneyneeded","deal_summary_final_bal","finance_refinance","gdv_total","refurbmonths","stampduty_total","othercosts_total","refurb_cost_total","is_valid_input"]),e.security_role_cansave?(h(),P(oe,{key:1,ref:"ProjectSerializer",onSaveprojectcomplete:e.save_project_complete},null,8,["onSaveprojectcomplete"])):B("",!0)],512),[[Ue,e.tab==="main"]]),de(s("div",en,[e.security_role_cansave?(h(),P(g,{key:0,ref:"Workflow",onProjectchanged:e.projectchanged,onActivity_log:e.activity_log},null,8,["onProjectchanged","onActivity_log"])):B("",!0),e.security_role_cansave?(h(),P(E,{key:1,ref:"ActivityLog",onProjectchanged:e.projectchanged},null,8,["onProjectchanged"])):B("",!0),e.security_role_cansave?(h(),P(O,{key:2,ref:"SaveToGoogleSheet",serialized_data:e.serialized_data,patch:e.patch,stampduty_total:e.stampduty_total,refurb_cost_total:e.refurb_cost_total,othercosts_items_detail:e.othercosts_items_detail,caculated_loan_details:e.caculated_loan_details,finance_bridgecost:e.finance_bridgecost},null,8,["serialized_data","patch","stampduty_total","refurb_cost_total","othercosts_items_detail","caculated_loan_details","finance_bridgecost"])):B("",!0)],512),[[Ue,e.tab==="project"]])])]),_:1})}var gn=D(Js,[["render",tn]]);export{gn as default};
