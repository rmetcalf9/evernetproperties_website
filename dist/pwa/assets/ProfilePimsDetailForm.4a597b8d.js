import{d as g,N as c,_ as b,o as u,K as y,a as s,w as d,ae as p,af as n,e as r,Q as l,ag as _,ah as w,c as k,L as C,aa as v,f}from"./index.4eee666e.js";import{u as P}from"./backend_connection.19644da6.js";import{a as V}from"./axios.6e1fcf85.js";var h={early_access:{title:"Early Access Terms and Conditions",html:`
      <h1>Early Access</h1>

      <p>This is an early access product and features are subject to change. Features may be added, removed or moved. As part of the program we hope to gain your feedback in order to shape future versions of the product.</p>

      <h1>Marketing and Feedback</h1>
      <p>As part of the program we are gaining as much feedback as possible in order to make Property Pipeline Builder as valuable to you as possible. If you agree we may send you emails or call you to find out about your experience using the system. From time to time we may let you know about products and services that we think you will find valuable.</p>


      <h1>User account</h1>
      <p>Your user account is verified against your PIMS membership and you may not share access to your account with any third parties. We may at any time withdraw or pause access to your user account. You may delete your user account at any time by using the provided option in your user profile. This will result in loss of access to data stored in the system.</p>

      <h1>Responsibility</h1>
      <p>You are solely responsible for your use of the service and its outputs.</p>

      <h1>Data</h1>
      <p>By signing up for the early access program you are consenting for Evernet Properties to store and process your data for the purposes of operating the system. We will not make use of the data stored in your projects except where you have given consent.</p>

      <p>We may share the data with third parties for the purpose of providing extra details of the deal. Examples include and are not limited to. sharing location to generate maps and sharing address to generate valuation reports.</p>

      <h1>Data Breaches</h1>
      <p>We commit to using best practices when storing your user data. We accept no liability for consequences for data breaches but will endeavour to notify users when these occur.</p>

      <h1>Feature Changes & Data Loss</h1>

      <p>This is an early access program. Features of the product will change and evolve over time.
      We don\u2019t accept liability for data loss caused by feature changes or bugs or errors in the system.</p>
    `}};const T={email:"We collect your email address so that we can contact you with updates on the service.",phone:"We collect your phone number as we may call you to find out how you are getting on."},F={orig:{xnQsjsdp:"89e18b1e88ffaffedbeef0c32091b44516c268788a1971f957ab3e29b6e6e670",xmIwtLD:"5cda33fce5eaeaa7ca374dff23d1501c751fd3395004fbff2c04c9a8e9c4fa2b0672ff88667c9f8e63ae8860514dcb5b",pipeline:"PPB Early Access Signup Standard",stage:"Signup Requested"},second_default:{xnQsjsdp:"bbc11a9d1fe3d3d285778688a13184d602d86b48122e8c9860c08b2a6c55c521",xmIwtLD:"e3c3402a45569ecc302648f0365d953e3e6e2b7b4cb0a8e557654c22f7da2b3c06dbe76105b211e7803e5207a8f296b8",pipeline:"Sales Pipeline Standard",stage:"Signup Requested2"}},N=g({name:"ProfilePimsDetailFormComponent",props:{supresscancelbutton:{type:Boolean,default:!1}},emits:["process_done","click_cancel"],setup(){return{backend_connection_store:P()}},data(){return{enterpimsdialog:{number:"",first_name:"",last_name:"",phone:"",email:"",company_name:"",agreetoc:!1,submitted:!1}}},methods:{enterpimsdialogclickcancel(){this.$emit("click_cancel")},notify_why(e){this.$q.dialog({title:void 0,message:T[e],html:!1}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},show_toc(){this.$q.dialog({title:h.early_access.title,message:'<div class="toc_dialog">'+h.early_access.html+"</div>",html:!0,fullWidth:!0}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},blank_data(){this.enterpimsdialog.number="",this.enterpimsdialog.first_name="",this.enterpimsdialog.last_name="",this.enterpimsdialog.phone="",this.enterpimsdialog.email="",this.enterpimsdialog.company_name="",this.enterpimsdialog.agreetoc=!1},enterpimsdialogclick(){const e=this,t=["numberref","first_nameref","last_nameref","phoneref","emailref"];for(const i of t)this.$refs[i].validate();for(const i of t)if(this.$refs[i].hasError)return;this.enterpimsdialog.agreetoc?e.enterpimsdialogclick_afteragree():e.$q.dialog({title:"Agree to terms and conditions",message:"You must agree to the terms and conditions of the early access program to continue.",html:!1,ok:{push:!0,label:"Agree",color:"primary"},cancel:{push:!0,label:"Cancel"}}).onOk(i=>{e.enterpimsdialog.agreetoc=!0,e.enterpimsdialogclick_afteragree()})},enterpimsdialogclick_afteragree(){const e=this;if(this.submitted){e.$q.dialog({title:"Pressed button twice",message:"Trying to submit twice. If you try multiple times please retry from the homepage"});return}this.submitted=!0;const t={number:this.enterpimsdialog.number,first_name:this.enterpimsdialog.first_name,last_name:this.enterpimsdialog.last_name},i={ok:this.submitpimsinfo_success,error:this.submitpimsinfo_fail};this.backend_connection_store.call_api({apiprefix:"privateUserAPIPrefix",url:"/me/pimsdetails",method:"POST",data:t,callback:i})},submitpimsinfo_success(e){this.backend_connection_store.update_user_profile({user_profile:e.data});const t=window.location.origin+"/#/v/"+e.data.pims.verify_code+"/"+e.data.pims.number,i=F.second_default;var o=new FormData;o.append("xnQsjsdp",i.xnQsjsdp),o.append("zc_gad",""),o.append("xmIwtLD",i.xmIwtLD),o.append("actionType","UG90ZW50aWFscw=="),o.append("returnURL",void 0),o.append("Potential Name",e.data.frontend_instance+" Website "+e.data.pims.last_name),o.append("Contacts.First Name",e.data.pims.first_name),o.append("Contacts.Last Name",e.data.pims.last_name),o.append("Contacts.Phone",this.enterpimsdialog.phone),o.append("Contacts.Email",this.enterpimsdialog.email),o.append("Contacts.CONTACTCF3",e.data.email),o.append("Accounts.Account Name",""),o.append("Contacts.CONTACTCF1",e.data.pims.number),o.append("Contacts.CONTACTCF2",e.data.id),o.append("POTENTIALCF3",t),o.append("Pipeline",i.pipeline),o.append("Stage",i.stage),V({method:"post",url:"https://bigin.zoho.eu/crm/WebForm",data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(m){}).catch(function(m){console.log("Failed to register on CRM"),console.log(m)}),c.create({color:"bg-grey-2",message:"New PIMS details saved - Please request Verification by sending Whatsapp message on the academy group",timeout:2e3}),this.$emit("process_done",{success:!0})},submitpimsinfo_fail(e){console.log("ERROR failed to update PIMS information ",e),c.create({color:"bg-grey-2",message:"Failed to update PIMS information "+e,timeout:2e3}),this.$emit("process_done",{success:!1})}}}),A=r("div",{class:"text-h6"},"Your PIMS membership details to sign up for Early Access",-1),S=r("div",null,[f("Details must match what appears on the "),r("a",{href:"https://www.thepims.co.uk/members/",target:"_new"},"PIMS website"),f(".")],-1),I={class:"row"},$={class:"row"},D=r("br",null,null,-1);function M(e,t,i,o,m,W){return u(),y("div",null,[s(v,null,{default:d(()=>[s(p,null,{default:d(()=>[A]),_:1}),s(p,{class:"q-pt-none"},{default:d(()=>[S,s(n,{modelValue:e.enterpimsdialog.number,"onUpdate:modelValue":t[0]||(t[0]=a=>e.enterpimsdialog.number=a),label:"PIMS Number",rules:[a=>a.trim().length>0||"Minimum 1 character",a=>a.trim().match(/^\d+$/)!==null||"Numeric characters only"],ref:"numberref"},null,8,["modelValue","rules"]),s(n,{modelValue:e.enterpimsdialog.first_name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.enterpimsdialog.first_name=a),label:"First Name",rules:[a=>a.trim().length>1||"Minimum 2 characters"],ref:"first_nameref"},null,8,["modelValue","rules"]),s(n,{modelValue:e.enterpimsdialog.last_name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.enterpimsdialog.last_name=a),label:"Last Name",rules:[a=>a.trim().length>1||"Minimum 2 characters"],ref:"last_nameref"},null,8,["modelValue","rules"]),r("div",I,[s(n,{modelValue:e.enterpimsdialog.phone,"onUpdate:modelValue":t[3]||(t[3]=a=>e.enterpimsdialog.phone=a),label:"Phone",rules:[a=>a.trim().length>0||"Minimum 1 character"],ref:"phoneref",class:"col-grow"},null,8,["modelValue","rules"]),s(l,{round:"",dense:"",flat:"",icon:"info",onClick:t[4]||(t[4]=a=>e.notify_why("phone"))})]),r("div",$,[s(n,{modelValue:e.enterpimsdialog.email,"onUpdate:modelValue":t[5]||(t[5]=a=>e.enterpimsdialog.email=a),label:"Email",rules:[a=>a.trim().length>7||"Minimum 8 characters"],ref:"emailref",class:"col-grow"},null,8,["modelValue","rules"]),s(l,{round:"",dense:"",flat:"",icon:"info",onClick:t[6]||(t[6]=a=>e.notify_why("email"))})]),s(n,{modelValue:e.enterpimsdialog.company_name,"onUpdate:modelValue":t[7]||(t[7]=a=>e.enterpimsdialog.company_name=a),label:"Company Name",ref:"companyref"},null,8,["modelValue"]),s(_,{modelValue:e.enterpimsdialog.agreetoc,"onUpdate:modelValue":t[8]||(t[8]=a=>e.enterpimsdialog.agreetoc=a),label:"Agree to Early Access terms and conditions"},null,8,["modelValue"]),D,s(l,{label:"View Terms",onClick:e.show_toc},null,8,["onClick"])]),_:1}),s(w,{align:"right"},{default:d(()=>[e.supresscancelbutton?C("",!0):(u(),k(l,{key:0,flat:"",label:"Cancel",onClick:e.enterpimsdialogclickcancel},null,8,["onClick"])),s(l,{flat:"",label:"Submit for Verification",color:"secondary",onClick:e.enterpimsdialogclick},null,8,["onClick"])]),_:1})]),_:1})])}var U=b(N,[["render",M]]);export{U as P};
