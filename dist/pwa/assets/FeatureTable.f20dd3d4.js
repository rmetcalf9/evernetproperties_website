import{aA as $t,a6 as le,C as kt,aB as Mt,Y as de,aC as Ce,a4 as De,aD as $e,aE as ve,X as ke,$ as Se,ak as Vt,j as P,k as l,aF as Tt,aG as Me,n as St,aj as Rt,aH as Bt,u as Re,q,aI as Lt,aJ as Ft,g as Ke,m as Ye,d as G,_ as K,o as y,K as j,e as s,f as R,a as d,t as h,ad as fe,L as ge,r as He,c as O,w as g,ag as V,M as Be,ae as re,af as ie,aq as W,ax as ne,aK as Te,aL as qt,N as Ne,a7 as ce}from"./index.e355734b.js";import{u as Z}from"./utils.7bd545ec.js";import{e as E,Q as jt,b as Ue}from"./QTable.5e3e1941.js";import{Q as zt}from"./QExpansionItem.789bc3a3.js";import{d as It}from"./position-engine.78eca18e.js";const Le={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Et=Object.keys(Le);Le.all=!0;function Oe(e){const a={};for(const u of Et)e[u]===!0&&(a[u]=!0);return Object.keys(a).length===0?Le:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const Pt=["INPUT","TEXTAREA"];function We(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&Pt.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function Ve(e,a,u){const i=ve(e);let t,o=i.left-a.event.x,r=i.top-a.event.y,c=Math.abs(o),m=Math.abs(r);const f=a.direction;f.horizontal===!0&&f.vertical!==!0?t=o<0?"left":"right":f.horizontal!==!0&&f.vertical===!0?t=r<0?"up":"down":f.up===!0&&r<0?(t="up",c>m&&(f.left===!0&&o<0?t="left":f.right===!0&&o>0&&(t="right"))):f.down===!0&&r>0?(t="down",c>m&&(f.left===!0&&o<0?t="left":f.right===!0&&o>0&&(t="right"))):f.left===!0&&o<0?(t="left",c<m&&(f.up===!0&&r<0?t="up":f.down===!0&&r>0&&(t="down"))):f.right===!0&&o>0&&(t="right",c<m&&(f.up===!0&&r<0?t="up":f.down===!0&&r>0&&(t="down")));let B=!1;if(t===void 0&&u===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,B=!0,t==="left"||t==="right"?(i.left-=o,c=0,o=0):(i.top-=r,m=0,r=0)}return{synthetic:B,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:i,direction:t,isFirst:a.event.isFirst,isFinal:u===!0,duration:Date.now()-a.event.time,distance:{x:c,y:m},offset:{x:o,y:r},delta:{x:i.left-a.event.lastX,y:i.top-a.event.lastY}}}}let At=0;var Dt=$t({name:"touch-pan",beforeMount(e,{value:a,modifiers:u}){if(u.mouse!==!0&&le.has.touch!==!0)return;function i(o,r){u.mouse===!0&&r===!0?Se(o):(u.stop===!0&&$e(o),u.prevent===!0&&De(o))}const t={uid:"qvtp_"+At++,handler:a,modifiers:u,direction:Oe(u),noop:kt,mouseStart(o){We(o,t)&&Mt(o)&&(de(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(o,!0))},touchStart(o){if(We(o,t)){const r=o.target;de(t,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","passiveCapture"],[r,"touchend","end","passiveCapture"]]),t.start(o)}},start(o,r){if(le.is.firefox===!0&&Ce(e,!0),t.lastEvt=o,r===!0||u.stop===!0){if(t.direction.all!==!0&&(r!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const f=o.type.indexOf("mouse")>-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&De(f),o.cancelBubble===!0&&$e(f),Object.assign(f,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[t.uid]:o.qClonedBy.concat(t.uid)}),t.initialEvent={target:o.target,event:f}}$e(o)}const{left:c,top:m}=ve(o);t.event={x:c,y:m,time:Date.now(),mouse:r===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:c,lastY:m}},move(o){if(t.event===void 0)return;const r=ve(o),c=r.left-t.event.x,m=r.top-t.event.y;if(c===0&&m===0)return;t.lastEvt=o;const f=t.event.mouse===!0,B=()=>{i(o,f);let T;u.preserveCursor!==!0&&u.preservecursor!==!0&&(T=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),f===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),It(),t.styleCleanup=M=>{if(t.styleCleanup=void 0,T!==void 0&&(document.documentElement.style.cursor=T),document.body.classList.remove("non-selectable"),f===!0){const Y=()=>{document.body.classList.remove("no-pointer-events--children")};M!==void 0?setTimeout(()=>{Y(),M()},50):Y()}else M!==void 0&&M()}};if(t.event.detected===!0){t.event.isFirst!==!0&&i(o,t.event.mouse);const{payload:T,synthetic:M}=Ve(o,t,!1);T!==void 0&&(t.handler(T)===!1?t.end(o):(t.styleCleanup===void 0&&t.event.isFirst===!0&&B(),t.event.lastX=T.position.left,t.event.lastY=T.position.top,t.event.lastDir=M===!0?void 0:T.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||f===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){B(),t.event.detected=!0,t.move(o);return}const L=Math.abs(c),C=Math.abs(m);L!==C&&(t.direction.horizontal===!0&&L>C||t.direction.vertical===!0&&L<C||t.direction.up===!0&&L<C&&m<0||t.direction.down===!0&&L<C&&m>0||t.direction.left===!0&&L>C&&c<0||t.direction.right===!0&&L>C&&c>0?(t.event.detected=!0,t.move(o)):t.end(o,!0))},end(o,r){if(t.event!==void 0){if(ke(t,"temp"),le.is.firefox===!0&&Ce(e,!1),r===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(Ve(o===void 0?t.lastEvt:o,t).payload);const{payload:c}=Ve(o===void 0?t.lastEvt:o,t,!0),m=()=>{t.handler(c)};t.styleCleanup!==void 0?t.styleCleanup(m):m()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,u.mouse===!0){const o=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";de(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}le.has.touch===!0&&de(t,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const u=e.__qtouchpan;u!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&u.end(),u.handler=a.value),u.direction=Oe(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),ke(a,"main"),ke(a,"temp"),le.is.firefox===!0&&Ce(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchpan)}});const Qe="q-slider__marker-labels",Nt=e=>({value:e}),Ut=({marker:e})=>q("div",{key:e.value,style:e.style,class:e.classes},e.label),Fe=[34,37,40,33,39,38],Je={...Rt,...Bt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ze=["pan","update:modelValue","change"];function et({updateValue:e,updatePosition:a,getDragging:u,formAttrs:i}){const{props:t,emit:o,slots:r,proxy:{$q:c}}=Re(),m=Vt(t,c),f=Ft(i),B=P(!1),L=P(!1),C=P(!1),T=P(!1),M=l(()=>t.vertical===!0?"--v":"--h"),Y=l(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),A=l(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(c.lang.rtl===!0)),I=l(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),N=l(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),w=l(()=>t.disable!==!0&&t.readonly!==!0&&I.value<N.value),D=l(()=>(String(t.step).trim().split(".")[1]||"").length),Q=l(()=>t.step===0?1:t.step),pe=l(()=>w.value===!0?t.tabindex||0:-1),te=l(()=>t.max-t.min),oe=l(()=>N.value-I.value),ae=l(()=>be(I.value)),se=l(()=>be(N.value)),ee=l(()=>t.vertical===!0?A.value===!0?"bottom":"top":A.value===!0?"right":"left"),_=l(()=>t.vertical===!0?"height":"width"),p=l(()=>t.vertical===!0?"width":"height"),S=l(()=>t.vertical===!0?"vertical":"horizontal"),$=l(()=>{const n={role:"slider","aria-valuemin":I.value,"aria-valuemax":N.value,"aria-orientation":S.value,"data-step":t.step};return t.disable===!0?n["aria-disabled"]="true":t.readonly===!0&&(n["aria-readonly"]="true"),n}),z=l(()=>`q-slider q-slider${M.value} q-slider--${B.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(C.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(m.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+M.value:""));function X(n){const v="q-slider__"+n;return`${v} ${v}${M.value} ${v}${M.value}${Y.value}`}function k(n){const v="q-slider__"+n;return`${v} ${v}${M.value}`}const U=l(()=>{const n=t.selectionColor||t.color;return"q-slider__selection absolute"+(n!==void 0?` text-${n}`:"")}),me=l(()=>k("markers")+" absolute overflow-hidden"),at=l(()=>k("track-container")),rt=l(()=>X("pin")),nt=l(()=>X("label")),it=l(()=>X("text-container")),ot=l(()=>X("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),st=l(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),lt=l(()=>{const n={[p.value]:t.trackSize};return t.trackImg!==void 0&&(n.backgroundImage=`url(${t.trackImg}) !important`),n}),ut=l(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),qe=l(()=>{const n=se.value-ae.value,v={[ee.value]:`${100*ae.value}%`,[_.value]:n===0?"2px":`${100*n}%`};return t.innerTrackImg!==void 0&&(v.backgroundImage=`url(${t.innerTrackImg}) !important`),v});function mt(n){const{min:v,max:b,step:x}=t;let F=v+n*(b-v);if(x>0){const H=(F-I.value)%x;F+=(Math.abs(H)>=x/2?(H<0?-1:1)*x:0)-H}return D.value>0&&(F=parseFloat(F.toFixed(D.value))),E(F,I.value,N.value)}function be(n){return te.value===0?0:(n-t.min)/te.value}function dt(n,v){const b=ve(n),x=t.vertical===!0?E((b.top-v.top)/v.height,0,1):E((b.left-v.left)/v.width,0,1);return E(A.value===!0?1-x:x,ae.value,se.value)}const je=l(()=>Tt(t.markers)===!0?t.markers:Q.value),ze=l(()=>{const n=[],v=je.value,b=t.max;let x=t.min;do n.push(x),x+=v;while(x<b);return n.push(b),n}),Ie=l(()=>{const n=` ${Qe}${M.value}-`;return Qe+`${n}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${n}${A.value===!0?"rtl":"ltr"}`}),ye=l(()=>t.markerLabels===!1?null:ht(t.markerLabels).map((n,v)=>({index:v,value:n.value,label:n.label||n.value,classes:Ie.value+(n.classes!==void 0?" "+n.classes:""),style:{...Pe(n.value),...n.style||{}}}))),Ee=l(()=>({markerList:ye.value,markerMap:vt.value,classes:Ie.value,getStyle:Pe})),ct=l(()=>{const n=oe.value===0?"2px":100*je.value/oe.value;return{...qe.value,backgroundSize:t.vertical===!0?`2px ${n}%`:`${n}% 2px`}});function ht(n){if(n===!1)return null;if(n===!0)return ze.value.map(Nt);if(typeof n=="function")return ze.value.map(b=>{const x=n(b);return Me(x)===!0?{...x,value:b}:{value:b,label:x}});const v=({value:b})=>b>=t.min&&b<=t.max;return Array.isArray(n)===!0?n.map(b=>Me(b)===!0?b:{value:b}).filter(v):Object.keys(n).map(b=>{const x=n[b],F=Number(b);return Me(x)===!0?{...x,value:F}:{value:F,label:x}}).filter(v)}function Pe(n){return{[ee.value]:`${100*(n-t.min)/te.value}%`}}const vt=l(()=>{if(t.markerLabels===!1)return null;const n={};return ye.value.forEach(v=>{n[v.value]=v}),n});function ft(){if(r["marker-label-group"]!==void 0)return r["marker-label-group"](Ee.value);const n=r["marker-label"]||Ut;return ye.value.map(v=>n({marker:v,...Ee.value}))}const gt=l(()=>[[Dt,pt,void 0,{[S.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function pt(n){n.isFinal===!0?(T.value!==void 0&&(a(n.evt),n.touch===!0&&e(!0),T.value=void 0,o("pan","end")),B.value=!1,C.value=!1):n.isFirst===!0?(T.value=u(n.evt),a(n.evt),e(),B.value=!0,o("pan","start")):(a(n.evt),e())}function Ae(){C.value=!1}function bt(n){a(n,u(n)),e(),L.value=!0,B.value=!0,document.addEventListener("mouseup",_e,!0)}function _e(){L.value=!1,B.value=!1,e(!0),Ae(),document.removeEventListener("mouseup",_e,!0)}function yt(n){a(n,u(n)),e(!0)}function _t(n){Fe.includes(n.keyCode)&&e(!0)}function xt(n){if(t.vertical===!0)return null;const v=c.lang.rtl!==t.reverse?1-n:n;return{transform:`translateX(calc(${2*v-1} * ${t.thumbSize} / 2 + ${50-100*v}%))`}}function wt(n){const v=l(()=>L.value===!1&&(C.value===n.focusValue||C.value==="both")?" q-slider--focus":""),b=l(()=>`q-slider__thumb q-slider__thumb${M.value} q-slider__thumb${M.value}-${A.value===!0?"rtl":"ltr"} absolute non-selectable`+v.value+(n.thumbColor.value!==void 0?` text-${n.thumbColor.value}`:"")),x=l(()=>({width:t.thumbSize,height:t.thumbSize,[ee.value]:`${100*n.ratio.value}%`,zIndex:C.value===n.focusValue?2:void 0})),F=l(()=>n.labelColor.value!==void 0?` text-${n.labelColor.value}`:""),H=l(()=>xt(n.ratio.value)),xe=l(()=>"q-slider__text"+(n.labelTextColor.value!==void 0?` text-${n.labelTextColor.value}`:""));return()=>{const we=[q("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[q("path",{d:t.thumbPath})]),q("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(we.push(q("div",{class:rt.value+" absolute fit no-pointer-events"+F.value},[q("div",{class:nt.value,style:{minWidth:t.thumbSize}},[q("div",{class:it.value,style:H.value},[q("span",{class:xe.value},n.label.value)])])])),t.name!==void 0&&t.disable!==!0&&f(we,"push")),q("div",{class:b.value,style:x.value,...n.getNodeData()},we)}}function Ct(n,v,b,x){const F=[];t.innerTrackColor!=="transparent"&&F.push(q("div",{key:"inner",class:ut.value,style:qe.value})),t.selectionColor!=="transparent"&&F.push(q("div",{key:"selection",class:U.value,style:n.value})),t.markers!==!1&&F.push(q("div",{key:"marker",class:me.value,style:ct.value})),x(F);const H=[Lt("div",{key:"trackC",class:at.value,tabindex:v.value,...b.value},[q("div",{class:st.value,style:lt.value},F)],"slide",w.value,()=>gt.value)];if(t.markerLabels!==!1){const xe=t.switchMarkerLabelsSide===!0?"unshift":"push";H[xe](q("div",{key:"markerL",class:ot.value},ft()))}return H}return St(()=>{document.removeEventListener("mouseup",_e,!0)}),{state:{active:B,focus:C,preventFocus:L,dragging:T,editable:w,classes:z,tabindex:pe,attributes:$,step:Q,decimals:D,trackLen:te,innerMin:I,innerMinRatio:ae,innerMax:N,innerMaxRatio:se,positionProp:ee,sizeProp:_,isReversed:A},methods:{onActivate:bt,onMobileClick:yt,onBlur:Ae,onKeyup:_t,getContent:Ct,getThumbRenderFn:wt,convertRatioToModel:mt,convertModelToRatio:be,getDraggingRatio:dt}}}const J={MIN:0,RANGE:1,MAX:2};var ue=Ke({name:"QRange",props:{...Je,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:Ze,setup(e,{emit:a}){const{proxy:{$q:u}}=Re(),{state:i,methods:t}=et({updateValue:oe,updatePosition:se,getDragging:ae,formAttrs:l(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),o=P(null),r=P(0),c=P(0),m=P({min:0,max:0});function f(){m.value.min=e.modelValue.min===null?i.innerMin.value:E(e.modelValue.min,i.innerMin.value,i.innerMax.value),m.value.max=e.modelValue.max===null?i.innerMax.value:E(e.modelValue.max,i.innerMin.value,i.innerMax.value)}Ye(()=>`${e.modelValue.min}|${e.modelValue.max}|${i.innerMin.value}|${i.innerMax.value}`,f),f();const B=l(()=>t.convertModelToRatio(m.value.min)),L=l(()=>t.convertModelToRatio(m.value.max)),C=l(()=>i.active.value===!0?r.value:B.value),T=l(()=>i.active.value===!0?c.value:L.value),M=l(()=>{const _={[i.positionProp.value]:`${100*C.value}%`,[i.sizeProp.value]:`${100*(T.value-C.value)}%`};return e.selectionImg!==void 0&&(_.backgroundImage=`url(${e.selectionImg}) !important`),_}),Y=l(()=>{if(i.editable.value!==!0)return{};if(u.platform.is.mobile===!0)return{onClick:t.onMobileClick};const _={onMousedown:t.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(_,{onFocus:()=>{i.focus.value="both"},onBlur:t.onBlur,onKeydown:ee,onKeyup:t.onKeyup}),_});function A(_){return u.platform.is.mobile!==!0&&i.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{i.focus.value=_},onBlur:t.onBlur,onKeydown:ee,onKeyup:t.onKeyup}:{}}const I=l(()=>e.dragOnlyRange!==!0?i.tabindex.value:null),N=l(()=>u.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?i.tabindex.value:null),w=P(null),D=l(()=>A("min")),Q=t.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:w,key:"tmin",...D.value,tabindex:I.value}),ratio:C,label:l(()=>e.leftLabelValue!==void 0?e.leftLabelValue:m.value.min),thumbColor:l(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:l(()=>e.leftLabelColor||e.labelColor),labelTextColor:l(()=>e.leftLabelTextColor||e.labelTextColor)}),pe=l(()=>A("max")),te=t.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...pe.value,key:"tmax",tabindex:I.value}),ratio:T,label:l(()=>e.rightLabelValue!==void 0?e.rightLabelValue:m.value.max),thumbColor:l(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:l(()=>e.rightLabelColor||e.labelColor),labelTextColor:l(()=>e.rightLabelTextColor||e.labelTextColor)});function oe(_){(m.value.min!==e.modelValue.min||m.value.max!==e.modelValue.max)&&a("update:modelValue",{...m.value}),_===!0&&a("change",{...m.value})}function ae(_){const{left:p,top:S,width:$,height:z}=o.value.getBoundingClientRect(),X=e.dragOnlyRange===!0?0:e.vertical===!0?w.value.offsetHeight/(2*z):w.value.offsetWidth/(2*$),k={left:p,top:S,width:$,height:z,valueMin:m.value.min,valueMax:m.value.max,ratioMin:B.value,ratioMax:L.value},U=t.getDraggingRatio(_,k);return e.dragOnlyRange!==!0&&U<k.ratioMin+X?k.type=J.MIN:e.dragOnlyRange===!0||U<k.ratioMax-X?e.dragRange===!0||e.dragOnlyRange===!0?(k.type=J.RANGE,Object.assign(k,{offsetRatio:U,offsetModel:t.convertRatioToModel(U),rangeValue:k.valueMax-k.valueMin,rangeRatio:k.ratioMax-k.ratioMin})):k.type=k.ratioMax-U<U-k.ratioMin?J.MAX:J.MIN:k.type=J.MAX,k}function se(_,p=i.dragging.value){let S;const $=t.getDraggingRatio(_,p),z=t.convertRatioToModel($);switch(p.type){case J.MIN:$<=p.ratioMax?(S={minR:$,maxR:p.ratioMax,min:z,max:p.valueMax},i.focus.value="min"):(S={minR:p.ratioMax,maxR:$,min:p.valueMax,max:z},i.focus.value="max");break;case J.MAX:$>=p.ratioMin?(S={minR:p.ratioMin,maxR:$,min:p.valueMin,max:z},i.focus.value="max"):(S={minR:$,maxR:p.ratioMin,min:z,max:p.valueMin},i.focus.value="min");break;case J.RANGE:const X=$-p.offsetRatio,k=E(p.ratioMin+X,0,1-p.rangeRatio),U=z-p.offsetModel,me=E(p.valueMin+U,e.min,e.max-p.rangeValue);S={minR:k,maxR:k+p.rangeRatio,min:parseFloat(me.toFixed(i.decimals.value)),max:parseFloat((me+p.rangeValue).toFixed(i.decimals.value))},i.focus.value="both";break}m.value=m.value.min===null||m.value.max===null?{min:S.min||e.min,max:S.max||e.max}:{min:S.min,max:S.max},e.snap!==!0||e.step===0?(r.value=S.minR,c.value=S.maxR):(r.value=t.convertModelToRatio(m.value.min),c.value=t.convertModelToRatio(m.value.max))}function ee(_){if(!Fe.includes(_.keyCode))return;Se(_);const p=([34,33].includes(_.keyCode)?10:1)*i.step.value,S=([34,37,40].includes(_.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*p;if(i.focus.value==="both"){const $=m.value.max-m.value.min,z=E(parseFloat((m.value.min+S).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value-$);m.value={min:z,max:parseFloat((z+$).toFixed(i.decimals.value))}}else{if(i.focus.value===!1)return;{const $=i.focus.value;m.value={...m.value,[$]:E(parseFloat((m.value[$]+S).toFixed(i.decimals.value)),$==="min"?i.innerMin.value:m.value.min,$==="max"?i.innerMax.value:m.value.max)}}}oe()}return()=>{const _=t.getContent(M,N,Y,p=>{p.push(Q(),te())});return q("div",{ref:o,class:"q-range "+i.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},_)}}});const Ot=G({name:"SliderWithTextInput",props:{range:Object,min_prefix:{type:String,default:"Best \xA3"},max_prefix:{type:String,default:"Worst \xA3"},min_label_text:{type:String,default:"Best Price"},max_label_text:{type:String,default:"Worst Price"}},emits:["update:range"],data(){return{}},methods:{validateworst(){this.$refs.worstinput.validate(),this.emitrangevalue(this.rangevalue)},validatebest(){this.$refs.bestinput.validate(),this.emitrangevalue(this.rangevalue)},emitrangevalue(e){const a={min:this.ensurenumber(e.min),max:this.ensurenumber(e.max)};this.$emit("update:range",a)},ensurenumber(e){return e===null||typeof e=="undefined"||e===""?0:e}},computed:{isValid(){return this.$refs.worstinput.validate()?this.$refs.bestinput.validate():!1},rangevalue:{get(){return this.range},set(e){this.emitrangevalue(e)}}}}),Wt={class:"col-grow"},Qt={class:"col-grow row"},Xt={class:"pricetblcell"},Gt={class:"pricetblcell"};function Kt(e,a,u,i,t,o){return y(),j(ge,null,[s("div",Wt,[R(" \xA0 "),d(ue,{modelValue:e.rangevalue,"onUpdate:modelValue":a[0]||(a[0]=r=>e.rangevalue=r),min:0,max:1e6,step:5e3,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":e.min_prefix+e.rangevalue.min/1e3+"k","right-label-value":e.max_prefix+e.rangevalue.max/1e3+"k"},null,8,["modelValue","left-label-value","right-label-value"])]),s("div",Qt,[s("div",Xt,[R(h(e.min_label_text)+": ",1),d(fe,{ref:"bestinput",modelValue:e.rangevalue.min,"onUpdate:modelValue":[a[1]||(a[1]=r=>e.rangevalue.min=r),e.validateworst],modelModifiers:{number:!0},type:"number",step:5e3,filled:"",style:{"max-width":"110px"},rules:[r=>r<=e.rangevalue.max||"Must be lower than "+e.max_label_text]},null,8,["modelValue","rules","onUpdate:modelValue"])]),s("div",Gt,[R(h(e.max_label_text)+": ",1),d(fe,{ref:"worstinput",modelValue:e.rangevalue.max,"onUpdate:modelValue":[a[2]||(a[2]=r=>e.rangevalue.max=r),e.validatebest],modelModifiers:{number:!0},type:"number",step:5e3,filled:"",style:{"max-width":"110px"},rules:[r=>r>=e.rangevalue.min||"Must be higher than "+e.min_label_text]},null,8,["modelValue","rules","onUpdate:modelValue"])])])],64)}var tt=K(Ot,[["render",Kt]]);const Yt=G({name:"BrrCalcGdv",emits:["projectchanged"],components:{SliderWithTextInput:tt},data(){return{gdvitems:[{id:1,name:"",gdvrange:{min:4e5,max:6e5}}],isValid:!0,emit_project_change_notification:!0}},methods:{format_currency(e){return Z.format_currency(e)},addgdvitem(){var e=Math.max(...this.gdvitems.map(a=>a.id));this.gdvitems.push({id:e+1,name:"",gdvrange:{min:4e5,max:6e5}}),this.updateisvalid()},delrow(e){this.gdvitems.length<2||(this.gdvitems=this.gdvitems.filter(function(a){return a.id!=e}),this.updateisvalid())},updateisvalid(){const e=this;setTimeout(function(){let a=!0;e.$refs.slider.forEach(function(u){u.isValid||(a=!1)}),e.isValid=!e.isValid,e.isValid=a},5)},serializer_load_data(e){this.emit_project_change_notification=!1,this.gdvitems=e.gdvitems;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},computed:{totalmin(){return[...this.gdvitems.map(e=>e.gdvrange.min)].reduce((e,a)=>e+a,0)},totalmax(){return[...this.gdvitems.map(e=>e.gdvrange.max)].reduce((e,a)=>e+a,0)},total(){return{min:this.totalmin,max:this.totalmax}},serializer_card_data(){return{gdvitems:this.gdvitems}}},watch:{total(e){this.emit_project_change_notification&&this.$emit("projectchanged","GDV")}}}),Ht=s("div",{class:"text-h6"},"GDV (Gross Development Value) ",-1),Jt=s("div",{class:"text-subtitle2"},"This is the estimated final value of the property after works are complete",-1),Zt={class:"row"},ea={class:"col-grow",style:{"align-self":"flex-end"}},ta={class:"col-grow"},aa=s("div",null,"If the property is to be split into flats add the GDV of each above and the number below is the total GDV.",-1),ra={class:"text-h6"};function na(e,a,u,i,t,o){const r=He("SliderWithTextInput");return y(),O(ie,{inline:"",class:"q-ma-sm card-style"},{default:g(()=>[d(V,null,{default:g(()=>[Ht,Jt]),_:1}),d(V,null,{default:g(()=>[(y(!0),j(ge,null,Be(e.gdvitems,c=>(y(),j("div",{class:"col",key:c.id},[s("div",Zt,[d(fe,{modelValue:c.name,"onUpdate:modelValue":m=>c.name=m,label:"Item"},null,8,["modelValue","onUpdate:modelValue"]),s("div",ea,h(e.format_currency(c.gdvrange.min))+" - "+h(e.format_currency(c.gdvrange.max)),1),this.gdvitems.length>1?(y(),O(re,{key:0,round:"",icon:"delete",onClick:m=>e.delrow(c.id)},null,8,["onClick"])):W("",!0)]),s("div",ta,[d(r,{ref_for:!0,ref:"slider",range:c.gdvrange,"onUpdate:range":[m=>c.gdvrange=m,e.updateisvalid],min_prefix:"Worst \xA3",max_prefix:"Best \xA3",min_label_text:"Worst Price",max_label_text:"Best Price"},null,8,["range","onUpdate:range"])])]))),128)),d(re,{round:"",color:"primary",icon:"add",onClick:e.addgdvitem},null,8,["onClick"]),aa,s("div",ra,"Total: "+h(e.format_currency(e.totalmin))+" - "+h(e.format_currency(e.totalmax)),1)]),_:1})]),_:1})}var xr=K(Yt,[["render",na]]);const ia=G({name:"BrrCalcPurchase",props:["purchaserange"],emits:["update:purchaserange","projectchanged"],components:{SliderWithTextInput:tt},data(){return{emit_project_change_notification:!0}},methods:{serializer_load_data(e){this.emit_project_change_notification=!1,this.purchaserangevalue=e.purchaserangevalue;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)},format_currency(e){return Z.format_currency(e)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","PurchasePrice")}},computed:{serializer_card_data(){return{purchaserangevalue:this.purchaserangevalue}},isValid(){return this.$refs.slider.isValid},purchaserangevalue:{get(){return this.purchaserange},set(e){this.$emit("update:purchaserange",e)}},purchase_items(){return[{name:"Purchase Property",worst:-1*this.purchaserange.max,best:-1*this.purchaserange.min}]}}}),oa=s("div",{class:"text-h6"},"Purchase Price",-1),sa=s("div",{class:"text-subtitle2"},"In this section we work out the purchase price. This figure is not just read from the listing we will aim to get a below market value (BMV) price and this will involve finding the right property seller and being able to negotiate the price.",-1),la={class:"text-h6"};function ua(e,a,u,i,t,o){const r=He("SliderWithTextInput");return y(),O(ie,{inline:"",class:"q-ma-sm card-style"},{default:g(()=>[d(V,null,{default:g(()=>[oa,sa]),_:1}),d(V,null,{default:g(()=>[d(r,{ref:"slider",range:e.purchaserangevalue,"onUpdate:range":a[0]||(a[0]=c=>e.purchaserangevalue=c)},null,8,["range"]),s("div",la,"Price: "+h(e.format_currency(e.purchaserangevalue.min))+" - "+h(e.format_currency(e.purchaserangevalue.max)),1)]),_:1})]),_:1})}var wr=K(ia,[["render",ua]]);const ma=G({name:"BrrCalcRefurbCost",emits:["projectchanged"],data(){return{refurbrange:{min:3e4,max:4e4},refurbtimerange:{min:6,max:12},emit_project_change_notification:!0}},methods:{format_currency(e){return Z.format_currency(e)},serializer_load_data(e){this.emit_project_change_notification=!1,this.refurbrange=e.refurbrange,this.refurbtimerange=e.refurbtimerange;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","RefurbCost")}},computed:{serializer_card_data(){return{refurbrange:this.refurbrange,refurbtimerange:this.refurbtimerange}},refurb_cost_total(){return this.refurbrange},refurb_cost_items(){return[{name:"Refurbishment",worst:-1*this.refurb_cost_total.max,best:-1*this.refurb_cost_total.min}]},refurbmonths(){return{worst:this.refurbtimerange.max,best:this.refurbtimerange.min}}}}),da=s("div",{class:"text-h6"},"Refurbishment",-1),ca=s("div",{class:"text-subtitle2"},"This section holds the details of the refurbishment. Put in the minimum and maximum estimated cost as well the length of time the refurbishment will take.",-1),ha={class:"col-grow"},va={class:"text-h6"},fa={class:"col-grow"},ga={class:"text-h6"},pa=s("div",null,"This figure is the amount of time to take out loans for and effects the amount of interest that needs to be paid.",-1);function ba(e,a,u,i,t,o){return y(),O(ie,{inline:"",class:"q-ma-sm card-style"},{default:g(()=>[d(V,null,{default:g(()=>[da,ca]),_:1}),d(V,null,{default:g(()=>[s("div",ha,[R(" \xA0 "),d(ue,{modelValue:e.refurbrange,"onUpdate:modelValue":a[0]||(a[0]=r=>e.refurbrange=r),min:0,max:2e5,step:1e3,"thumb-size":"40px","drag-range":"",label:"","left-label-value":"Best \xA3"+e.refurbrange.min/1e3+"k","right-label-value":"Worst \xA3"+e.refurbrange.max/1e3+"k"},null,8,["modelValue","left-label-value","right-label-value"])]),s("div",va,"Cost: "+h(e.format_currency(e.refurbrange.min))+" - "+h(e.format_currency(e.refurbrange.max)),1),s("div",fa,[R(" \xA0 "),d(ue,{modelValue:e.refurbtimerange,"onUpdate:modelValue":a[1]||(a[1]=r=>e.refurbtimerange=r),min:0,max:36,step:1,"thumb-size":"40px","drag-range":"",label:"","left-label-value":"Best "+e.refurbtimerange.min+" months","right-label-value":"Worst "+e.refurbtimerange.max+" months"},null,8,["modelValue","left-label-value","right-label-value"])]),s("div",ga,"Duration: "+h(e.refurbtimerange.min)+" - "+h(e.refurbtimerange.max)+" months",1),pa]),_:1})]),_:1})}var Cr=K(ma,[["render",ba]]);function Xe(e,a){return a<e.from?0:typeof e.upto=="undefined"?(a-e.from)*e.rate:a>e.upto?(e.upto-e.from)*e.rate:(a-e.from)*e.rate}const ya=G({name:"BrrCalcStampduty",emits:["projectchanged"],props:["purchaserange"],data(){return{table:{columns:[{name:"range",label:"Range",field:"range"},{name:"rate",label:"Rate",field:"rate"},{name:"min_amount",label:"Min",field:"min"},{name:"max_amount",label:"Max",field:"max"}]},stampdutydata:{exempt:!1,commercial:!1,location:"england",locationoptions:[{label:"England",value:"england"},{label:"Scotland",value:"scotland"}]},emit_project_change_notification:!0}},methods:{format_currency(e){return Z.format_currency(e)},helpexempt(){this.$q.dialog({title:"Stamp Duty Exempt",message:'Some purchases are stamp duty exempt. e.g. a freehold property under \xA340k. See <a href="https://www.gov.uk/stamp-duty-land-tax/reliefs-and-exemptions" target="_new">here</a> for details.',html:!0}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.stampdutydata.exempt=e.stampdutydata_exempt,this.stampdutydata.commercial=e.stampdutydata_commercial,this.stampdutydata.location=e.stampdutydata_location;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","StampDuty")}},computed:{serializer_card_data(){return{stampdutydata_exempt:this.stampdutydata.exempt,stampdutydata_commercial:this.stampdutydata.commercial,stampdutydata_location:this.stampdutydata.location}},stampduty(){var e=0,a=0;let u=0;for(;u<this.stampdutybandswithamount.length;)e+=this.stampdutybandswithamount[u].min,a+=this.stampdutybandswithamount[u].max,u++;return{min:e,max:a}},stampduty_items(){return this.stampdutydata.exempt?[]:[{name:"Stamp Duty",worst:-1*this.stampduty.max,best:-1*this.stampduty.min}]},stampdutybandswithamount(){var e=this;return this.stampdutybands.bands.map(function(a){return{range:Z.format_currency(a.from)+" - "+Z.format_currency(a.upto),rate:a.rate*100+"%",min:Xe(a,e.purchaserange.min),max:Xe(a,e.purchaserange.max)}})},stampdutybands(){return this.stampdutydata.exempt?{name:"exempt",bands:[{from:0,upto:void 0,rate:0}]}:this.stampdutydata.commercial?this.stampdutydata.location==="england"?{name:"England Commercial",bands:[{from:0,upto:15e4,rate:0},{from:15e4,upto:25e4,rate:.02},{from:25e4,upto:void 0,rate:.05}]}:{name:"Scotland Commercial",bands:[{from:0,upto:15e4,rate:0},{from:15e4,upto:25e4,rate:.01},{from:25e4,upto:void 0,rate:.05}]}:this.stampdutydata.location==="england"?{name:"England Residential",bands:[{from:0,upto:25e4,rate:.03},{from:25e4,upto:925e3,rate:.08},{from:925e3,upto:15e5,rate:.13},{from:15e5,upto:void 0,rate:.15}]}:{name:"Scotland Residential",bands:[{from:0,upto:4e4,rate:0},{from:4e4,upto:145e3,rate:.03},{from:145e3,upto:25e4,rate:.05},{from:25e4,upto:325e3,rate:.08},{from:325e3,upto:75e4,rate:.13},{from:75e4,upto:void 0,rate:.15}]}}}}),_a=s("div",{class:"text-h6"},"Stamp Duty",-1),xa=s("div",{class:"text-subtitle2"},"Stampduty calculation assuming investment property. This is a basic calculator useful for estimates. Factors effecting stamp duty include if the property is habitable, if it\u2019s a commercial property and there are different rules for Scotland.",-1),wa={class:"q-pa-lg"},Ca={class:"text-h6"};function $a(e,a,u,i,t,o){return y(),O(ie,{inline:"",class:"q-ma-sm card-style"},{default:g(()=>[d(V,null,{default:g(()=>[_a,xa]),_:1}),d(V,null,{default:g(()=>[d(ne,{modelValue:e.stampdutydata.exempt,"onUpdate:modelValue":a[0]||(a[0]=r=>e.stampdutydata.exempt=r),label:"Stampduty Exempt"},null,8,["modelValue"]),d(re,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpexempt},null,8,["onClick"]),d(ne,{modelValue:e.stampdutydata.commercial,"onUpdate:modelValue":a[1]||(a[1]=r=>e.stampdutydata.commercial=r),label:"Commercial"},null,8,["modelValue"]),s("div",wa,[R(" Property Location "),d(Te,{modelValue:e.stampdutydata.location,"onUpdate:modelValue":a[2]||(a[2]=r=>e.stampdutydata.location=r),options:e.stampdutydata.locationoptions,inline:""},null,8,["modelValue","options"]),s("div",Ca,"Stamp Duty: "+h(e.format_currency(e.stampduty.min))+" - "+h(e.format_currency(e.stampduty.max)),1)]),d(zt,{"expand-separator":"",icon:"info",label:"Details"},{default:g(()=>[s("div",null,[d(jt,{title:e.stampdutybands.name,columns:e.table.columns,rows:e.stampdutybandswithamount,"hide-bottom":""},{"body-cell-min_amount":g(r=>[d(Ue,{props:r},{default:g(()=>[R(h(e.format_currency(r.value)),1)]),_:2},1032,["props"])]),"body-cell-max_amount":g(r=>[d(Ue,{props:r},{default:g(()=>[R(h(e.format_currency(r.value)),1)]),_:2},1032,["props"])]),_:1},8,["title","columns","rows"])])]),_:1})]),_:1})]),_:1})}var $r=K(ya,[["render",$a]]);const ka=()=>({});var he=Ke({name:"QSlider",props:{...Je,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Ze,setup(e,{emit:a}){const{proxy:{$q:u}}=Re(),{state:i,methods:t}=et({updateValue:M,updatePosition:A,getDragging:Y,formAttrs:qt(e)}),o=P(null),r=P(0),c=P(0);function m(){c.value=e.modelValue===null?i.innerMin.value:E(e.modelValue,i.innerMin.value,i.innerMax.value)}Ye(()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,m),m();const f=l(()=>t.convertModelToRatio(c.value)),B=l(()=>i.active.value===!0?r.value:f.value),L=l(()=>{const w={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(B.value-i.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(w.backgroundImage=`url(${e.selectionImg}) !important`),w}),C=t.getThumbRenderFn({focusValue:!0,getNodeData:ka,ratio:B,label:l(()=>e.labelValue!==void 0?e.labelValue:c.value),thumbColor:l(()=>e.thumbColor||e.color),labelColor:l(()=>e.labelColor),labelTextColor:l(()=>e.labelTextColor)}),T=l(()=>i.editable.value!==!0?{}:u.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:I,onBlur:t.onBlur,onKeydown:N,onKeyup:t.onKeyup});function M(w){c.value!==e.modelValue&&a("update:modelValue",c.value),w===!0&&a("change",c.value)}function Y(){return o.value.getBoundingClientRect()}function A(w,D=i.dragging.value){const Q=t.getDraggingRatio(w,D);c.value=t.convertRatioToModel(Q),r.value=e.snap!==!0||e.step===0?Q:t.convertModelToRatio(c.value)}function I(){i.focus.value=!0}function N(w){if(!Fe.includes(w.keyCode))return;Se(w);const D=([34,33].includes(w.keyCode)?10:1)*i.step.value,Q=([34,37,40].includes(w.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*D;c.value=E(parseFloat((c.value+Q).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),M()}return()=>{const w=t.getContent(L,i.tabindex,T,D=>{D.push(C())});return q("div",{ref:o,class:i.classes.value+(e.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},w)}}});const Ge={l1:{lt249:{min:300,max:500},lt349:{min:500,max:600},lt449:{min:600,max:700},top:{min:700,max:900}},l2:{lt249:{min:400,max:600},lt349:{min:600,max:700},lt449:{min:700,max:800},top:{min:800,max:1e3}},l3:{lt249:{min:630,max:800},lt349:{min:800,max:900},lt449:{min:900,max:1100},top:{min:1e3,max:1500}}},Ma=G({name:"BrrCalcOtherCosts",emits:["projectchanged"],props:["purchaserange"],data(){return{emit_project_change_notification:!0,auction:!1,survey:{type:"l3",typeoptions:[{label:"None",value:"none"},{label:"RICS Level 1",value:"l1"},{label:"RICS Level 2",value:"l2"},{label:"RICS Level 3",value:"l3"}]},sourcing:{usesourcing:!1,custom:3e3,type:"threek",typeoptions:[{label:"\xA33,000",value:"threek"},{label:"2% of purchase",value:"twopercent"},{label:"Custom",value:"custom"}]},consts:{auction_survey:300,auction_legal_review:150}}},methods:{format_currency(e){return Z.format_currency(e)},helpsurvey(){this.$q.dialog({title:"RICS Survey",message:'See <a href="https://hoa.org.uk/advice/guides-for-homeowners/i-am-buying/how-much-does-a-house-survey-cost/" target="_new">this website</a> here for my source info for caculating survey costs. for details.',html:!0}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.auction=e.auction,this.survey.type=e.survey_type,this.sourcing.usesourcing=e.sourcing_usesourcing,this.sourcing.custom=e.sourcing_custom,this.sourcing.type=e.sourcing_type;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","OtherCosts")}},computed:{serializer_card_data(){return{auction:this.auction,survey_type:this.survey.type,sourcing_usesourcing:this.sourcing.usesourcing,sourcing_custom:this.sourcing.custom,sourcing_type:this.sourcing.type}},surveyfeetext(){return this.surveyfee.min===this.surveyfee.max?this.format_currency(this.surveyfee.min):this.format_currency(this.surveyfee.min)+"-"+this.format_currency(this.surveyfee.max)},surveyfee(){if(this.survey.type==="none")return{min:0,max:0};function e(u){return u<249e3?"lt249":u<349e3?"lt349":u<449e3?"lt449":"top"}var a={min:e(this.purchaserange.min),max:e(this.purchaserange.max)};return{min:Ge[this.survey.type][a.min].min,max:Ge[this.survey.type][a.max].max}},sourcingfeetext(){return this.sourcingfee.min===this.sourcingfee.max?this.format_currency(this.sourcingfee.min):this.format_currency(this.sourcingfee.min)+"-"+this.format_currency(this.sourcingfee.max)},sourcingfee(){return this.sourcing.usesourcing?this.sourcing.type==="threek"?{min:3e3,max:3e3}:this.sourcing.type==="custom"?{min:this.sourcing.custom,max:this.sourcing.custom}:{min:this.purchaserange.min*.02,max:this.purchaserange.max*.02}:{min:0,max:0}},fees(){return{min:2300,max:2300}},total(){let e={min:0,max:0};return this.othercosts_items_detail.forEach(function(u){e.min+=-1*u.best,e.max+=-1*u.worst}),e},othercosts_items(){let e=[];return e.push({name:"Other Costs",worst:-1*this.total.max,best:-1*this.total.min}),e},othercosts_items_detail(){let e=[];return e.push({name:"Fees",worst:-1*this.fees.max,best:-1*this.fees.min}),this.auction&&(e.push({name:"Auction Survey",worst:-1*this.consts.auction_survey,best:-1*this.consts.auction_survey}),e.push({name:"Auction Legal Review",worst:-1*this.consts.auction_legal_review,best:-1*this.consts.auction_legal_review})),this.sourcing.usesourcing&&e.push({name:"Sourcing Fee",worst:-1*this.sourcingfee.max,best:-1*this.sourcingfee.min}),this.survey.type!=="none"&&e.push({name:"Survey",worst:-1*this.surveyfee.max,best:-1*this.surveyfee.min}),e}}}),Va=s("div",{class:"text-h6"},"Other Costs",-1),Ta=s("div",{class:"text-subtitle2"},"Other costs to be considered",-1),Sa={class:"text-h6"},Ra=s("div",{class:"text-h6"},"Auction",-1),Ba={key:0},La=s("div",null,"Note survey and legal pack review costs may greater as they may have been done multiple times for auctions not won",-1),Fa=s("div",{class:"text-h6"},"Sourcing",-1),qa={key:0},ja={key:0},za={class:"col-grow"},Ia={class:"text-h6"},Ea=s("div",null,"If you\u2019re getting a pre-purchase survey report on the building select the type.",-1),Pa={class:"text-h6"};function Aa(e,a,u,i,t,o){return y(),O(ie,{inline:"",class:"q-ma-sm card-style"},{default:g(()=>[d(V,null,{default:g(()=>[Va,Ta]),_:1}),d(V,null,{default:g(()=>[s("div",Sa,"Solicitors Fees: "+h(e.format_currency(e.fees.min))+" - "+h(e.format_currency(e.fees.max)),1)]),_:1}),d(V,null,{default:g(()=>[Ra,s("div",null,[d(ne,{modelValue:e.auction,"onUpdate:modelValue":a[0]||(a[0]=r=>e.auction=r),label:"Buying at auction"},null,8,["modelValue"])]),e.auction?(y(),j("div",Ba,[s("div",null,"\xA3"+h(e.consts.auction_survey)+" to get a survey",1),s("div",null,"\xA3"+h(e.consts.auction_legal_review)+" to get a review of legal pack",1),La])):W("",!0)]),_:1}),d(V,null,{default:g(()=>[Fa,s("div",null,[d(ne,{modelValue:e.sourcing.usesourcing,"onUpdate:modelValue":a[1]||(a[1]=r=>e.sourcing.usesourcing=r),label:"Found using a deal sourcer"},null,8,["modelValue"])]),e.sourcing.usesourcing?(y(),j("div",qa,[d(Te,{modelValue:e.sourcing.type,"onUpdate:modelValue":a[2]||(a[2]=r=>e.sourcing.type=r),options:e.sourcing.typeoptions,inline:""},null,8,["modelValue","options"]),e.sourcing.type==="custom"?(y(),j("div",ja,[s("div",za,[d(he,{label:"","label-value":e.format_currency(e.sourcing.custom),modelValue:e.sourcing.custom,"onUpdate:modelValue":a[3]||(a[3]=r=>e.sourcing.custom=r),min:500,max:1e4,step:500,"thumb-size":"40px"},null,8,["label-value","modelValue"])])])):W("",!0),R(" Sourcing fee: "+h(e.sourcingfeetext),1)])):W("",!0)]),_:1}),d(V,null,{default:g(()=>[s("div",Ia,[R("Survey"),d(re,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpsurvey},null,8,["onClick"])]),Ea,d(Te,{modelValue:e.survey.type,"onUpdate:modelValue":a[4]||(a[4]=r=>e.survey.type=r),options:e.survey.typeoptions,inline:""},null,8,["modelValue","options"]),s("div",null,"Survey cost: "+h(e.surveyfeetext)+" (Based on stored ranges for this purchase cost.)",1)]),_:1}),d(V,null,{default:g(()=>[s("div",Pa,"Total: "+h(e.format_currency(e.total.min))+" - "+h(e.format_currency(e.total.max)),1)]),_:1})]),_:1})}var kr=K(Ma,[["render",Aa]]);const Da=G({name:"BrrCalcFinance",emits:["projectchanged"],props:["purchaserange","refurb_cost_total","stampduty_total","othercosts_total","refurbmonths","gdv_total"],data(){return{emit_project_change_notification:!0,bridge:{usebridge:!1,startcost:.01,endcost:.01,monthlycost:.01,amount:{worst:1,best:1}},mortgage:{usemortgage:!1,rate:{min:6,max:6},ltv:{min:75,max:75},arrangementfee:1500},loans:[]}},methods:{format_currency(e){return Z.format_currency(e)},addloan(){var e=0;this.loans.length>0&&(e=Math.max(...this.loans.map(a=>a.id))),this.loans.push({id:e+1,name:"Loan "+(e+1).toString(),amount:2e4,rate:10})},delloan(e){this.loans.length<1||(this.loans=this.loans.filter(function(a){return a.id!=e}))},updatemortgagetoggle(){this.bridge.usebridge&&this.mortgage.usemortgage&&(Ne.create({color:"bg-grey-2",message:"Use mortgage or bridge but not both",timeout:2e3}),this.mortgage.usemortgage=!1)},updatebridgetoggle(){this.bridge.usebridge&&this.mortgage.usemortgage&&(Ne.create({color:"bg-grey-2",message:"Use mortgage or bridge but not both",timeout:2e3}),this.bridge.usebridge=!1)},serializer_load_data(e){this.emit_project_change_notification=!1,this.bridge=e.bridge,this.mortgage=e.mortgage,this.loans=e.loans;const a=this;setTimeout(function(){a.emit_project_change_notification=!0},150)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:serializer")},totalmoneyneeded(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:totalmoneyneeded")},finance_out_items(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:outitems")}},computed:{caculated_loan_details(){return this.loans.map(function(e){return{id:e.id,name:e.name,amount:e.amount,rate:e.rate,interest:e.amount*e.rate/100}})},serializer_card_data(){return{bridge:this.bridge,mortgage:this.mortgage,loans:this.loans}},mortgage_amount_borrowed(){return{best:this.purchaserange.min*(this.mortgage.ltv.min/100),worst:this.purchaserange.max*(this.mortgage.ltv.max/100)}},mortgage_monthly_payment(){return{best:this.mortgage_amount_borrowed.best*(this.mortgage.rate.min/100)/12,worst:this.mortgage_amount_borrowed.worst*(this.mortgage.rate.max/100)/12}},maxbridge(){return{best:this.purchaserange.min*.7,worst:this.purchaserange.max*.7}},maxloan(){return{best:this.totalexpenditure.min,worst:this.totalexpenditure.max}},bridgecost(){if(!this.bridge.usebridge)return{best:0,worst:0};var e=this.bridge.amount.best*(this.bridge.startcost+this.bridge.endcost+this.bridge.monthlycost*this.bridgemontghsupfront.min),a=this.bridge.amount.worst*(this.bridge.startcost+this.bridge.endcost+this.bridge.monthlycost*this.bridgemontghsupfront.max);return{best:e,worst:a}},bridgemontghsupfront(){var e=12;this.refurbmonths.best>12&&(e=this.refurbmonths.best);var a=12;return this.refurbmonths.worst>12&&(a=this.refurbmonths.worst),{min:e,max:a}},totalexpenditure(){var e={min:this.purchaserange.min+this.refurb_cost_total.min+this.stampduty_total.min+this.othercosts_total.min,max:this.purchaserange.max+this.refurb_cost_total.max+this.stampduty_total.max+this.othercosts_total.max};return e},totalmoneyneeded(){var e=0;return this.loans.length>0&&(e=this.loans.reduce(function(a,u){return a+u.amount},0)),this.mortgage.usemortgage?{worst:this.totalexpenditure.max+this.mortgage_intrest_payment_total.worst+this.mortgage.arrangementfee-(this.mortgage_amount_borrowed.worst+e),best:this.totalexpenditure.min+this.mortgage_intrest_payment_total.best+this.mortgage.arrangementfee-(this.mortgage_amount_borrowed.best+e)}:this.bridge.usebridge?{worst:this.totalexpenditure.max-e-this.bridge.amount.worst+this.bridgecost.worst,best:this.totalexpenditure.min-e-this.bridge.amount.best+this.bridgecost.best}:{worst:this.totalexpenditure.max-e,best:this.totalexpenditure.min-e}},finance_in_items_without_cash(){let e=[];return this.loans.map(function(a){e.push({name:a.name,worst:a.amount,best:a.amount})}),this.mortgage.usemortgage&&(e.push({name:"Mortgage Payment",worst:this.mortgage_amount_borrowed.worst,best:this.mortgage_amount_borrowed.best}),e.push({name:"Mortgage Arrangement Fee",worst:-this.mortgage.arrangementfee,best:-this.mortgage.arrangementfee})),this.bridge.usebridge&&e.push({name:"Bridge Payment",worst:this.bridge.amount.worst-this.bridgecost.worst,best:this.bridge.amount.best-this.bridgecost.best}),e},finance_in_items(){let e=[];return e.push({name:"Finance Cash",worst:this.totalmoneyneeded.worst,best:this.totalmoneyneeded.best}),e=e.concat(this.finance_in_items_without_cash),e},mortgage_intrest_payment_total(){return{worst:this.mortgage_monthly_payment.worst*this.refurbmonths.worst,best:this.mortgage_monthly_payment.worst*this.refurbmonths.best}},finance_during_items(){let e=[];return this.mortgage.usemortgage&&e.push({name:"Mortgage Intrest payments (x"+this.refurbmonths.worst+"/"+this.refurbmonths.best+" months)",worst:-1*this.mortgage_intrest_payment_total.worst,best:-1*this.mortgage_intrest_payment_total.best}),e},finance_out_items(){let e=[];return this.loans.map(function(a){var u=-(a.amount+a.amount*a.rate/100);e.push({name:"Repay "+a.name,worst:u,best:u})}),this.mortgage.usemortgage&&e.push({name:"Payback Purchase Mortgage Capital",worst:-1*this.mortgage_amount_borrowed.worst,best:-1*this.mortgage_amount_borrowed.best}),this.bridge.usebridge&&(e.push({name:"Bridge Payback",worst:this.bridge.amount.worst*-1,best:this.bridge.amount.best*-1}),e.push({name:"Bridge Interest Credit",worst:(12-this.refurbmonths.worst)*.01*this.bridgecost.worst,best:(12-this.refurbmonths.best)*.01*this.bridgecost.best})),e}}}),Na=s("div",{class:"text-h6"},"Finance",-1),Ua=s("div",{class:"text-subtitle2"},"This section is to estimate the finance costs of the project.",-1),Oa=s("div",{class:"text-h6"},"Total Expenditure",-1),Wa=s("div",{class:"text-h6"},"Loans",-1),Qa=s("p",null,"Loans that will be paid back at the refinance stage. Same loans are used for best and worst calculations",-1),Xa=s("div",null,"\xA0",-1),Ga={class:"col-grow"},Ka=s("p",null,"Fixed return loans",-1),Ya=s("div",{class:"text-h6"},"Mortgage",-1),Ha={key:0},Ja=s("div",{class:"text-h6"},"Bridge",-1),Za={key:0},er={class:"row"},tr={class:"bridgeamountdiv"},ar=s("div",null,"Worst bridge amount",-1),rr={class:"bridgeamountdiv"},nr=s("div",null,"max bridging 60/70% value of money",-1),ir=s("div",null,"Best bridge amount",-1),or=s("div",{class:"text-h6"},"Cash",-1),sr=s("div",null,"This calculation will assume that all money not provided for loans or bridges will be provided by investors as cash.",-1),lr={class:"text-h6"};function ur(e,a,u,i,t,o){return y(),O(ie,{inline:"",class:"q-ma-sm card-style"},{default:g(()=>[d(V,null,{default:g(()=>[Na,Ua]),_:1}),d(V,null,{default:g(()=>[Oa,R(" "+h(e.format_currency(e.totalexpenditure.max))+" - "+h(e.format_currency(e.totalexpenditure.min))+" (Worst - best) ",1)]),_:1}),d(V,null,{default:g(()=>[Wa,Qa,s("div",null,[(y(!0),j(ge,null,Be(e.loans,r=>(y(),j("div",{key:r.id,class:"row"},[s("div",null," Loan "+h(r.id),1),Xa,s("div",null,[R(" Rate: "+h(r.rate)+"% ",1),d(fe,{modelValue:r.rate,"onUpdate:modelValue":c=>r.rate=c,modelModifiers:{number:!0},type:"number",filled:"",style:{"max-width":"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Ga,[R(" Amount: "+h(e.format_currency(r.amount)),1),d(he,{label:"","label-value":e.format_currency(r.amount),modelValue:r.amount,"onUpdate:modelValue":c=>r.amount=c,min:0,max:e.maxloan.worst,"thumb-size":"40px",step:5e3},null,8,["label-value","modelValue","onUpdate:modelValue","max"])]),d(re,{round:"",icon:"delete",onClick:c=>e.delloan(r.id)},null,8,["onClick"])]))),128))]),d(re,{round:"",color:"primary",icon:"add",onClick:e.addloan},null,8,["onClick"]),Ka]),_:1}),d(V,null,{default:g(()=>[Ya,d(ne,{modelValue:e.mortgage.usemortgage,"onUpdate:modelValue":[a[0]||(a[0]=r=>e.mortgage.usemortgage=r),e.updatemortgagetoggle],label:"Buy with Mortgage"},null,8,["modelValue","onUpdate:modelValue"]),e.mortgage.usemortgage?(y(),j("div",Ha,[R(" Rate: "+h(e.mortgage.rate.min)+"% - "+h(e.mortgage.rate.max)+"%",1),d(ue,{modelValue:e.mortgage.rate,"onUpdate:modelValue":a[1]||(a[1]=r=>e.mortgage.rate=r),min:0,max:10,step:.1,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":"Best "+e.mortgage.rate.min+"%","right-label-value":"Worst "+e.mortgage.rate.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),R(" LTV: "+h(e.mortgage.ltv.min)+"% - "+h(e.mortgage.ltv.max)+"%",1),d(ue,{modelValue:e.mortgage.ltv,"onUpdate:modelValue":a[2]||(a[2]=r=>e.mortgage.ltv=r),min:0,max:100,step:1,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":"Best "+e.mortgage.ltv.min+"%","right-label-value":"Worst "+e.mortgage.ltv.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),R(" This is based on a repayment mortgage. "),s("div",null,"Amount Borrowed: "+h(e.format_currency(e.mortgage_amount_borrowed.worst))+" - "+h(e.format_currency(e.mortgage_amount_borrowed.best)),1),s("div",null,"Monthly Repayments: "+h(e.format_currency(e.mortgage_monthly_payment.worst))+" - "+h(e.format_currency(e.mortgage_monthly_payment.best)),1),s("div",null,"Arrangement Fee: "+h(e.format_currency(e.mortgage.arrangementfee)),1)])):W("",!0)]),_:1}),d(V,null,{default:g(()=>[Ja,d(ne,{modelValue:e.bridge.usebridge,"onUpdate:modelValue":[a[3]||(a[3]=r=>e.bridge.usebridge=r),e.updatebridgetoggle],label:"Use a bridge"},null,8,["modelValue","onUpdate:modelValue"]),e.bridge.usebridge?(y(),j("div",Za,[s("div",null,"Start cost/End Cost: "+h(e.bridge.startcost*100)+"%/"+h(e.bridge.endcost*100)+"%",1),s("div",null,"Monthly cost: "+h(e.bridge.monthlycost*100)+"%",1),s("div",null,"Months cost paid upfront: "+h(e.bridgemontghsupfront.min)+" - "+h(e.bridgemontghsupfront.max),1),s("div",er,[s("div",tr,[ar,d(he,{label:"",modelValue:e.bridge.amount.worst,"onUpdate:modelValue":a[4]||(a[4]=r=>e.bridge.amount.worst=r),min:0,max:e.maxbridge.worst,step:5e3,"thumb-size":"40px"},null,8,["modelValue","max"]),s("div",null,"Amount: "+h(e.format_currency(e.bridge.amount.worst)),1),s("div",null,"Cost: "+h(e.format_currency(e.bridgecost.worst)),1)]),s("div",rr,[nr,ir,d(he,{label:"",modelValue:e.bridge.amount.best,"onUpdate:modelValue":a[5]||(a[5]=r=>e.bridge.amount.best=r),min:0,max:e.maxbridge.best,step:5e3,"thumb-size":"40px"},null,8,["modelValue","max"]),s("div",null,"Amount: "+h(e.format_currency(e.bridge.amount.best)),1),s("div",null,"Cost: "+h(e.format_currency(e.bridgecost.best)),1)])])])):W("",!0)]),_:1}),d(V,null,{default:g(()=>[or,R(" Cash is the money the investors put into the deal. It is free money as there is no interest payments for this money. "),sr,s("div",lr,h(e.format_currency(e.totalmoneyneeded.worst))+" - "+h(e.format_currency(e.totalmoneyneeded.best))+" (Worst - best) ",1)]),_:1})]),_:1})}var Mr=K(Da,[["render",ur]]);const mr=G({name:"InvalidMessage",props:["is_valid_input"],data(){return{}}}),dr={key:0,class:"invalidmessage col-grow"};function cr(e,a,u,i,t,o){return e.is_valid_input?W("",!0):(y(),j("div",dr,[d(ce,{name:"warning"}),R("Warning: Invalid input data! ")]))}var Vr=K(mr,[["render",cr]]);const hr=G({name:"FeatureTable",props:["features"],data(){return{}}}),vr={class:"featuretable"};function fr(e,a,u,i,t,o){return y(),j("div",vr,[(y(!0),j(ge,null,Be(e.features,r=>(y(),j("div",{key:r},[r.type==="positive"?(y(),O(ce,{key:0,name:"check_box",color:"green",size:"32px"})):W("",!0),r.type==="negative"?(y(),O(ce,{key:1,name:"cancel",color:"red",size:"32px"})):W("",!0),r.type==="neutral"?(y(),O(ce,{key:2,name:"remove",color:"orange",size:"32px"})):W("",!0),R(" "+h(r.text),1)]))),128))])}var Tr=K(hr,[["render",fr]]);export{Tr as F,xr as G,Vr as I,kr as O,wr as P,ue as Q,Cr as R,$r as S,Mr as a};
