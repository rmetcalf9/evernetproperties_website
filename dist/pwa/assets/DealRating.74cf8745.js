import{av as Ze,j as O,k as l,aw as St,ax as Te,n as Be,ay as et,az as Mt,u as be,aA as Vt,q as y,aB as Rt,aC as It,g as _e,m as ce,a1 as Fe,d as X,_ as Y,o as g,K as w,e as r,f as $,a as c,t as d,af as ve,M as ye,r as he,c as re,w as _,ae as j,O as je,Q as le,L as S,aa as ue,a0 as Lt,aD as Bt,aE as tt,R as Ft,T as jt,aq as Qe,X as qt,ai as We,ak as zt,al as Pt,x as At,a9 as Le,ag as oe,au as pe,aF as Dt,N as Ge}from"./index.0b2346be.js";import{u as K}from"./utils.99aafcb0.js";import{Q as Nt,b as Ke}from"./QTable.48d579d0.js";import{Q as Et,a as He,b as Se}from"./QItemLabel.bdf3332b.js";import{T as Ot}from"./TouchPan.7e858f5c.js";import{b as G}from"./QSelect.d1308ad4.js";import{F as Ut}from"./FeatureTable.39a9b367.js";const Xe="q-slider__marker-labels",Qt=e=>({value:e}),Wt=({marker:e})=>y("div",{key:e.value,style:e.style,class:e.classes},e.label),qe=[34,37,40,33,39,38],at={...et,...Mt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},nt=["pan","update:modelValue","change"];function rt({updateValue:e,updatePosition:t,getDragging:u,formAttrs:n}){const{props:a,emit:v,slots:i,proxy:{$q:m}}=be(),o=Ze(a,m),p=It(n),M=O(!1),q=O(!1),R=O(!1),U=O(!1),A=l(()=>a.vertical===!0?"--v":"--h"),f=l(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),I=l(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(m.lang.rtl===!0)),F=l(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),P=l(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),V=l(()=>a.disable!==!0&&a.readonly!==!0&&F.value<P.value),Q=l(()=>(String(a.step).trim().split(".")[1]||"").length),W=l(()=>a.step===0?1:a.step),de=l(()=>V.value===!0?a.tabindex||0:-1),J=l(()=>a.max-a.min),Z=l(()=>P.value-F.value),ee=l(()=>xe(F.value)),se=l(()=>xe(P.value)),H=l(()=>a.vertical===!0?I.value===!0?"bottom":"top":I.value===!0?"right":"left"),C=l(()=>a.vertical===!0?"height":"width"),k=l(()=>a.vertical===!0?"width":"height"),z=l(()=>a.vertical===!0?"vertical":"horizontal"),L=l(()=>{const s={role:"slider","aria-valuemin":F.value,"aria-valuemax":P.value,"aria-orientation":z.value,"data-step":a.step};return a.disable===!0?s["aria-disabled"]="true":a.readonly===!0&&(s["aria-readonly"]="true"),s}),N=l(()=>`q-slider q-slider${A.value} q-slider--${M.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(V.value===!0?" q-slider--editable":""))+(R.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(o.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+A.value:""));function h(s){const b="q-slider__"+s;return`${b} ${b}${A.value} ${b}${A.value}${f.value}`}function x(s){const b="q-slider__"+s;return`${b} ${b}${A.value}`}const E=l(()=>{const s=a.selectionColor||a.color;return"q-slider__selection absolute"+(s!==void 0?` text-${s}`:"")}),me=l(()=>x("markers")+" absolute overflow-hidden"),st=l(()=>x("track-container")),it=l(()=>h("pin")),ot=l(()=>h("label")),lt=l(()=>h("text-container")),ut=l(()=>h("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),mt=l(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),dt=l(()=>{const s={[k.value]:a.trackSize};return a.trackImg!==void 0&&(s.backgroundImage=`url(${a.trackImg}) !important`),s}),ct=l(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),Pe=l(()=>{const s=se.value-ee.value,b={[H.value]:`${100*ee.value}%`,[C.value]:s===0?"2px":`${100*s}%`};return a.innerTrackImg!==void 0&&(b.backgroundImage=`url(${a.innerTrackImg}) !important`),b});function ht(s){const{min:b,max:T,step:B}=a;let D=b+s*(T-b);if(B>0){const te=(D-F.value)%B;D+=(Math.abs(te)>=B/2?(te<0?-1:1)*B:0)-te}return Q.value>0&&(D=parseFloat(D.toFixed(Q.value))),G(D,F.value,P.value)}function xe(s){return J.value===0?0:(s-a.min)/J.value}function gt(s,b){const T=Vt(s),B=a.vertical===!0?G((T.top-b.top)/b.height,0,1):G((T.left-b.left)/b.width,0,1);return G(I.value===!0?1-B:B,ee.value,se.value)}const Ae=l(()=>St(a.markers)===!0?a.markers:W.value),De=l(()=>{const s=[],b=Ae.value,T=a.max;let B=a.min;do s.push(B),B+=b;while(B<T);return s.push(T),s}),Ne=l(()=>{const s=` ${Xe}${A.value}-`;return Xe+`${s}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${s}${I.value===!0?"rtl":"ltr"}`}),we=l(()=>a.markerLabels===!1?null:vt(a.markerLabels).map((s,b)=>({index:b,value:s.value,label:s.label||s.value,classes:Ne.value+(s.classes!==void 0?" "+s.classes:""),style:{...Oe(s.value),...s.style||{}}}))),Ee=l(()=>({markerList:we.value,markerMap:pt.value,classes:Ne.value,getStyle:Oe})),ft=l(()=>{const s=Z.value===0?"2px":100*Ae.value/Z.value;return{...Pe.value,backgroundSize:a.vertical===!0?`2px ${s}%`:`${s}% 2px`}});function vt(s){if(s===!1)return null;if(s===!0)return De.value.map(Qt);if(typeof s=="function")return De.value.map(T=>{const B=s(T);return Te(B)===!0?{...B,value:T}:{value:T,label:B}});const b=({value:T})=>T>=a.min&&T<=a.max;return Array.isArray(s)===!0?s.map(T=>Te(T)===!0?T:{value:T}).filter(b):Object.keys(s).map(T=>{const B=s[T],D=Number(T);return Te(B)===!0?{...B,value:D}:{value:D,label:B}}).filter(b)}function Oe(s){return{[H.value]:`${100*(s-a.min)/J.value}%`}}const pt=l(()=>{if(a.markerLabels===!1)return null;const s={};return we.value.forEach(b=>{s[b.value]=b}),s});function bt(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](Ee.value);const s=i["marker-label"]||Wt;return we.value.map(b=>s({marker:b,...Ee.value}))}const _t=l(()=>[[Ot,yt,void 0,{[z.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function yt(s){s.isFinal===!0?(U.value!==void 0&&(t(s.evt),s.touch===!0&&e(!0),U.value=void 0,v("pan","end")),M.value=!1,R.value=!1):s.isFirst===!0?(U.value=u(s.evt),t(s.evt),e(),M.value=!0,v("pan","start")):(t(s.evt),e())}function Ue(){R.value=!1}function xt(s){t(s,u(s)),e(),q.value=!0,M.value=!0,document.addEventListener("mouseup",ke,!0)}function ke(){q.value=!1,M.value=!1,e(!0),Ue(),document.removeEventListener("mouseup",ke,!0)}function wt(s){t(s,u(s)),e(!0)}function kt(s){qe.includes(s.keyCode)&&e(!0)}function $t(s){if(a.vertical===!0)return null;const b=m.lang.rtl!==a.reverse?1-s:s;return{transform:`translateX(calc(${2*b-1} * ${a.thumbSize} / 2 + ${50-100*b}%))`}}function Ct(s){const b=l(()=>q.value===!1&&(R.value===s.focusValue||R.value==="both")?" q-slider--focus":""),T=l(()=>`q-slider__thumb q-slider__thumb${A.value} q-slider__thumb${A.value}-${I.value===!0?"rtl":"ltr"} absolute non-selectable`+b.value+(s.thumbColor.value!==void 0?` text-${s.thumbColor.value}`:"")),B=l(()=>({width:a.thumbSize,height:a.thumbSize,[H.value]:`${100*s.ratio.value}%`,zIndex:R.value===s.focusValue?2:void 0})),D=l(()=>s.labelColor.value!==void 0?` text-${s.labelColor.value}`:""),te=l(()=>$t(s.ratio.value)),$e=l(()=>"q-slider__text"+(s.labelTextColor.value!==void 0?` text-${s.labelTextColor.value}`:""));return()=>{const Ce=[y("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[y("path",{d:a.thumbPath})]),y("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(Ce.push(y("div",{class:it.value+" absolute fit no-pointer-events"+D.value},[y("div",{class:ot.value,style:{minWidth:a.thumbSize}},[y("div",{class:lt.value,style:te.value},[y("span",{class:$e.value},s.label.value)])])])),a.name!==void 0&&a.disable!==!0&&p(Ce,"push")),y("div",{class:T.value,style:B.value,...s.getNodeData()},Ce)}}function Tt(s,b,T,B){const D=[];a.innerTrackColor!=="transparent"&&D.push(y("div",{key:"inner",class:ct.value,style:Pe.value})),a.selectionColor!=="transparent"&&D.push(y("div",{key:"selection",class:E.value,style:s.value})),a.markers!==!1&&D.push(y("div",{key:"marker",class:me.value,style:ft.value})),B(D);const te=[Rt("div",{key:"trackC",class:st.value,tabindex:b.value,...T.value},[y("div",{class:mt.value,style:dt.value},D)],"slide",V.value,()=>_t.value)];if(a.markerLabels!==!1){const $e=a.switchMarkerLabelsSide===!0?"unshift":"push";te[$e](y("div",{key:"markerL",class:ut.value},bt()))}return te}return Be(()=>{document.removeEventListener("mouseup",ke,!0)}),{state:{active:M,focus:R,preventFocus:q,dragging:U,editable:V,classes:N,tabindex:de,attributes:L,step:W,decimals:Q,trackLen:J,innerMin:F,innerMinRatio:ee,innerMax:P,innerMaxRatio:se,positionProp:H,sizeProp:C,isReversed:I},methods:{onActivate:xt,onMobileClick:wt,onBlur:Ue,onKeyup:kt,getContent:Tt,getThumbRenderFn:Ct,convertRatioToModel:ht,convertModelToRatio:xe,getDraggingRatio:gt}}}const ae={MIN:0,RANGE:1,MAX:2};var ge=_e({name:"QRange",props:{...at,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:nt,setup(e,{emit:t}){const{proxy:{$q:u}}=be(),{state:n,methods:a}=rt({updateValue:Z,updatePosition:se,getDragging:ee,formAttrs:l(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),v=O(null),i=O(0),m=O(0),o=O({min:0,max:0});function p(){o.value.min=e.modelValue.min===null?n.innerMin.value:G(e.modelValue.min,n.innerMin.value,n.innerMax.value),o.value.max=e.modelValue.max===null?n.innerMax.value:G(e.modelValue.max,n.innerMin.value,n.innerMax.value)}ce(()=>`${e.modelValue.min}|${e.modelValue.max}|${n.innerMin.value}|${n.innerMax.value}`,p),p();const M=l(()=>a.convertModelToRatio(o.value.min)),q=l(()=>a.convertModelToRatio(o.value.max)),R=l(()=>n.active.value===!0?i.value:M.value),U=l(()=>n.active.value===!0?m.value:q.value),A=l(()=>{const C={[n.positionProp.value]:`${100*R.value}%`,[n.sizeProp.value]:`${100*(U.value-R.value)}%`};return e.selectionImg!==void 0&&(C.backgroundImage=`url(${e.selectionImg}) !important`),C}),f=l(()=>{if(n.editable.value!==!0)return{};if(u.platform.is.mobile===!0)return{onClick:a.onMobileClick};const C={onMousedown:a.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(C,{onFocus:()=>{n.focus.value="both"},onBlur:a.onBlur,onKeydown:H,onKeyup:a.onKeyup}),C});function I(C){return u.platform.is.mobile!==!0&&n.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{n.focus.value=C},onBlur:a.onBlur,onKeydown:H,onKeyup:a.onKeyup}:{}}const F=l(()=>e.dragOnlyRange!==!0?n.tabindex.value:null),P=l(()=>u.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?n.tabindex.value:null),V=O(null),Q=l(()=>I("min")),W=a.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:V,key:"tmin",...Q.value,tabindex:F.value}),ratio:R,label:l(()=>e.leftLabelValue!==void 0?e.leftLabelValue:o.value.min),thumbColor:l(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:l(()=>e.leftLabelColor||e.labelColor),labelTextColor:l(()=>e.leftLabelTextColor||e.labelTextColor)}),de=l(()=>I("max")),J=a.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...de.value,key:"tmax",tabindex:F.value}),ratio:U,label:l(()=>e.rightLabelValue!==void 0?e.rightLabelValue:o.value.max),thumbColor:l(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:l(()=>e.rightLabelColor||e.labelColor),labelTextColor:l(()=>e.rightLabelTextColor||e.labelTextColor)});function Z(C){(o.value.min!==e.modelValue.min||o.value.max!==e.modelValue.max)&&t("update:modelValue",{...o.value}),C===!0&&t("change",{...o.value})}function ee(C){const{left:k,top:z,width:L,height:N}=v.value.getBoundingClientRect(),h=e.dragOnlyRange===!0?0:e.vertical===!0?V.value.offsetHeight/(2*N):V.value.offsetWidth/(2*L),x={left:k,top:z,width:L,height:N,valueMin:o.value.min,valueMax:o.value.max,ratioMin:M.value,ratioMax:q.value},E=a.getDraggingRatio(C,x);return e.dragOnlyRange!==!0&&E<x.ratioMin+h?x.type=ae.MIN:e.dragOnlyRange===!0||E<x.ratioMax-h?e.dragRange===!0||e.dragOnlyRange===!0?(x.type=ae.RANGE,Object.assign(x,{offsetRatio:E,offsetModel:a.convertRatioToModel(E),rangeValue:x.valueMax-x.valueMin,rangeRatio:x.ratioMax-x.ratioMin})):x.type=x.ratioMax-E<E-x.ratioMin?ae.MAX:ae.MIN:x.type=ae.MAX,x}function se(C,k=n.dragging.value){let z;const L=a.getDraggingRatio(C,k),N=a.convertRatioToModel(L);switch(k.type){case ae.MIN:L<=k.ratioMax?(z={minR:L,maxR:k.ratioMax,min:N,max:k.valueMax},n.focus.value="min"):(z={minR:k.ratioMax,maxR:L,min:k.valueMax,max:N},n.focus.value="max");break;case ae.MAX:L>=k.ratioMin?(z={minR:k.ratioMin,maxR:L,min:k.valueMin,max:N},n.focus.value="max"):(z={minR:L,maxR:k.ratioMin,min:N,max:k.valueMin},n.focus.value="min");break;case ae.RANGE:const h=L-k.offsetRatio,x=G(k.ratioMin+h,0,1-k.rangeRatio),E=N-k.offsetModel,me=G(k.valueMin+E,e.min,e.max-k.rangeValue);z={minR:x,maxR:x+k.rangeRatio,min:parseFloat(me.toFixed(n.decimals.value)),max:parseFloat((me+k.rangeValue).toFixed(n.decimals.value))},n.focus.value="both";break}o.value=o.value.min===null||o.value.max===null?{min:z.min||e.min,max:z.max||e.max}:{min:z.min,max:z.max},e.snap!==!0||e.step===0?(i.value=z.minR,m.value=z.maxR):(i.value=a.convertModelToRatio(o.value.min),m.value=a.convertModelToRatio(o.value.max))}function H(C){if(!qe.includes(C.keyCode))return;Fe(C);const k=([34,33].includes(C.keyCode)?10:1)*n.step.value,z=([34,37,40].includes(C.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*k;if(n.focus.value==="both"){const L=o.value.max-o.value.min,N=G(parseFloat((o.value.min+z).toFixed(n.decimals.value)),n.innerMin.value,n.innerMax.value-L);o.value={min:N,max:parseFloat((N+L).toFixed(n.decimals.value))}}else{if(n.focus.value===!1)return;{const L=n.focus.value;o.value={...o.value,[L]:G(parseFloat((o.value[L]+z).toFixed(n.decimals.value)),L==="min"?n.innerMin.value:o.value.min,L==="max"?n.innerMax.value:o.value.max)}}}Z()}return()=>{const C=a.getContent(A,P,f,k=>{k.push(W(),J())});return y("div",{ref:v,class:"q-range "+n.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},C)}}});const Gt=X({name:"SliderWithTextInput",props:{range:Object,min_prefix:{type:String,default:"Best \xA3"},max_prefix:{type:String,default:"Worst \xA3"},left_label_value:{type:String,default:""},right_label_value:{type:String,default:""},min_label_text:{type:String,default:"Best Price"},max_label_text:{type:String,default:"Worst Price"},min:{type:Number,default:0},max:{type:Number,default:1e6},step:{type:Number,default:5e3}},emits:["update:range"],data(){return{}},methods:{validateworst(){this.$refs.worstinput.validate(),this.emitrangevalue(this.rangevalue)},validatebest(){this.$refs.bestinput.validate(),this.emitrangevalue(this.rangevalue)},emitrangevalue(e){const t={min:this.ensurenumber(e.min),max:this.ensurenumber(e.max)};this.$emit("update:range",t)},ensurenumber(e){return e===null||typeof e=="undefined"||e===""?0:e}},computed:{left_label_value_used(){return this.left_label_value==""?this.min_prefix+this.rangevalue.min/1e3+"k":this.left_label_value},right_label_value_used(){return this.right_label_value==""?this.max_prefix+this.rangevalue.max/1e3+"k":this.right_label_value},isValid(){return this.$refs.worstinput.validate()?this.$refs.bestinput.validate():!1},rangevalue:{get(){return this.range},set(e){this.emitrangevalue(e)}}}}),Kt={class:"col-grow"},Ht={class:"col-grow row"},Xt={class:"pricetblcell"},Yt={class:"pricetblcell"};function Jt(e,t,u,n,a,v){return g(),w(ye,null,[r("div",Kt,[$(" \xA0 "),c(ge,{modelValue:e.rangevalue,"onUpdate:modelValue":t[0]||(t[0]=i=>e.rangevalue=i),min:e.min,max:e.max,step:e.step,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":e.left_label_value_used,"right-label-value":e.right_label_value_used},null,8,["modelValue","min","max","step","left-label-value","right-label-value"])]),r("div",Ht,[r("div",Xt,[$(d(e.min_label_text)+": ",1),c(ve,{ref:"bestinput",modelValue:e.rangevalue.min,"onUpdate:modelValue":[t[1]||(t[1]=i=>e.rangevalue.min=i),e.validateworst],modelModifiers:{number:!0},type:"number",step:e.step,filled:"",style:{"max-width":"110px"},rules:[i=>i<=e.rangevalue.max||"Must be lower than "+e.max_label_text]},null,8,["modelValue","step","rules","onUpdate:modelValue"])]),r("div",Yt,[$(d(e.max_label_text)+": ",1),c(ve,{ref:"worstinput",modelValue:e.rangevalue.max,"onUpdate:modelValue":[t[2]||(t[2]=i=>e.rangevalue.max=i),e.validatebest],modelModifiers:{number:!0},type:"number",step:e.step,filled:"",style:{"max-width":"110px"},rules:[i=>i>=e.rangevalue.min||"Must be higher than "+e.min_label_text]},null,8,["modelValue","step","rules","onUpdate:modelValue"])])])],64)}var ze=Y(Gt,[["render",Jt]]);const Zt=X({name:"BrrCalcGdv",emits:["projectchanged"],components:{SliderWithTextInput:ze},data(){return{gdvitems:[{id:1,name:"",gdvrange:{min:4e5,max:6e5}}],isValid:!0,emit_project_change_notification:!0}},methods:{format_currency(e){return K.format_currency(e)},addgdvitem(){var e=Math.max(...this.gdvitems.map(t=>t.id));this.gdvitems.push({id:e+1,name:"",gdvrange:{min:4e5,max:6e5}}),this.updateisvalid()},delrow(e){this.gdvitems.length<2||(this.gdvitems=this.gdvitems.filter(function(t){return t.id!=e}),this.updateisvalid())},updateisvalid(){const e=this;setTimeout(function(){let t=!0;e.$refs.slider.forEach(function(u){u.isValid||(t=!1)}),e.isValid=!e.isValid,e.isValid=t},5)},serializer_load_data(e){this.emit_project_change_notification=!1,this.gdvitems=e.gdvitems;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}},computed:{totalmin(){return[...this.gdvitems.map(e=>e.gdvrange.min)].reduce((e,t)=>e+t,0)},totalmax(){return[...this.gdvitems.map(e=>e.gdvrange.max)].reduce((e,t)=>e+t,0)},total(){return{min:this.totalmin,max:this.totalmax}},serializer_card_data(){return{gdvitems:this.gdvitems}}},watch:{total(e){this.emit_project_change_notification&&this.$emit("projectchanged","GDV")}}}),ea=r("div",{class:"text-h6"},"GDV (Gross Development Value) ",-1),ta=r("div",{class:"text-subtitle2"},"This is the estimated final value of the property after works are complete",-1),aa={class:"row"},na={class:"col-grow",style:{"align-self":"flex-end"}},ra={class:"col-grow"},sa=r("div",null,"If the property is to be split into flats add the GDV of each above and the number below is the total GDV.",-1),ia={class:"text-h6"};function oa(e,t,u,n,a,v){const i=he("SliderWithTextInput");return g(),re(ue,{inline:"",class:"q-ma-sm card-style"},{default:_(()=>[c(j,null,{default:_(()=>[ea,ta]),_:1}),c(j,null,{default:_(()=>[(g(!0),w(ye,null,je(e.gdvitems,m=>(g(),w("div",{class:"col",key:m.id},[r("div",aa,[c(ve,{modelValue:m.name,"onUpdate:modelValue":o=>m.name=o,label:"Item"},null,8,["modelValue","onUpdate:modelValue"]),r("div",na,d(e.format_currency(m.gdvrange.min))+" - "+d(e.format_currency(m.gdvrange.max)),1),this.gdvitems.length>1?(g(),re(le,{key:0,round:"",icon:"delete",onClick:o=>e.delrow(m.id)},null,8,["onClick"])):S("",!0)]),r("div",ra,[c(i,{ref_for:!0,ref:"slider",range:m.gdvrange,"onUpdate:range":[o=>m.gdvrange=o,e.updateisvalid],min_prefix:"Worst \xA3",max_prefix:"Best \xA3",min_label_text:"Worst Price",max_label_text:"Best Price"},null,8,["range","onUpdate:range"])])]))),128)),c(le,{round:"",color:"primary",icon:"add",onClick:e.addgdvitem},null,8,["onClick"]),sa,r("div",ia,"Total: "+d(e.format_currency(e.totalmin))+" - "+d(e.format_currency(e.totalmax)),1)]),_:1})]),_:1})}var nr=Y(Zt,[["render",oa]]);const la=X({name:"BrrCalcPurchase",props:["purchaserange"],emits:["update:purchaserange","projectchanged"],components:{SliderWithTextInput:ze},data(){return{emit_project_change_notification:!0}},methods:{serializer_load_data(e){this.emit_project_change_notification=!1,this.purchaserangevalue=e.purchaserangevalue;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)},format_currency(e){return K.format_currency(e)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","PurchasePrice")}},computed:{serializer_card_data(){return{purchaserangevalue:this.purchaserangevalue}},isValid(){return this.$refs.slider.isValid},purchaserangevalue:{get(){return this.purchaserange},set(e){this.$emit("update:purchaserange",e)}},purchase_items(){return[{name:"Purchase Property",worst:-1*this.purchaserange.max,best:-1*this.purchaserange.min}]}}}),ua=r("div",{class:"text-h6"},"Purchase Price",-1),ma=r("div",{class:"text-subtitle2"},"In this section we work out the purchase price. This figure is not just read from the listing we will aim to get a below market value (BMV) price and this will involve finding the right property seller and being able to negotiate the price.",-1),da={class:"text-h6"};function ca(e,t,u,n,a,v){const i=he("SliderWithTextInput");return g(),re(ue,{inline:"",class:"q-ma-sm card-style"},{default:_(()=>[c(j,null,{default:_(()=>[ua,ma]),_:1}),c(j,null,{default:_(()=>[c(i,{ref:"slider",range:e.purchaserangevalue,"onUpdate:range":t[0]||(t[0]=m=>e.purchaserangevalue=m)},null,8,["range"]),r("div",da,"Price: "+d(e.format_currency(e.purchaserangevalue.min))+" - "+d(e.format_currency(e.purchaserangevalue.max)),1)]),_:1})]),_:1})}var rr=Y(la,[["render",ca]]);const ha=X({name:"BrrCalcRefurbCost",emits:["projectchanged"],data(){return{refurbrange:{min:3e4,max:4e4},refurbtimerange:{min:6,max:12},emit_project_change_notification:!0}},methods:{format_currency(e){return K.format_currency(e)},serializer_load_data(e){this.emit_project_change_notification=!1,this.refurbrange=e.refurbrange,this.refurbtimerange=e.refurbtimerange;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","RefurbCost")}},computed:{serializer_card_data(){return{refurbrange:this.refurbrange,refurbtimerange:this.refurbtimerange}},refurb_cost_total(){return this.refurbrange},refurb_cost_items(){return[{name:"Refurbishment",worst:-1*this.refurb_cost_total.max,best:-1*this.refurb_cost_total.min}]},refurbmonths(){return{worst:this.refurbtimerange.max,best:this.refurbtimerange.min}}}}),ga=r("div",{class:"text-h6"},"Refurbishment",-1),fa=r("div",{class:"text-subtitle2"},"This section holds the details of the refurbishment. Put in the minimum and maximum estimated cost as well the length of time the refurbishment will take.",-1),va={class:"col-grow"},pa={class:"text-h6"},ba={class:"col-grow"},_a={class:"text-h6"},ya=r("div",null,"This figure is the amount of time to take out loans for and effects the amount of interest that needs to be paid.",-1);function xa(e,t,u,n,a,v){return g(),re(ue,{inline:"",class:"q-ma-sm card-style"},{default:_(()=>[c(j,null,{default:_(()=>[ga,fa]),_:1}),c(j,null,{default:_(()=>[r("div",va,[$(" \xA0 "),c(ge,{modelValue:e.refurbrange,"onUpdate:modelValue":t[0]||(t[0]=i=>e.refurbrange=i),min:0,max:2e5,step:1e3,"thumb-size":"40px","drag-range":"",label:"","left-label-value":"Best \xA3"+e.refurbrange.min/1e3+"k","right-label-value":"Worst \xA3"+e.refurbrange.max/1e3+"k"},null,8,["modelValue","left-label-value","right-label-value"])]),r("div",pa,"Cost: "+d(e.format_currency(e.refurbrange.min))+" - "+d(e.format_currency(e.refurbrange.max)),1),r("div",ba,[$(" \xA0 "),c(ge,{modelValue:e.refurbtimerange,"onUpdate:modelValue":t[1]||(t[1]=i=>e.refurbtimerange=i),min:0,max:36,step:1,"thumb-size":"40px","drag-range":"",label:"","left-label-value":"Best "+e.refurbtimerange.min+" months","right-label-value":"Worst "+e.refurbtimerange.max+" months"},null,8,["modelValue","left-label-value","right-label-value"])]),r("div",_a,"Duration: "+d(e.refurbtimerange.min)+" - "+d(e.refurbtimerange.max)+" months",1),ya]),_:1})]),_:1})}var sr=Y(ha,[["render",xa]]),wa=_e({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:u}){let n=!1,a,v,i=null,m=null,o,p;function M(){a&&a(),a=null,n=!1,i!==null&&(clearTimeout(i),i=null),m!==null&&(clearTimeout(m),m=null),v!==void 0&&v.removeEventListener("transitionend",o),o=null}function q(f,I,F){I!==void 0&&(f.style.height=`${I}px`),f.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,a=F}function R(f,I){f.style.overflowY=null,f.style.height=null,f.style.transition=null,M(),I!==p&&u(I)}function U(f,I){let F=0;v=f,n===!0?(M(),F=f.offsetHeight===f.scrollHeight?0:void 0):(p="hide",f.style.overflowY="hidden"),q(f,F,I),i=setTimeout(()=>{i=null,f.style.height=`${f.scrollHeight}px`,o=P=>{m=null,(Object(P)!==P||P.target===f)&&R(f,"show")},f.addEventListener("transitionend",o),m=setTimeout(o,e.duration*1.1)},100)}function A(f,I){let F;v=f,n===!0?M():(p="show",f.style.overflowY="hidden",F=f.scrollHeight),q(f,F,I),i=setTimeout(()=>{i=null,f.style.height=0,o=P=>{m=null,(Object(P)!==P||P.target===f)&&R(f,"hide")},f.addEventListener("transitionend",o),m=setTimeout(o,e.duration*1.1)},100)}return Be(()=>{n===!0&&M()}),()=>y(Lt,{css:!1,appear:e.appear,onEnter:U,onLeave:A},t.default)}});const ie=Bt({}),ka=Object.keys(tt);var $a=_e({name:"QExpansionItem",props:{...tt,...Ft,...et,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...jt,"click","afterShow","afterHide"],setup(e,{slots:t,emit:u}){const{proxy:{$q:n}}=be(),a=Ze(e,n),v=O(e.modelValue!==null?e.modelValue:e.defaultOpened),i=O(null),m=Qe(),{show:o,hide:p,toggle:M}=qt({showing:v});let q,R;const U=l(()=>`q-expansion-item q-item-type q-expansion-item--${v.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),A=l(()=>{if(e.contentInsetLevel===void 0)return null;const h=n.lang.rtl===!0?"Right":"Left";return{["padding"+h]:e.contentInsetLevel*56+"px"}}),f=l(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),I=l(()=>{const h={};return ka.forEach(x=>{h[x]=e[x]}),h}),F=l(()=>f.value===!0||e.expandIconToggle!==!0),P=l(()=>e.expandedIcon!==void 0&&v.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),V=l(()=>e.disable!==!0&&(f.value===!0||e.expandIconToggle===!0)),Q=l(()=>({expanded:v.value===!0,detailsId:e.targetUid,toggle:M,show:o,hide:p})),W=l(()=>{const h=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[v.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":v.value===!0?"true":"false","aria-controls":m,"aria-label":h}});ce(()=>e.group,h=>{R!==void 0&&R(),h!==void 0&&H()});function de(h){f.value!==!0&&M(h),u("click",h)}function J(h){h.keyCode===13&&Z(h,!0)}function Z(h,x){x!==!0&&i.value!==null&&i.value.focus(),M(h),Fe(h)}function ee(){u("afterShow")}function se(){u("afterHide")}function H(){q===void 0&&(q=Qe()),v.value===!0&&(ie[e.group]=q);const h=ce(v,E=>{E===!0?ie[e.group]=q:ie[e.group]===q&&delete ie[e.group]}),x=ce(()=>ie[e.group],(E,me)=>{me===q&&E!==void 0&&E!==q&&p()});R=()=>{h(),x(),ie[e.group]===q&&delete ie[e.group],R=void 0}}function C(){const h={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},x=[y(Le,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&v.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:P.value})];return V.value===!0&&(Object.assign(h,{tabindex:0,...W.value,onClick:Z,onKeyup:J}),x.unshift(y("div",{ref:i,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),y(Se,h,()=>x)}function k(){let h;return t.header!==void 0?h=[].concat(t.header(Q.value)):(h=[y(Se,()=>[y(He,{lines:e.labelLines},()=>e.label||""),e.caption?y(He,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&h[e.switchToggleSide===!0?"push":"unshift"](y(Se,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>y(Le,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&h[e.switchToggleSide===!0?"unshift":"push"](C()),h}function z(){const h={ref:"item",style:e.headerStyle,class:e.headerClass,dark:a.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return F.value===!0&&(h.clickable=!0,h.onClick=de,Object.assign(h,f.value===!0?I.value:W.value)),y(Et,h,k)}function L(){return zt(y("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:A.value,id:m},At(t.default)),[[Pt,v.value]])}function N(){const h=[z(),y(wa,{duration:e.duration,onShow:ee,onHide:se},L)];return e.expandSeparator===!0&&h.push(y(We,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:a.value}),y(We,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:a.value})),h}return e.group!==void 0&&H(),Be(()=>{R!==void 0&&R()}),()=>y("div",{class:U.value},[y("div",{class:"q-expansion-item__container relative-position"},N())])}});function Ca(e,t){return t<e.from?0:typeof e.upto=="undefined"?(t-e.from)*e.rate:t>e.upto?(e.upto-e.from)*e.rate:(t-e.from)*e.rate}function Ta(e,t,u,n){return e?{name:"Exempt",bands:[{from:0,upto:void 0,rate:0}]}:t?u==="england"?{name:"England Commercial",bands:[{from:0,upto:15e4,rate:0},{from:15e4,upto:25e4,rate:.02},{from:25e4,upto:void 0,rate:.05}]}:{name:"Scotland Commercial",bands:[{from:0,upto:15e4,rate:0},{from:15e4,upto:25e4,rate:.01},{from:25e4,upto:void 0,rate:.05}]}:u==="england"?n==="bef31oct2024"?{name:"England Residential Before 31-Oct-2024",bands:[{from:0,upto:25e4,rate:.03},{from:25e4,upto:925e3,rate:.08},{from:925e3,upto:15e5,rate:.13},{from:15e5,upto:void 0,rate:.15}]}:n==="31oct2024to31mar2025"?{name:"England Residential 31-Oct-2024 - 31-Mar-2025",bands:[{from:0,upto:25e4,rate:.05},{from:25e4,upto:925e3,rate:.1},{from:925e3,upto:15e5,rate:.15},{from:15e5,upto:void 0,rate:.17}]}:{name:"England Residential After 1 April 2025",bands:[{from:0,upto:125e3,rate:.05},{from:125e3,upto:25e4,rate:.07},{from:25e4,upto:925e3,rate:.1},{from:925e3,upto:15e5,rate:.15},{from:15e5,upto:void 0,rate:.17}]}:{name:"Scotland Residential",bands:[{from:0,upto:145e3,rate:0},{from:145e3,upto:25e4,rate:.02},{from:25e4,upto:325e3,rate:.05},{from:325e3,upto:75e4,rate:.1},{from:75e4,upto:void 0,rate:.12}]}}var Me={stampdutyforthisband:Ca,getstampdutyband:Ta};function Sa(){return new Date>new Date("2025-03-01")?"aft1apr2025":"31oct2024to31mar2025"}const Ma=X({name:"BrrCalcStampduty",emits:["projectchanged"],props:["purchaserange"],data(){return{table:{columns:[{name:"range",label:"Range",field:"range"},{name:"rate",label:"Rate",field:"rate"},{name:"min_amount",label:"Min",field:"min"},{name:"max_amount",label:"Max",field:"max"}]},stampdutydata:{exempt:!1,commercial:!1,location:"england",locationoptions:[{label:"England",value:"england"},{label:"Scotland",value:"scotland"}],completion:Sa(),completionoptions:[{label:"Before 31-Oct-2024",value:"bef31oct2024"},{label:"31-Oct-2024 - 31-Mar-2025",value:"31oct2024to31mar2025"},{label:" After 1 April 2025",value:"aft1apr2025"}]},emit_project_change_notification:!0}},methods:{format_currency(e){return K.format_currency(e)},helpexempt(){this.$q.dialog({title:"Stamp Duty Exempt",message:'Some purchases are stamp duty exempt. e.g. a freehold property under \xA340k. See <a href="https://www.gov.uk/stamp-duty-land-tax/reliefs-and-exemptions" target="_new">here</a> for details.',html:!0}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.stampdutydata.exempt=e.stampdutydata_exempt,this.stampdutydata.commercial=e.stampdutydata_commercial,this.stampdutydata.location=e.stampdutydata_location,typeof e.stampdutydata_completion=="undefined"?this.stampdutydata.completion="bef31oct2024":this.stampdutydata.completion=e.stampdutydata_completion;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","StampDuty")}},computed:{serializer_card_data(){return{stampdutydata_exempt:this.stampdutydata.exempt,stampdutydata_commercial:this.stampdutydata.commercial,stampdutydata_location:this.stampdutydata.location,stampdutydata_completion:this.stampdutydata.completion}},stampduty(){var e=0,t=0;let u=0;for(;u<this.stampdutybandswithamount.length;)e+=this.stampdutybandswithamount[u].min,t+=this.stampdutybandswithamount[u].max,u++;return{min:e,max:t}},stampduty_items(){return this.stampdutydata.exempt?[]:[{name:"Stamp Duty",worst:-1*this.stampduty.max,best:-1*this.stampduty.min}]},stampdutybandswithamount(){var e=this;return this.stampdutybands.bands.map(function(t){return{range:K.format_currency(t.from)+" - "+K.format_currency(t.upto),rate:K.format_percent(t.rate,0),min:Me.stampdutyforthisband(t,e.purchaserange.min),max:Me.stampdutyforthisband(t,e.purchaserange.max)}})},stampdutybands(){return Me.getstampdutyband(this.stampdutydata.exempt,this.stampdutydata.commercial,this.stampdutydata.location,this.stampdutydata.completion)}}}),Va=r("div",{class:"text-h6"},"Stamp Duty",-1),Ra=r("div",{class:"text-subtitle2"},"Stamp Duty calculation assuming investment property This is known as Stamp Duty in England and Land and Buildings Transaction Tax (LBTT) in Scotland. This is a basic calculator useful for estimates. Factors affecting stamp duty include if the property is habitable, if it\u2019s a commercial property and there are different rules for Scotland. This is an example calculation designed to give a rough idea and uses assumptions that may not be correct (e.g. it is assumed this is a second property). It is best to use the official government calculators. Refer to the links given in the detail section. If buying a high value property get advice from a stamp duty tax specialist.",-1),Ia={class:"q-pa-lg"},La={class:"text-h6"},Ba=r("div",{class:"stamp-duty-card-detail-bottom-text"},[r("p",null,[$("Example calculation only for use when estimating a project - check with an expert and also check if exemptions apply. You can also use the government stamp duty calculator "),r("a",{href:"https://www.tax.service.gov.uk/calculate-stamp-duty-land-tax/#!/intro",target:"_new"},"here"),$(".")]),r("p",{class:"stamp-duty-card-detail-bottom-text-title"},"Sources:"),r("ul",null,[r("li",null,[$("England Residential: "),r("a",{href:"https://www.gov.uk/guidance/stamp-duty-land-tax-buying-an-additional-residential-property",target:"_new"},"here")]),r("li",null,[$("England Commercial: "),r("a",{href:"https://www.gov.uk/stamp-duty-land-tax/nonresidential-and-mixed-rates",target:"_new"},"here")]),r("li",null,[$("Scotland Residential: "),r("a",{href:"https://revenue.scot/taxes/land-buildings-transaction-tax/residential-property",target:"_new"},"here")]),r("li",null,[$("Scotland Commercial: "),r("a",{href:"https://revenue.scot/taxes/land-buildings-transaction-tax/non-residential-property",target:"_new"},"here")])])],-1);function Fa(e,t,u,n,a,v){return g(),re(ue,{inline:"",class:"q-ma-sm card-style"},{default:_(()=>[c(j,null,{default:_(()=>[Va,Ra]),_:1}),c(j,null,{default:_(()=>[c(oe,{modelValue:e.stampdutydata.exempt,"onUpdate:modelValue":t[0]||(t[0]=i=>e.stampdutydata.exempt=i),label:"Stampduty Exempt"},null,8,["modelValue"]),c(le,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpexempt},null,8,["onClick"]),c(oe,{modelValue:e.stampdutydata.commercial,"onUpdate:modelValue":t[1]||(t[1]=i=>e.stampdutydata.commercial=i),label:"Commercial"},null,8,["modelValue"]),r("div",Ia,[$(" Property Location "),c(pe,{modelValue:e.stampdutydata.location,"onUpdate:modelValue":t[2]||(t[2]=i=>e.stampdutydata.location=i),options:e.stampdutydata.locationoptions,inline:""},null,8,["modelValue","options"]),$(" Expected completion date "),c(pe,{modelValue:e.stampdutydata.completion,"onUpdate:modelValue":t[3]||(t[3]=i=>e.stampdutydata.completion=i),options:e.stampdutydata.completionoptions,inline:""},null,8,["modelValue","options"]),r("div",La,"Stamp Duty: "+d(e.format_currency(e.stampduty.min))+" - "+d(e.format_currency(e.stampduty.max)),1)]),c($a,{"expand-separator":"",icon:"info",label:"Details"},{default:_(()=>[r("div",null,[c(Nt,{title:e.stampdutybands.name,columns:e.table.columns,rows:e.stampdutybandswithamount,"rows-per-page-options":[50],"hide-bottom":""},{"body-cell-min_amount":_(i=>[c(Ke,{props:i},{default:_(()=>[$(d(e.format_currency(i.value)),1)]),_:2},1032,["props"])]),"body-cell-max_amount":_(i=>[c(Ke,{props:i},{default:_(()=>[$(d(e.format_currency(i.value)),1)]),_:2},1032,["props"])]),_:1},8,["title","columns","rows"]),Ba])]),_:1})]),_:1})]),_:1})}var ir=Y(Ma,[["render",Fa]]);const ja=()=>({});var fe=_e({name:"QSlider",props:{...at,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:nt,setup(e,{emit:t}){const{proxy:{$q:u}}=be(),{state:n,methods:a}=rt({updateValue:A,updatePosition:I,getDragging:f,formAttrs:Dt(e)}),v=O(null),i=O(0),m=O(0);function o(){m.value=e.modelValue===null?n.innerMin.value:G(e.modelValue,n.innerMin.value,n.innerMax.value)}ce(()=>`${e.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,o),o();const p=l(()=>a.convertModelToRatio(m.value)),M=l(()=>n.active.value===!0?i.value:p.value),q=l(()=>{const V={[n.positionProp.value]:`${100*n.innerMinRatio.value}%`,[n.sizeProp.value]:`${100*(M.value-n.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(V.backgroundImage=`url(${e.selectionImg}) !important`),V}),R=a.getThumbRenderFn({focusValue:!0,getNodeData:ja,ratio:M,label:l(()=>e.labelValue!==void 0?e.labelValue:m.value),thumbColor:l(()=>e.thumbColor||e.color),labelColor:l(()=>e.labelColor),labelTextColor:l(()=>e.labelTextColor)}),U=l(()=>n.editable.value!==!0?{}:u.platform.is.mobile===!0?{onClick:a.onMobileClick}:{onMousedown:a.onActivate,onFocus:F,onBlur:a.onBlur,onKeydown:P,onKeyup:a.onKeyup});function A(V){m.value!==e.modelValue&&t("update:modelValue",m.value),V===!0&&t("change",m.value)}function f(){return v.value.getBoundingClientRect()}function I(V,Q=n.dragging.value){const W=a.getDraggingRatio(V,Q);m.value=a.convertRatioToModel(W),i.value=e.snap!==!0||e.step===0?W:a.convertModelToRatio(m.value)}function F(){n.focus.value=!0}function P(V){if(!qe.includes(V.keyCode))return;Fe(V);const Q=([34,33].includes(V.keyCode)?10:1)*n.step.value,W=([34,37,40].includes(V.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*Q;m.value=G(parseFloat((m.value+W).toFixed(n.decimals.value)),n.innerMin.value,n.innerMax.value),A()}return()=>{const V=a.getContent(q,n.tabindex,U,Q=>{Q.push(R())});return y("div",{ref:v,class:n.classes.value+(e.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue},V)}}});const Ye={l1:{lt249:{min:300,max:500},lt349:{min:500,max:600},lt449:{min:600,max:700},top:{min:700,max:900}},l2:{lt249:{min:400,max:600},lt349:{min:600,max:700},lt449:{min:700,max:800},top:{min:800,max:1e3}},l3:{lt249:{min:630,max:800},lt349:{min:800,max:900},lt449:{min:900,max:1100},top:{min:1e3,max:1500}}};function Ve(){return{min:2300,max:2300}}const qa=X({name:"BrrCalcOtherCosts",emits:["projectchanged"],props:["purchaserange"],components:{SliderWithTextInput:ze},data(){return{emit_project_change_notification:!0,solicitors_fees:Ve(),solicitors_fees_manual:!1,auction:!1,survey:{type:"l3",typeoptions:[{label:"None",value:"none"},{label:"RICS Level 1",value:"l1"},{label:"RICS Level 2",value:"l2"},{label:"RICS Level 3",value:"l3"}]},sourcing:{usesourcing:!1,custom:3e3,type:"threek",typeoptions:[{label:"\xA33,000",value:"threek"},{label:"2% of purchase",value:"twopercent"},{label:"Custom",value:"custom"}]},consts:{auction_survey:300,auction_legal_review:150}}},methods:{click_manual_solicitors_fees(){let e=!1;this.solicitors_fees_manual||this.$q.dialog({title:"Remove Solicitor Fee Manual Entey",message:"This will revert to the default value. Are you sure?",html:!1,ok:{push:!0,label:"Yes",color:"primary"},cancel:{push:!0,label:"Cancel",color:"primary"}}).onOk(t=>{e=!0,this.solicitors_fees=Ve()}).onCancel(()=>{this.solicitors_fees_manual=!0}).onDismiss(()=>{e||(this.solicitors_fees_manual=!0)})},format_currency(e){return K.format_currency(e)},helpsurvey(){this.$q.dialog({title:"RICS Survey",message:'See <a href="https://hoa.org.uk/advice/guides-for-homeowners/i-am-buying/how-much-does-a-house-survey-cost/" target="_new">this website</a> here for my source info for caculating survey costs. for details.',html:!0}).onOk(()=>{})},serializer_load_data(e){this.emit_project_change_notification=!1,this.auction=e.auction,this.survey.type=e.survey_type,this.sourcing.usesourcing=e.sourcing_usesourcing,this.sourcing.custom=e.sourcing_custom,this.sourcing.type=e.sourcing_type,typeof e.solicitors_fees_manual=="undefined"?(this.solicitors_fees_manual=!1,this.solicitors_fees=Ve()):(this.solicitors_fees_manual=e.solicitors_fees_manual,this.solicitors_fees=e.solicitors_fees);const t=this;setTimeout(function(){t.emit_project_change_notification=!0},50)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","OtherCosts")}},computed:{serializer_card_data(){return{auction:this.auction,survey_type:this.survey.type,sourcing_usesourcing:this.sourcing.usesourcing,sourcing_custom:this.sourcing.custom,sourcing_type:this.sourcing.type,solicitors_fees_manual:this.solicitors_fees_manual,solicitors_fees:this.solicitors_fees}},surveyfeetext(){return this.surveyfee.min===this.surveyfee.max?this.format_currency(this.surveyfee.min):this.format_currency(this.surveyfee.min)+"-"+this.format_currency(this.surveyfee.max)},surveyfee(){if(this.survey.type==="none")return{min:0,max:0};function e(u){return u<249e3?"lt249":u<349e3?"lt349":u<449e3?"lt449":"top"}var t={min:e(this.purchaserange.min),max:e(this.purchaserange.max)};return{min:Ye[this.survey.type][t.min].min,max:Ye[this.survey.type][t.max].max}},sourcingfeetext(){return this.sourcingfee.min===this.sourcingfee.max?this.format_currency(this.sourcingfee.min):this.format_currency(this.sourcingfee.min)+"-"+this.format_currency(this.sourcingfee.max)},sourcingfee(){return this.sourcing.usesourcing?this.sourcing.type==="threek"?{min:3e3,max:3e3}:this.sourcing.type==="custom"?{min:this.sourcing.custom,max:this.sourcing.custom}:{min:this.purchaserange.min*.02,max:this.purchaserange.max*.02}:{min:0,max:0}},total(){let e={min:0,max:0};return this.othercosts_items_detail.forEach(function(u){e.min+=-1*u.best,e.max+=-1*u.worst}),e},othercosts_items(){let e=[];return e.push({name:"Other Costs",worst:-1*this.total.max,best:-1*this.total.min}),e},othercosts_items_detail(){let e=[];return e.push({name:"Fees",worst:-1*this.solicitors_fees.max,best:-1*this.solicitors_fees.min}),this.auction&&(e.push({name:"Auction Survey",worst:-1*this.consts.auction_survey,best:-1*this.consts.auction_survey}),e.push({name:"Auction Legal Review",worst:-1*this.consts.auction_legal_review,best:-1*this.consts.auction_legal_review})),this.sourcing.usesourcing&&e.push({name:"Sourcing Fee",worst:-1*this.sourcingfee.max,best:-1*this.sourcingfee.min}),this.survey.type!=="none"&&e.push({name:"Survey",worst:-1*this.surveyfee.max,best:-1*this.surveyfee.min}),e}}}),za=r("div",{class:"text-h6"},"Other Costs",-1),Pa=r("div",{class:"text-subtitle2"},"Other costs to be considered",-1),Aa={class:"text-h6"},Da={key:0},Na={key:1},Ea=r("div",{class:"text-h6"},"Auction",-1),Oa={key:0},Ua=r("div",null,"Note survey and legal pack review costs may greater as they may have been done multiple times for auctions not won",-1),Qa=r("div",{class:"text-h6"},"Sourcing",-1),Wa={key:0},Ga={key:0},Ka={class:"col-grow"},Ha={class:"text-h6"},Xa=r("div",null,"If you\u2019re getting a pre-purchase survey report on the building select the type.",-1),Ya={class:"text-h6"};function Ja(e,t,u,n,a,v){const i=he("SliderWithTextInput");return g(),re(ue,{inline:"",class:"q-ma-sm card-style"},{default:_(()=>[c(j,null,{default:_(()=>[za,Pa]),_:1}),c(j,null,{default:_(()=>[r("div",Aa,"Solicitors Fees: "+d(e.format_currency(e.solicitors_fees.min))+" - "+d(e.format_currency(e.solicitors_fees.max)),1),r("div",null,[c(oe,{modelValue:this.solicitors_fees_manual,"onUpdate:modelValue":t[0]||(t[0]=m=>this.solicitors_fees_manual=m),label:"Enter Manually",onClick:e.click_manual_solicitors_fees},null,8,["modelValue","onClick"])]),this.solicitors_fees_manual?(g(),w("div",Da,[c(i,{ref:"slider",range:e.solicitors_fees,"onUpdate:range":t[1]||(t[1]=m=>e.solicitors_fees=m),min_prefix:"Min \xA3",max_prefix:"Max \xA3",min_label_text:"Min Fees",max_label_text:"Max Fees",min:0,max:1e4,step:500},null,8,["range"])])):S("",!0),this.solicitors_fees_manual?S("",!0):(g(),w("div",Na,"Likely value - fees may vary depending on project"))]),_:1}),c(j,null,{default:_(()=>[Ea,r("div",null,[c(oe,{modelValue:e.auction,"onUpdate:modelValue":t[2]||(t[2]=m=>e.auction=m),label:"Buying at auction"},null,8,["modelValue"])]),e.auction?(g(),w("div",Oa,[r("div",null,"\xA3"+d(e.consts.auction_survey)+" to get a survey",1),r("div",null,"\xA3"+d(e.consts.auction_legal_review)+" to get a review of legal pack",1),Ua])):S("",!0)]),_:1}),c(j,null,{default:_(()=>[Qa,r("div",null,[c(oe,{modelValue:e.sourcing.usesourcing,"onUpdate:modelValue":t[3]||(t[3]=m=>e.sourcing.usesourcing=m),label:"Found using a deal sourcer"},null,8,["modelValue"])]),e.sourcing.usesourcing?(g(),w("div",Wa,[c(pe,{modelValue:e.sourcing.type,"onUpdate:modelValue":t[4]||(t[4]=m=>e.sourcing.type=m),options:e.sourcing.typeoptions,inline:""},null,8,["modelValue","options"]),e.sourcing.type==="custom"?(g(),w("div",Ga,[r("div",Ka,[c(fe,{label:"","label-value":e.format_currency(e.sourcing.custom),modelValue:e.sourcing.custom,"onUpdate:modelValue":t[5]||(t[5]=m=>e.sourcing.custom=m),min:500,max:1e4,step:500,"thumb-size":"40px"},null,8,["label-value","modelValue"])])])):S("",!0),$(" Sourcing fee: "+d(e.sourcingfeetext),1)])):S("",!0)]),_:1}),c(j,null,{default:_(()=>[r("div",Ha,[$("Survey"),c(le,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpsurvey},null,8,["onClick"])]),Xa,c(pe,{modelValue:e.survey.type,"onUpdate:modelValue":t[6]||(t[6]=m=>e.survey.type=m),options:e.survey.typeoptions,inline:""},null,8,["modelValue","options"]),r("div",null,"Survey cost: "+d(e.surveyfeetext)+" (Based on stored ranges for this purchase cost.)",1)]),_:1}),c(j,null,{default:_(()=>[r("div",Ya,"Total: "+d(e.format_currency(e.total.min))+" - "+d(e.format_currency(e.total.max)),1)]),_:1})]),_:1})}var or=Y(qa,[["render",Ja]]);const Za=X({name:"BrrCalcFinance",emits:["projectchanged"],props:["purchaserange","refurb_cost_total","stampduty_total","othercosts_total","refurbmonths","gdv_total"],data(){return{emit_project_change_notification:!0,bridge:{usebridge:!1,startcost:.01,endcost:.01,monthlycost:.01,amount:{worst:1,best:1}},mortgage:{usemortgage:!1,rate:{min:6,max:6},ltv:{min:75,max:75},arrangementfee:1500},loans:[]}},methods:{format_currency(e){return K.format_currency(e)},format_percent(e){return K.format_percent(e)},addloan(){var e=0;this.loans.length>0&&(e=Math.max(...this.loans.map(t=>t.id))),this.loans.push({id:e+1,name:"Loan "+(e+1).toString(),amount:2e4,rate:10})},delloan(e){this.loans.length<1||(this.loans=this.loans.filter(function(t){return t.id!=e}))},updatemortgagetoggle(){this.bridge.usebridge&&this.mortgage.usemortgage&&(Ge.create({color:"bg-grey-2",message:"Use mortgage or bridge but not both",timeout:2e3}),this.mortgage.usemortgage=!1)},updatebridgetoggle(){this.bridge.usebridge&&this.mortgage.usemortgage&&(Ge.create({color:"bg-grey-2",message:"Use mortgage or bridge but not both",timeout:2e3}),this.bridge.usebridge=!1)},serializer_load_data(e){this.emit_project_change_notification=!1,this.bridge=e.bridge,this.mortgage=e.mortgage,this.loans=e.loans;const t=this;setTimeout(function(){t.emit_project_change_notification=!0},150)}},watch:{serializer_card_data(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:serializer")},totalmoneyneeded(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:totalmoneyneeded")},finance_out_items(e){this.emit_project_change_notification&&this.$emit("projectchanged","Finance:outitems")}},computed:{caculated_loan_details(){return this.loans.map(function(e){return{id:e.id,name:e.name,amount:e.amount,rate:e.rate,interest:e.amount*e.rate/100}})},serializer_card_data(){return{bridge:this.bridge,mortgage:this.mortgage,loans:this.loans}},mortgage_amount_borrowed(){return{best:this.purchaserange.min*(this.mortgage.ltv.min/100),worst:this.purchaserange.max*(this.mortgage.ltv.max/100)}},mortgage_monthly_payment(){return{best:this.mortgage_amount_borrowed.best*(this.mortgage.rate.min/100)/12,worst:this.mortgage_amount_borrowed.worst*(this.mortgage.rate.max/100)/12}},maxbridge(){return{best:this.purchaserange.min*.7,worst:this.purchaserange.max*.7}},maxloan(){return{best:this.totalexpenditure.min,worst:this.totalexpenditure.max}},bridgecost(){if(!this.bridge.usebridge)return{best:0,worst:0};var e=this.bridge.amount.best*(this.bridge.startcost+this.bridge.endcost+this.bridge.monthlycost*this.bridgemontghsupfront.min),t=this.bridge.amount.worst*(this.bridge.startcost+this.bridge.endcost+this.bridge.monthlycost*this.bridgemontghsupfront.max);return{best:e,worst:t}},bridgeamount(){return this.bridge.usebridge?{best:this.bridge.amount.best,worst:this.bridge.amount.worst}:{best:0,worst:0}},bridgemontghsupfront(){var e=12;this.refurbmonths.best>12&&(e=this.refurbmonths.best);var t=12;return this.refurbmonths.worst>12&&(t=this.refurbmonths.worst),{min:e,max:t}},totalexpenditure(){var e={min:this.purchaserange.min+this.refurb_cost_total.min+this.stampduty_total.min+this.othercosts_total.min,max:this.purchaserange.max+this.refurb_cost_total.max+this.stampduty_total.max+this.othercosts_total.max};return e},totalmoneyneeded(){var e=0;return this.loans.length>0&&(e=this.loans.reduce(function(t,u){return t+u.amount},0)),this.mortgage.usemortgage?{worst:this.totalexpenditure.max+this.mortgage_intrest_payment_total.worst+this.mortgage.arrangementfee-(this.mortgage_amount_borrowed.worst+e),best:this.totalexpenditure.min+this.mortgage_intrest_payment_total.best+this.mortgage.arrangementfee-(this.mortgage_amount_borrowed.best+e)}:this.bridge.usebridge?{worst:this.totalexpenditure.max-e-this.bridge.amount.worst+this.bridgecost.worst,best:this.totalexpenditure.min-e-this.bridge.amount.best+this.bridgecost.best}:{worst:this.totalexpenditure.max-e,best:this.totalexpenditure.min-e}},finance_in_items_without_cash(){let e=[];return this.loans.map(function(t){e.push({name:t.name,worst:t.amount,best:t.amount})}),this.mortgage.usemortgage&&(e.push({name:"Mortgage Payment",worst:this.mortgage_amount_borrowed.worst,best:this.mortgage_amount_borrowed.best}),e.push({name:"Mortgage Arrangement Fee",worst:-this.mortgage.arrangementfee,best:-this.mortgage.arrangementfee})),this.bridge.usebridge&&e.push({name:"Bridge Payment",worst:this.bridge.amount.worst-this.bridgecost.worst,best:this.bridge.amount.best-this.bridgecost.best}),e},finance_in_items(){let e=[];return e.push({name:"Finance Cash",worst:this.totalmoneyneeded.worst,best:this.totalmoneyneeded.best}),e=e.concat(this.finance_in_items_without_cash),e},mortgage_intrest_payment_total(){return{worst:this.mortgage_monthly_payment.worst*this.refurbmonths.worst,best:this.mortgage_monthly_payment.worst*this.refurbmonths.best}},finance_during_items(){let e=[];return this.mortgage.usemortgage&&e.push({name:"Mortgage Intrest payments (x"+this.refurbmonths.worst+"/"+this.refurbmonths.best+" months)",worst:-1*this.mortgage_intrest_payment_total.worst,best:-1*this.mortgage_intrest_payment_total.best}),e},finance_out_items(){let e=[];return this.loans.map(function(t){var u=-(t.amount+t.amount*t.rate/100);e.push({name:"Repay "+t.name,worst:u,best:u})}),this.mortgage.usemortgage&&e.push({name:"Payback Purchase Mortgage Capital",worst:-1*this.mortgage_amount_borrowed.worst,best:-1*this.mortgage_amount_borrowed.best}),this.bridge.usebridge&&(e.push({name:"Bridge Payback",worst:this.bridge.amount.worst*-1,best:this.bridge.amount.best*-1}),e.push({name:"Bridge Interest Credit",worst:(12-this.refurbmonths.worst)*.01*this.bridgecost.worst,best:(12-this.refurbmonths.best)*.01*this.bridgecost.best})),e}}}),en=r("div",{class:"text-h6"},"Finance",-1),tn=r("div",{class:"text-subtitle2"},"This section is to estimate the finance costs of the project.",-1),an=r("div",{class:"text-h6"},"Total Expenditure",-1),nn=r("div",{class:"text-h6"},"Loans",-1),rn=r("p",null,"Loans that will be paid back at the refinance stage. Same loans are used for best and worst calculations",-1),sn=r("div",null,"\xA0",-1),on={class:"col-grow"},ln=r("p",null,"Fixed return loans",-1),un=r("div",{class:"text-h6"},"Mortgage",-1),mn={key:0},dn=r("div",{class:"text-h6"},"Bridge",-1),cn={key:0},hn=r("div",null,"The maximum bridge amount is typically 65% of the purchase price.",-1),gn={class:"row"},fn={class:"bridgeamountdiv"},vn=r("div",null,"Worst bridge amount",-1),pn={class:"bridgeamountdiv"},bn=r("div",null,"Best bridge amount",-1),_n=r("div",{class:"text-h6"},"Cash",-1),yn=r("div",null,"This calculation will assume that all money not provided for loans or bridges will be provided by investors as cash.",-1),xn={class:"text-h6"};function wn(e,t,u,n,a,v){return g(),re(ue,{inline:"",class:"q-ma-sm card-style"},{default:_(()=>[c(j,null,{default:_(()=>[en,tn]),_:1}),c(j,null,{default:_(()=>[an,$(" "+d(e.format_currency(e.totalexpenditure.max))+" - "+d(e.format_currency(e.totalexpenditure.min))+" (Worst - best) ",1)]),_:1}),c(j,null,{default:_(()=>[nn,rn,r("div",null,[(g(!0),w(ye,null,je(e.loans,i=>(g(),w("div",{key:i.id,class:"row"},[r("div",null," Loan "+d(i.id),1),sn,r("div",null,[$(" Rate: "+d(i.rate)+"% ",1),c(ve,{modelValue:i.rate,"onUpdate:modelValue":m=>i.rate=m,modelModifiers:{number:!0},type:"number",filled:"",style:{"max-width":"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),r("div",on,[$(" Amount: "+d(e.format_currency(i.amount)),1),c(fe,{label:"","label-value":e.format_currency(i.amount),modelValue:i.amount,"onUpdate:modelValue":m=>i.amount=m,min:0,max:e.maxloan.worst,"thumb-size":"40px",step:5e3},null,8,["label-value","modelValue","onUpdate:modelValue","max"])]),c(le,{round:"",icon:"delete",onClick:m=>e.delloan(i.id)},null,8,["onClick"])]))),128))]),c(le,{round:"",color:"primary",icon:"add",onClick:e.addloan},null,8,["onClick"]),ln]),_:1}),c(j,null,{default:_(()=>[un,c(oe,{modelValue:e.mortgage.usemortgage,"onUpdate:modelValue":[t[0]||(t[0]=i=>e.mortgage.usemortgage=i),e.updatemortgagetoggle],label:"Buy with Mortgage"},null,8,["modelValue","onUpdate:modelValue"]),e.mortgage.usemortgage?(g(),w("div",mn,[$(" Rate: "+d(e.mortgage.rate.min)+"% - "+d(e.mortgage.rate.max)+"%",1),c(ge,{modelValue:e.mortgage.rate,"onUpdate:modelValue":t[1]||(t[1]=i=>e.mortgage.rate=i),min:0,max:10,step:.1,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":"Best "+e.mortgage.rate.min+"%","right-label-value":"Worst "+e.mortgage.rate.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),$(" LTV: "+d(e.mortgage.ltv.min)+"% - "+d(e.mortgage.ltv.max)+"%",1),c(ge,{modelValue:e.mortgage.ltv,"onUpdate:modelValue":t[2]||(t[2]=i=>e.mortgage.ltv=i),min:0,max:100,step:1,"thumb-size":"40px","drag-range":"",label:"",snap:"","left-label-value":"Best "+e.mortgage.ltv.min+"%","right-label-value":"Worst "+e.mortgage.ltv.max+"%"},null,8,["modelValue","left-label-value","right-label-value"]),$(" This is based on a repayment mortgage. "),r("div",null,"Amount Borrowed: "+d(e.format_currency(e.mortgage_amount_borrowed.worst))+" - "+d(e.format_currency(e.mortgage_amount_borrowed.best)),1),r("div",null,"Monthly Repayments: "+d(e.format_currency(e.mortgage_monthly_payment.worst))+" - "+d(e.format_currency(e.mortgage_monthly_payment.best)),1),r("div",null,"Arrangement Fee: "+d(e.format_currency(e.mortgage.arrangementfee)),1)])):S("",!0)]),_:1}),c(j,null,{default:_(()=>[dn,c(oe,{modelValue:e.bridge.usebridge,"onUpdate:modelValue":[t[3]||(t[3]=i=>e.bridge.usebridge=i),e.updatebridgetoggle],label:"Use a bridge"},null,8,["modelValue","onUpdate:modelValue"]),e.bridge.usebridge?(g(),w("div",cn,[r("div",null,"Start cost/End Cost: "+d(e.bridge.startcost*100)+"%/"+d(e.bridge.endcost*100)+"%",1),r("div",null,"Monthly cost: "+d(e.bridge.monthlycost*100)+"%",1),r("div",null,"Months cost paid upfront: "+d(e.bridgemontghsupfront.min)+" - "+d(e.bridgemontghsupfront.max),1),hn,r("div",gn,[r("div",fn,[vn,c(fe,{label:"",modelValue:e.bridge.amount.worst,"onUpdate:modelValue":t[4]||(t[4]=i=>e.bridge.amount.worst=i),min:0,max:e.maxbridge.worst,step:5e3,"thumb-size":"40px"},null,8,["modelValue","max"]),r("div",null,"Amount: "+d(e.format_currency(e.bridge.amount.worst)),1),r("div",null,"% purchase: "+d(e.format_percent(e.bridge.amount.worst/e.purchaserange.max)),1),r("div",null,"Cost: "+d(e.format_currency(e.bridgecost.worst)),1)]),r("div",pn,[bn,c(fe,{label:"",modelValue:e.bridge.amount.best,"onUpdate:modelValue":t[5]||(t[5]=i=>e.bridge.amount.best=i),min:0,max:e.maxbridge.best,step:5e3,"thumb-size":"40px"},null,8,["modelValue","max"]),r("div",null,"Amount: "+d(e.format_currency(e.bridge.amount.best)),1),r("div",null,"% purchase: "+d(e.format_percent(e.bridge.amount.best/e.purchaserange.min)),1),r("div",null,"Cost: "+d(e.format_currency(e.bridgecost.best)),1)])])])):S("",!0)]),_:1}),c(j,null,{default:_(()=>[_n,$(" Cash is the money the investors put into the deal. It is free money as there is no interest payments for this money. "),yn,r("div",xn,d(e.format_currency(e.totalmoneyneeded.worst))+" - "+d(e.format_currency(e.totalmoneyneeded.best))+" (Worst - best) ",1)]),_:1})]),_:1})}var lr=Y(Za,[["render",wn]]);const kn=X({name:"InvalidMessage",props:["is_valid_input"],data(){return{}}}),$n={key:0,class:"invalidmessage col-grow"};function Cn(e,t,u,n,a,v){return e.is_valid_input?S("",!0):(g(),w("div",$n,[c(Le,{name:"warning"}),$("Warning: Invalid input data! ")]))}var Tn=Y(kn,[["render",Cn]]);function Re({items:e}){e.push({type:"blank",key:e.length})}function Ie(e,t,u,n){e.push({type:"total",key:e.length,name:t,worst:u,best:n})}function ne(e,t,u,n){e.push({type:"ledger",key:e.length,name:t,worst:u,best:n})}function Je(e,t,u,n){e.push({type:"note",key:e.length,name:t,worst:u,best:n})}const Sn=X({name:"FlipCalcDealRating",props:["is_valid_input","purchaserange","finance_in_items_without_cash","purchase_items","stampduty_items","othercosts_items","refurb_cost_items","gdv_total","refurbmonths","finance_out_items","finance_during_items"],components:{FeatureTable:Ut,InvalidMessage:Tn},data(){return{}},methods:{format_currency(e){return typeof e=="string"&&e===""?"":K.format_currency(e)},helpcorporation(){this.$q.dialog({title:"Corporation Tax",message:'Corporation tax will depend on if buying in a company or as an individual. It also depends on the total profit of the company (See <a href="https://www.gov.uk/government/publications/rates-and-allowances-corporation-tax/rates-and-allowances-corporation-tax" target="_new">this website</a>). For this calculation we assume 19%.',html:!0}).onOk(()=>{})}},computed:{finance_costs(){var e={worst:0,best:0};function t(u,n){u.worst+=n.worst,u.best+=n.best}return typeof this.finance_in_items_without_cash!="undefined"&&this.finance_in_items_without_cash.map(function(u){t(e,u)}),typeof this.finance_during_items!="undefined"&&this.finance_during_items.map(function(u){t(e,u)}),typeof this.finance_out_items!="undefined"&&this.finance_out_items.map(function(u){t(e,u)}),{worst:e.worst,best:e.best}},itemized_summary(){var e=[],t={worst:0,best:0};function u(p,M){p.worst+=M.worst,p.best+=M.best}typeof this.purchase_items!="undefined"&&this.purchase_items.map(function(p){ne(e,p.name,-p.worst,-p.best),u(t,p)}),typeof this.stampduty_items!="undefined"&&this.stampduty_items.map(function(p){ne(e,p.name,-p.worst,-p.best),u(t,p)}),typeof this.othercosts_items!="undefined"&&this.othercosts_items.map(function(p){ne(e,p.name,-p.worst,-p.best),u(t,p)}),typeof this.refurb_cost_items!="undefined"&&this.refurb_cost_items.map(function(p){ne(e,p.name,-p.worst,-p.best),u(t,p)}),ne(e,"Finance Costs",-this.finance_costs.worst,-this.finance_costs.best),u(t,this.finance_costs),Ie(e,"Total Money In",-t.worst,-t.best),Re({items:e}),ne(e,"GDV",this.gdv_total.min,this.gdv_total.max);var n={worst:this.gdv_total.min*.01,best:this.gdv_total.max*.01};ne(e,"Sale Costs (1%)",n.worst,n.best);var a={worst:this.gdv_total.min-(-t.worst+n.worst),best:this.gdv_total.max-(-t.best+n.best)};Ie(e,"Gross Profit",a.worst,a.best);var v={worst:a.worst*100/-t.worst,best:a.best*100/-t.best};Je(e,"Percentage",v.worst.toFixed(2)+"%",v.best.toFixed(2)+"%"),Re({items:e});var i={worst:a.worst*.19,best:a.best*.19};ne(e,"Corporation Tax",i.worst,i.best);var m={worst:a.worst-i.worst,best:a.best-i.best};Ie(e,"Net Profit",m.worst,m.best);var o={worst:m.worst*100/-t.worst,best:m.best*100/-t.best};return Je(e,"Percentage",o.worst.toFixed(2)+"%",o.best.toFixed(2)+"%"),Re({items:e}),{items:e,percentage:o}},features(){var e=[],t=Math.min(this.itemized_summary.percentage.best,this.itemized_summary.percentage.worst);return t<20?e.push({type:"negative",text:"Less than 20% uplift. To justify the work in doing the flip we need the deal to make at least 20%"}):t<25?e.push({type:"neutral",text:"Between 20% and 25% uplift. This is borderline. To justify the work and account for risk we would prefer at least 23%"}):e.push({type:"positive",text:"Above 25% uplift. This project has enough uplift to justify the effort and risk."}),e}}}),Mn=r("div",{class:"text-h6"},"Flip Deal Rating",-1),Vn=r("div",{class:"text-subtitle2"},"This section gives a rating for this flip deal.",-1),Rn={class:"sumtable"},In=r("thead",null,[r("tr",null,[r("th",{class:"text-left sumtablecell"}),r("th",{class:"text-center sumtablecell worstcasetablecell"},"Worst case"),r("th",{class:"text-center sumtablecell"},"Best case")])],-1),Ln={key:0,class:"text-left sumtablecell"},Bn={key:1,class:"text-left sumtablecell worstcasetablecell"},Fn={key:2,class:"text-left sumtablecell"},jn={key:3,colspan:"3",class:"text-left sumtablecell sumtabletitlecell"},qn={key:4,class:"text-left sumtablecell"},zn={key:5,class:"text-right sumtablecell worstcasetablecell"},Pn={key:6,class:"text-right sumtablecell"},An={key:7,class:"text-left sumtablecell"},Dn={key:8,class:"text-right sumtablecell worstcasetablecell"},Nn={key:9,class:"text-right sumtablecell"},En={key:10,class:"text-left sumtablecell"},On={key:11,class:"text-right sumtablecell worstcasetablecell"},Un={key:12,class:"text-right sumtablecell"},Qn={key:13,class:"text-left sumtablecell"},Wn={key:14,class:"text-right sumtablecell worstcasetablecell"},Gn={key:15,class:"text-right sumtablecell"},Kn=r("div",{class:"text-h6"},"Flip Project Features",-1);function Hn(e,t,u,n,a,v){const i=he("InvalidMessage"),m=he("FeatureTable");return g(),re(ue,{inline:"",class:"q-ma-sm card-style maincard col-grow"},{default:_(()=>[c(j,null,{default:_(()=>[Mn,Vn]),_:1}),c(j,null,{default:_(()=>[r("div",null,[c(i,{is_valid_input:e.is_valid_input},null,8,["is_valid_input"]),r("table",Rn,[In,r("tbody",null,[(g(!0),w(ye,null,je(e.itemized_summary.items,o=>(g(),w("tr",{key:o.id},[o.type=="blank"?(g(),w("td",Ln,"\xA0")):S("",!0),o.type=="blank"?(g(),w("td",Bn,"\xA0")):S("",!0),o.type=="blank"?(g(),w("td",Fn,"\xA0")):S("",!0),o.type=="title"?(g(),w("td",jn,d(o.name),1)):S("",!0),o.type=="ledger"?(g(),w("td",qn,d(o.name),1)):S("",!0),o.type=="ledger"?(g(),w("td",zn,d(e.format_currency(o.worst)),1)):S("",!0),o.type=="ledger"?(g(),w("td",Pn,d(e.format_currency(o.best)),1)):S("",!0),o.type=="note"?(g(),w("td",An,d(o.name),1)):S("",!0),o.type=="note"?(g(),w("td",Dn,d(o.worst),1)):S("",!0),o.type=="note"?(g(),w("td",Nn,d(o.best),1)):S("",!0),o.type=="total"?(g(),w("th",En,d(o.name),1)):S("",!0),o.type=="total"?(g(),w("th",On,d(e.format_currency(o.worst)),1)):S("",!0),o.type=="total"?(g(),w("th",Un,d(e.format_currency(o.best)),1)):S("",!0),o.type=="headtext"?(g(),w("th",Qn,d(o.name),1)):S("",!0),o.type=="headtext"?(g(),w("th",Wn,d(o.worst),1)):S("",!0),o.type=="headtext"?(g(),w("th",Gn,d(o.best),1)):S("",!0)]))),128))])]),r("div",null,[$("Note: Corporation tax is assumed at 19%"),c(le,{round:"",dense:"",flat:"",icon:"info",onClick:e.helpcorporation},null,8,["onClick"])]),Kn,c(m,{features:e.features,"onUpdate:features":t[0]||(t[0]=o=>e.features=o)},null,8,["features"])])]),_:1})]),_:1})}var ur=Y(Sn,[["render",Hn]]);export{ur as D,lr as F,nr as G,Tn as I,or as O,rr as P,$a as Q,sr as R,ze as S,ir as a};
