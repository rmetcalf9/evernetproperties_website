import{d,_ as g,N as c,o as n,K as i,e as t,as as u,a as l,af as r,ar as s,at as _}from"./index.9ad42f6b.js";import{u as h}from"./backend_connection.cacf31ef.js";const p=d({name:"LoginButtonComponent",props:{floating:{type:Boolean,default:!0}},setup(){return{backend_connection_store:h()}},data(){return{}},computed:{getMainStyle(){return this.floating?"float-right row":"row"},showOldStyle(){return!1},isConnected(){return this.backend_connection_store.isConnected},isLogininprogress(){return this.backend_connection_store.isLogininprogress},isLoggedin(){return this.backend_connection_store.isLoggedin},googleclientid(){return this.$rjmgclientid},login_url(){return window.location.origin+"/googleloginredirect"},googleloginbuttonlabel(){return"Login for extra features"},googlebuttonstyle(){return this.isConnected&&!this.isLoggedin&&!this.isLogininprogress?"":"visibility: hidden;"}},methods:{autoriseWithGoogle(){const e={ok:function(o){},error:function(o){c.create({color:"negative",message:o,timeout:2e3})}};this.backend_connection_store.login(e,this.$rjmgclientid)},clickProfile(){this.$router.push("/profile")},help(){this.$q.dialog({title:"Problems logging in",message:"If you are having problems logging in check your browser settings to make sure you have got third party sign in enabled.",html:!0}).onOk(()=>{})},renderbutton(){var e=this;function o(a){e.backend_connection_store.login_from_google_provided_button(a,e.login_callback)}window.google.accounts.id.initialize({client_id:this.$rjmgclientid,callback:o}),window.google.accounts.id.renderButton(this.$refs.g_id_signin,{theme:"filled_blue",size:"large",type:"standard",text:"signin",shape:"rectangular",logo_alignment:"left",width:"120"})}},mounted(){this.renderbutton()}}),m=["data-client_id","data-login_uri"],f={key:0},b={key:1},k={key:2};function y(e,o,a,C,v,L){return n(),i("div",{class:_(e.getMainStyle)},[t("div",null,[t("div",{id:"g_id_onload","data-client_id":e.googleclientid,"data-context":"signin","data-ux_mode":"popup","data-login_uri":e.login_url,"data-itp_support":"true"},null,8,m),t("div",{class:"g_id_signin",ref:"g_id_signin",style:u(e.googlebuttonstyle),"data-type":"standard","data-shape":"rectangular","data-theme":"filled_blue","data-text":"signin","data-size":"large","data-logo_alignment":"left"},null,4)]),e.isConnected&&!e.isLoggedin&&!e.isLogininprogress&&e.showOldStyle?(n(),i("div",f,[l(r,{onClick:e.autoriseWithGoogle,color:"primary",label:e.googleloginbuttonlabel,class:"q-ml-xs"},null,8,["onClick","label"])])):s("",!0),e.isConnected&&!e.isLoggedin?(n(),i("div",b,[l(r,{round:"",dense:"",flat:"",icon:"question_mark",onClick:e.help},null,8,["onClick"])])):s("",!0),e.isLoggedin?(n(),i("div",k,[l(r,{onClick:e.clickProfile,color:"primary",label:"User Profile",class:"q-ml-xs"},null,8,["onClick"])])):s("",!0)],2)}var B=g(p,[["render",y]]);export{B as L};
