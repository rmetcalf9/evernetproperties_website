import{Q as Yn}from"./QPage.f3bce600.js";import{j as $,i as pe,z as Ze,u as Qn,b4 as Ke,k as G,Y as O,Q as Je,H as je,x as ge,a7 as Zn,a8 as Kn,m as Te,a9 as me,aa as Jn,E as jn,l as tn,A as jt,B as tr,ah as er,b5 as nr,b6 as rr,a4 as ir,_ as ot,o as P,c as wt,w as z,a as C,Z as en,f as ht,ac as nn,$ as rn,X as _e,b7 as on,aY as an,N as Ft,r as st,g as et,e as _t,af as dt,t as Ie,d as or}from"./index.7b897157.js";import{Q as ln,a as re}from"./QToolbar.05ff0b0d.js";const ar=["top","right","bottom","left"],sn={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:t=>ar.includes(t)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function un(t,e){return{formClass:$(()=>`q-fab--form-${t.square===!0?"square":"rounded"}`),stacked:$(()=>t.externalLabel===!1&&["top","bottom"].includes(t.labelPosition)),labelProps:$(()=>{if(t.externalLabel===!0){const n=t.hideLabel===null?e.value===!1:t.hideLabel;return{action:"push",data:{class:[t.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${t.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:t.labelStyle}}}return{action:["left","top"].includes(t.labelPosition)?"unshift":"push",data:{class:[t.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${t.labelPosition}`+(t.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:t.labelStyle}}})}}const cn={start:"self-end",center:"self-center",end:"self-start"},lr=Object.keys(cn);var Me=pe({name:"QFabAction",props:{...sn,icon:{type:String,default:""},anchor:{type:String,validator:t=>lr.includes(t)},to:[String,Object],replace:Boolean},emits:["click"],setup(t,{slots:e,emit:n}){const r=Ze(Ke,()=>({showing:{value:!0},onChildClick:Qn})),{formClass:i,labelProps:o}=un(t,r.showing),a=$(()=>{const h=cn[t.anchor];return i.value+(h!==void 0?` ${h}`:"")}),l=$(()=>t.disable===!0||r.showing.value!==!0);function s(h){r.onChildClick(h),n("click",h)}function u(){const h=[];return e.icon!==void 0?h.push(e.icon()):t.icon!==""&&h.push(G(Je,{name:t.icon})),(t.label!==""||e.label!==void 0)&&h[o.value.action](G("div",o.value.data,e.label!==void 0?e.label():[t.label])),je(e.default,h)}const f=ge();return Object.assign(f.proxy,{click:s}),()=>G(O,{class:a.value,...t,noWrap:!0,stack:t.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:s},u)}});const sr=["up","right","down","left"],ur=["left","center","right"];var cr=pe({name:"QFab",props:{...sn,...Zn,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:t=>sr.includes(t)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:t=>ur.includes(t)}},emits:Kn,setup(t,{slots:e}){const n=Te(null),r=Te(t.modelValue===!0),i=me(),{proxy:{$q:o}}=ge(),{formClass:a,labelProps:l}=un(t,r),s=$(()=>t.persistent!==!0),{hide:u,toggle:f}=Jn({showing:r,hideOnRouteChange:s}),h=$(()=>({opened:r.value})),d=$(()=>`q-fab z-fab row inline justify-center q-fab--align-${t.verticalActionsAlign} ${a.value}`+(r.value===!0?" q-fab--opened":" q-fab--closed")),g=$(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${t.direction} q-fab__actions--${r.value===!0?"opened":"closed"}`),b=$(()=>{const S={id:i,role:"menu"};return r.value!==!0&&(S["aria-hidden"]="true"),S}),x=$(()=>`q-fab__icon-holder  q-fab__icon-holder--${r.value===!0?"opened":"closed"}`);function T(S,M){const V=e[S],D=`q-fab__${S} absolute-full`;return V===void 0?G(Je,{class:D,name:t[M]||o.iconSet.fab[M]}):G("div",{class:D},V(h.value))}function v(){const S=[];return t.hideIcon!==!0&&S.push(G("div",{class:x.value},[T("icon","icon"),T("active-icon","activeIcon")])),(t.label!==""||e.label!==void 0)&&S[l.value.action](G("div",l.value.data,e.label!==void 0?e.label(h.value):[t.label])),je(e.tooltip,S)}return jn(Ke,{showing:r,onChildClick(S){u(S),n.value!==null&&n.value.$el.focus()}}),()=>G("div",{class:d.value},[G(O,{ref:n,class:a.value,...t,noWrap:!0,stack:t.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i,onClick:f},v),G("div",{class:g.value,...b.value},tn(e.default))])}});const fr={position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>t.length===2},expand:Boolean};function hr(){const{props:t,proxy:{$q:e}}=ge(),n=Ze(tr,jt);if(n===jt)return console.error("QPageSticky needs to be child of QLayout"),jt;const r=$(()=>{const h=t.position;return{top:h.indexOf("top")>-1,right:h.indexOf("right")>-1,bottom:h.indexOf("bottom")>-1,left:h.indexOf("left")>-1,vertical:h==="top"||h==="bottom",horizontal:h==="left"||h==="right"}}),i=$(()=>n.header.offset),o=$(()=>n.right.offset),a=$(()=>n.footer.offset),l=$(()=>n.left.offset),s=$(()=>{let h=0,d=0;const g=r.value,b=e.lang.rtl===!0?-1:1;g.top===!0&&i.value!==0?d=`${i.value}px`:g.bottom===!0&&a.value!==0&&(d=`${-a.value}px`),g.left===!0&&l.value!==0?h=`${b*l.value}px`:g.right===!0&&o.value!==0&&(h=`${-b*o.value}px`);const x={transform:`translate(${h}, ${d})`};return t.offset&&(x.margin=`${t.offset[1]}px ${t.offset[0]}px`),g.vertical===!0?(l.value!==0&&(x[e.lang.rtl===!0?"right":"left"]=`${l.value}px`),o.value!==0&&(x[e.lang.rtl===!0?"left":"right"]=`${o.value}px`)):g.horizontal===!0&&(i.value!==0&&(x.top=`${i.value}px`),a.value!==0&&(x.bottom=`${a.value}px`)),x}),u=$(()=>`q-page-sticky row flex-center fixed-${t.position} q-page-sticky--${t.expand===!0?"expand":"shrink"}`);function f(h){const d=tn(h.default);return G("div",{class:u.value,style:s.value},t.expand===!0?d:[G("div",d)])}return{$layout:n,getStickyContent:f}}var dr=pe({name:"QPageSticky",props:fr,setup(t,{slots:e}){const{getStickyContent:n}=hr();return()=>n(e)}}),pr={value:()=>{}};function ve(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bt(n)}function Bt(t){this._=t}function gr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bt.prototype=ve.prototype={constructor:Bt,on:function(t,e){var n=this._,r=gr(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=mr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=De(n[i],t.name,e);else if(e==null)for(i in n)n[i]=De(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Bt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function mr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function De(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=pr,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ie="http://www.w3.org/1999/xhtml",$e={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$e.hasOwnProperty(e)?{space:$e[e],local:t}:t}function _r(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ie&&e.documentElement.namespaceURI===ie?e.createElement(t):e.createElementNS(n,t)}}function vr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ye(t){var e=Qt(t);return(e.local?vr:_r)(e)}function yr(){}function xe(t){return t==null?yr:function(){return this.querySelector(t)}}function xr(t){typeof t!="function"&&(t=xe(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=new Array(a),s,u,f=0;f<a;++f)(s=o[f])&&(u=t.call(s,s.__data__,f,o))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new R(r,this._parents)}function wr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function br(){return[]}function fn(t){return t==null?br:function(){return this.querySelectorAll(t)}}function kr(t){return function(){return wr(t.apply(this,arguments))}}function Cr(t){typeof t=="function"?t=kr(t):t=fn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new R(r,i)}function hn(t){return function(){return this.matches(t)}}function dn(t){return function(e){return e.matches(t)}}var Sr=Array.prototype.find;function Ar(t){return function(){return Sr.call(this.children,t)}}function Tr(){return this.firstElementChild}function Ir(t){return this.select(t==null?Tr:Ar(typeof t=="function"?t:dn(t)))}var Mr=Array.prototype.filter;function Dr(){return Array.from(this.children)}function $r(t){return function(){return Mr.call(this.children,t)}}function Nr(t){return this.selectAll(t==null?Dr:$r(typeof t=="function"?t:dn(t)))}function zr(t){typeof t!="function"&&(t=hn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new R(r,this._parents)}function pn(t){return new Array(t.length)}function Vr(){return new R(this._enter||this._groups.map(pn),this._parents)}function Ht(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ht.prototype={constructor:Ht,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Er(t){return function(){return t}}function Pr(t,e,n,r,i,o){for(var a=0,l,s=e.length,u=o.length;a<u;++a)(l=e[a])?(l.__data__=o[a],r[a]=l):n[a]=new Ht(t,o[a]);for(;a<s;++a)(l=e[a])&&(i[a]=l)}function Br(t,e,n,r,i,o,a){var l,s,u=new Map,f=e.length,h=o.length,d=new Array(f),g;for(l=0;l<f;++l)(s=e[l])&&(d[l]=g=a.call(s,s.__data__,l,e)+"",u.has(g)?i[l]=s:u.set(g,s));for(l=0;l<h;++l)g=a.call(t,o[l],l,o)+"",(s=u.get(g))?(r[l]=s,s.__data__=o[l],u.delete(g)):n[l]=new Ht(t,o[l]);for(l=0;l<f;++l)(s=e[l])&&u.get(d[l])===s&&(i[l]=s)}function qr(t){return t.__data__}function Rr(t,e){if(!arguments.length)return Array.from(this,qr);var n=e?Br:Pr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Er(t));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],d=h.length,g=Gr(t.call(f,f&&f.__data__,u,r)),b=g.length,x=l[u]=new Array(b),T=a[u]=new Array(b),v=s[u]=new Array(d);n(f,h,x,T,v,g,e);for(var S=0,M=0,V,D;S<b;++S)if(V=x[S]){for(S>=M&&(M=S+1);!(D=T[M])&&++M<b;);V._next=D||null}}return a=new R(a,r),a._enter=l,a._exit=s,a}function Gr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Lr(){return new R(this._exit||this._groups.map(pn),this._parents)}function Fr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Hr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),l=new Array(i),s=0;s<a;++s)for(var u=n[s],f=r[s],h=u.length,d=l[s]=new Array(h),g,b=0;b<h;++b)(g=u[b]||f[b])&&(d[b]=g);for(;s<i;++s)l[s]=n[s];return new R(l,this._parents)}function Or(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ur(t){t||(t=Wr);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,f=0;f<l;++f)(u=a[f])&&(s[f]=u);s.sort(e)}return new R(i,this._parents).order()}function Wr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Xr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Yr(){return Array.from(this)}function Qr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Zr(){let t=0;for(const e of this)++t;return t}function Kr(){return!this.node()}function Jr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function jr(t){return function(){this.removeAttribute(t)}}function ti(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ei(t,e){return function(){this.setAttribute(t,e)}}function ni(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ri(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ii(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function oi(t,e){var n=Qt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ti:jr:typeof e=="function"?n.local?ii:ri:n.local?ni:ei)(n,e))}function gn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ai(t){return function(){this.style.removeProperty(t)}}function li(t,e,n){return function(){this.style.setProperty(t,e,n)}}function si(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ui(t,e,n){return arguments.length>1?this.each((e==null?ai:typeof e=="function"?si:li)(t,e,n==null?"":n)):gt(this.node(),t)}function gt(t,e){return t.style.getPropertyValue(e)||gn(t).getComputedStyle(t,null).getPropertyValue(e)}function ci(t){return function(){delete this[t]}}function fi(t,e){return function(){this[t]=e}}function hi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function di(t,e){return arguments.length>1?this.each((e==null?ci:typeof e=="function"?hi:fi)(t,e)):this.node()[t]}function mn(t){return t.trim().split(/^|\s+/)}function we(t){return t.classList||new _n(t)}function _n(t){this._node=t,this._names=mn(t.getAttribute("class")||"")}_n.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vn(t,e){for(var n=we(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function yn(t,e){for(var n=we(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function pi(t){return function(){vn(this,t)}}function gi(t){return function(){yn(this,t)}}function mi(t,e){return function(){(e.apply(this,arguments)?vn:yn)(this,t)}}function _i(t,e){var n=mn(t+"");if(arguments.length<2){for(var r=we(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?mi:e?pi:gi)(n,e))}function vi(){this.textContent=""}function yi(t){return function(){this.textContent=t}}function xi(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function wi(t){return arguments.length?this.each(t==null?vi:(typeof t=="function"?xi:yi)(t)):this.node().textContent}function bi(){this.innerHTML=""}function ki(t){return function(){this.innerHTML=t}}function Ci(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Si(t){return arguments.length?this.each(t==null?bi:(typeof t=="function"?Ci:ki)(t)):this.node().innerHTML}function Ai(){this.nextSibling&&this.parentNode.appendChild(this)}function Ti(){return this.each(Ai)}function Ii(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mi(){return this.each(Ii)}function Di(t){var e=typeof t=="function"?t:ye(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function $i(){return null}function Ni(t,e){var n=typeof t=="function"?t:ye(t),r=e==null?$i:typeof e=="function"?e:xe(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zi(){var t=this.parentNode;t&&t.removeChild(this)}function Vi(){return this.each(zi)}function Ei(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Pi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Bi(t){return this.select(t?Pi:Ei)}function qi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ri(t){return function(e){t.call(this,e,this.__data__)}}function Gi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Li(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Fi(t,e,n){return function(){var r=this.__on,i,o=Ri(e);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Hi(t,e,n){var r=Gi(t+""),i,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=e?Fi:Li,i=0;i<o;++i)this.each(l(r[i],e,n));return this}function xn(t,e,n){var r=gn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Oi(t,e){return function(){return xn(this,t,e)}}function Ui(t,e){return function(){return xn(this,t,e.apply(this,arguments))}}function Wi(t,e){return this.each((typeof e=="function"?Ui:Oi)(t,e))}function*Xi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var wn=[null];function R(t,e){this._groups=t,this._parents=e}function Mt(){return new R([[document.documentElement]],wn)}function Yi(){return this}R.prototype=Mt.prototype={constructor:R,select:xr,selectAll:Cr,selectChild:Ir,selectChildren:Nr,filter:zr,data:Rr,enter:Vr,exit:Lr,join:Fr,merge:Hr,selection:Yi,order:Or,sort:Ur,call:Xr,nodes:Yr,node:Qr,size:Zr,empty:Kr,each:Jr,attr:oi,style:ui,property:di,classed:_i,text:wi,html:Si,raise:Ti,lower:Mi,append:Di,insert:Ni,remove:Vi,clone:Bi,datum:qi,on:Hi,dispatch:Wi,[Symbol.iterator]:Xi};function Y(t){return typeof t=="string"?new R([[document.querySelector(t)]],[document.documentElement]):new R([[t]],wn)}function oe(t){return Y(ye(t).call(document.documentElement))}function Qi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function at(t,e){if(t=Qi(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ae={capture:!0,passive:!1};function le(t){t.preventDefault(),t.stopImmediatePropagation()}function Zi(t){var e=t.document.documentElement,n=Y(t).on("dragstart.drag",le,ae);"onselectstart"in e?n.on("selectstart.drag",le,ae):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ki(t,e){var n=t.document.documentElement,r=Y(t).on("dragstart.drag",null);e&&(r.on("click.drag",le,ae),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function be(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Dt(){}var St=.7,Ot=1/St,pt="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ji=/^#([0-9a-f]{3,8})$/,ji=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),to=new RegExp(`^rgb\\(${Z},${Z},${Z}\\)$`),eo=new RegExp(`^rgba\\(${pt},${pt},${pt},${At}\\)$`),no=new RegExp(`^rgba\\(${Z},${Z},${Z},${At}\\)$`),ro=new RegExp(`^hsl\\(${At},${Z},${Z}\\)$`),io=new RegExp(`^hsla\\(${At},${Z},${Z},${At}\\)$`),Ne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};be(Dt,Tt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ze,formatHex:ze,formatHex8:oo,formatHsl:ao,formatRgb:Ve,toString:Ve});function ze(){return this.rgb().formatHex()}function oo(){return this.rgb().formatHex8()}function ao(){return kn(this).formatHsl()}function Ve(){return this.rgb().formatRgb()}function Tt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ji.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ee(e):n===3?new B(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ji.exec(t))?new B(e[1],e[2],e[3],1):(e=to.exec(t))?new B(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=eo.exec(t))?zt(e[1],e[2],e[3],e[4]):(e=no.exec(t))?zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ro.exec(t))?qe(e[1],e[2]/100,e[3]/100,1):(e=io.exec(t))?qe(e[1],e[2]/100,e[3]/100,e[4]):Ne.hasOwnProperty(t)?Ee(Ne[t]):t==="transparent"?new B(NaN,NaN,NaN,0):null}function Ee(t){return new B(t>>16&255,t>>8&255,t&255,1)}function zt(t,e,n,r){return r<=0&&(t=e=n=NaN),new B(t,e,n,r)}function lo(t){return t instanceof Dt||(t=Tt(t)),t?(t=t.rgb(),new B(t.r,t.g,t.b,t.opacity)):new B}function se(t,e,n,r){return arguments.length===1?lo(t):new B(t,e,n,r==null?1:r)}function B(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}be(B,se,bn(Dt,{brighter(t){return t=t==null?Ot:Math.pow(Ot,t),new B(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?St:Math.pow(St,t),new B(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new B(ut(this.r),ut(this.g),ut(this.b),Ut(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pe,formatHex:Pe,formatHex8:so,formatRgb:Be,toString:Be}));function Pe(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}`}function so(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}${lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Be(){const t=Ut(this.opacity);return`${t===1?"rgb(":"rgba("}${ut(this.r)}, ${ut(this.g)}, ${ut(this.b)}${t===1?")":`, ${t})`}`}function Ut(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ut(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lt(t){return t=ut(t),(t<16?"0":"")+t.toString(16)}function qe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new H(t,e,n,r)}function kn(t){if(t instanceof H)return new H(t.h,t.s,t.l,t.opacity);if(t instanceof Dt||(t=Tt(t)),!t)return new H;if(t instanceof H)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(e===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-e)/l+2:a=(e-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new H(a,l,s,t.opacity)}function uo(t,e,n,r){return arguments.length===1?kn(t):new H(t,e,n,r==null?1:r)}function H(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}be(H,uo,bn(Dt,{brighter(t){return t=t==null?Ot:Math.pow(Ot,t),new H(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?St:Math.pow(St,t),new H(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new B(te(t>=240?t-240:t+120,i,r),te(t,i,r),te(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new H(Re(this.h),Vt(this.s),Vt(this.l),Ut(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ut(this.opacity);return`${t===1?"hsl(":"hsla("}${Re(this.h)}, ${Vt(this.s)*100}%, ${Vt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Re(t){return t=(t||0)%360,t<0?t+360:t}function Vt(t){return Math.max(0,Math.min(1,t||0))}function te(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Cn=t=>()=>t;function co(t,e){return function(n){return t+n*e}}function fo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ho(t){return(t=+t)==1?Sn:function(e,n){return n-e?fo(e,n,t):Cn(isNaN(e)?n:e)}}function Sn(t,e){var n=e-t;return n?co(t,n):Cn(isNaN(t)?e:t)}var Ge=function t(e){var n=ho(e);function r(i,o){var a=n((i=se(i)).r,(o=se(o)).r),l=n(i.g,o.g),s=n(i.b,o.b),u=Sn(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function it(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ee=new RegExp(ue.source,"g");function po(t){return function(){return t}}function go(t){return function(e){return t(e)+""}}function mo(t,e){var n=ue.lastIndex=ee.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(t=t+"",e=e+"";(r=ue.exec(t))&&(i=ee.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:it(r,i)})),n=ee.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?go(s[0].x):po(e):(e=s.length,function(u){for(var f=0,h;f<e;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}var Le=180/Math.PI,ce={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function An(t,e,n,r,i,o){var a,l,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Le,skewX:Math.atan(s)*Le,scaleX:a,scaleY:l}}var Et;function _o(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ce:An(e.a,e.b,e.c,e.d,e.e,e.f)}function vo(t){return t==null||(Et||(Et=document.createElementNS("http://www.w3.org/2000/svg","g")),Et.setAttribute("transform",t),!(t=Et.transform.baseVal.consolidate()))?ce:(t=t.matrix,An(t.a,t.b,t.c,t.d,t.e,t.f))}function Tn(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,d,g,b){if(u!==h||f!==d){var x=g.push("translate(",null,e,null,n);b.push({i:x-4,x:it(u,h)},{i:x-2,x:it(f,d)})}else(h||d)&&g.push("translate("+h+e+d+n)}function a(u,f,h,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:it(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function l(u,f,h,d){u!==f?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:it(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,d,g,b){if(u!==h||f!==d){var x=g.push(i(g)+"scale(",null,",",null,")");b.push({i:x-4,x:it(u,h)},{i:x-2,x:it(f,d)})}else(h!==1||d!==1)&&g.push(i(g)+"scale("+h+","+d+")")}return function(u,f){var h=[],d=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,d),a(u.rotate,f.rotate,h,d),l(u.skewX,f.skewX,h,d),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,d),u=f=null,function(g){for(var b=-1,x=d.length,T;++b<x;)h[(T=d[b]).i]=T.x(g);return h.join("")}}}var yo=Tn(_o,"px, ","px)","deg)"),xo=Tn(vo,", ",")",")"),wo=1e-12;function Fe(t){return((t=Math.exp(t))+1/t)/2}function bo(t){return((t=Math.exp(t))-1/t)/2}function ko(t){return((t=Math.exp(2*t))-1)/(t+1)}var Co=function t(e,n,r){function i(o,a){var l=o[0],s=o[1],u=o[2],f=a[0],h=a[1],d=a[2],g=f-l,b=h-s,x=g*g+b*b,T,v;if(x<wo)v=Math.log(d/u)/e,T=function(W){return[l+W*g,s+W*b,u*Math.exp(e*W*v)]};else{var S=Math.sqrt(x),M=(d*d-u*u+r*x)/(2*u*n*S),V=(d*d-u*u-r*x)/(2*d*n*S),D=Math.log(Math.sqrt(M*M+1)-M),E=Math.log(Math.sqrt(V*V+1)-V);v=(E-D)/e,T=function(W){var ft=W*v,$t=Fe(D),Nt=u/(n*S)*($t*ko(e*ft+D)-bo(D));return[l+Nt*g,s+Nt*b,u*$t/Fe(e*ft+D)]}}return T.duration=v*1e3*e/Math.SQRT2,T}return i.rho=function(o){var a=Math.max(.001,+o),l=a*a,s=l*l;return t(a,l,s)},i}(Math.SQRT2,2,4),mt=0,bt=0,vt=0,In=1e3,Wt,kt,Xt=0,ct=0,Zt=0,It=typeof performance=="object"&&performance.now?performance:Date,Mn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ke(){return ct||(Mn(So),ct=It.now()+Zt)}function So(){ct=0}function Yt(){this._call=this._time=this._next=null}Yt.prototype=Dn.prototype={constructor:Yt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ke():+n)+(e==null?0:+e),!this._next&&kt!==this&&(kt?kt._next=this:Wt=this,kt=this),this._call=t,this._time=n,fe()},stop:function(){this._call&&(this._call=null,this._time=1/0,fe())}};function Dn(t,e,n){var r=new Yt;return r.restart(t,e,n),r}function Ao(){ke(),++mt;for(var t=Wt,e;t;)(e=ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mt}function He(){ct=(Xt=It.now())+Zt,mt=bt=0;try{Ao()}finally{mt=0,Io(),ct=0}}function To(){var t=It.now(),e=t-Xt;e>In&&(Zt-=e,Xt=t)}function Io(){for(var t,e=Wt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Wt=n);kt=t,fe(r)}function fe(t){if(!mt){bt&&(bt=clearTimeout(bt));var e=t-ct;e>24?(t<1/0&&(bt=setTimeout(He,t-It.now()-Zt)),vt&&(vt=clearInterval(vt))):(vt||(Xt=It.now(),vt=setInterval(To,In)),mt=1,Mn(He))}}function Oe(t,e,n){var r=new Yt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Mo=ve("start","end","cancel","interrupt"),Do=[],$n=0,Ue=1,he=2,qt=3,We=4,de=5,Rt=6;function Kt(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;$o(t,n,{name:e,index:r,group:i,on:Mo,tween:Do,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:$n})}function Ce(t,e){var n=U(t,e);if(n.state>$n)throw new Error("too late; already scheduled");return n}function K(t,e){var n=U(t,e);if(n.state>qt)throw new Error("too late; already running");return n}function U(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $o(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Dn(o,0,n.time);function o(u){n.state=Ue,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,d,g;if(n.state!==Ue)return s();for(f in r)if(g=r[f],g.name===n.name){if(g.state===qt)return Oe(a);g.state===We?(g.state=Rt,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[f]):+f<e&&(g.state=Rt,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[f])}if(Oe(function(){n.state===qt&&(n.state=We,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=he,n.on.call("start",t,t.__data__,n.index,n.group),n.state===he){for(n.state=qt,i=new Array(d=n.tween.length),f=0,h=-1;f<d;++f)(g=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=de,1),h=-1,d=i.length;++h<d;)i[h].call(t,f);n.state===de&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=Rt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Gt(t,e){var n=t.__transition,r,i,o=!0,a;if(!!n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>he&&r.state<de,r.state=Rt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function No(t){return this.each(function(){Gt(this,t)})}function zo(t,e){var n,r;return function(){var i=K(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Vo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=K(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function Eo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=U(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?zo:Vo)(n,t,e))}function Se(t,e,n){var r=t._id;return t.each(function(){var i=K(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return U(i,r).value[e]}}function Nn(t,e){var n;return(typeof e=="number"?it:e instanceof Tt?Ge:(n=Tt(e))?(e=n,Ge):mo)(t,e)}function Po(t){return function(){this.removeAttribute(t)}}function Bo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Ro(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Go(t,e,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l)))}}function Lo(t,e,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l)))}}function Fo(t,e){var n=Qt(t),r=n==="transform"?xo:Nn;return this.attrTween(t,typeof e=="function"?(n.local?Lo:Go)(n,r,Se(this,"attr."+t,e)):e==null?(n.local?Bo:Po)(n):(n.local?Ro:qo)(n,r,e))}function Ho(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Oo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Uo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Oo(t,o)),n}return i._value=e,i}function Wo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ho(t,o)),n}return i._value=e,i}function Xo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Qt(t);return this.tween(n,(r.local?Uo:Wo)(r,e))}function Yo(t,e){return function(){Ce(this,t).delay=+e.apply(this,arguments)}}function Qo(t,e){return e=+e,function(){Ce(this,t).delay=e}}function Zo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Yo:Qo)(e,t)):U(this.node(),e).delay}function Ko(t,e){return function(){K(this,t).duration=+e.apply(this,arguments)}}function Jo(t,e){return e=+e,function(){K(this,t).duration=e}}function jo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ko:Jo)(e,t)):U(this.node(),e).duration}function ta(t,e){if(typeof e!="function")throw new Error;return function(){K(this,t).ease=e}}function ea(t){var e=this._id;return arguments.length?this.each(ta(e,t)):U(this.node(),e).ease}function na(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;K(this,t).ease=n}}function ra(t){if(typeof t!="function")throw new Error;return this.each(na(this._id,t))}function ia(t){typeof t!="function"&&(t=hn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new rt(r,this._parents,this._name,this._id)}function oa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=e[l],u=n[l],f=s.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=s[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=e[l];return new rt(a,this._parents,this._name,this._id)}function aa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function la(t,e,n){var r,i,o=aa(e)?Ce:K;return function(){var a=o(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}function sa(t,e){var n=this._id;return arguments.length<2?U(this.node(),n).on.on(t):this.each(la(n,t,e))}function ua(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ca(){return this.on("end.remove",ua(this._id))}function fa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xe(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),f,h,d=0;d<s;++d)(f=l[d])&&(h=t.call(f,f.__data__,d,l))&&("__data__"in f&&(h.__data__=f.__data__),u[d]=h,Kt(u[d],e,n,d,u,U(f,n)));return new rt(o,this._parents,e,n)}function ha(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fn(t));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var d=t.call(f,f.__data__,h,s),g,b=U(f,n),x=0,T=d.length;x<T;++x)(g=d[x])&&Kt(g,e,n,x,d,b);o.push(d),a.push(f)}return new rt(o,a,e,n)}var da=Mt.prototype.constructor;function pa(){return new da(this._groups,this._parents)}function ga(t,e){var n,r,i;return function(){var o=gt(this,t),a=(this.style.removeProperty(t),gt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function zn(t){return function(){this.style.removeProperty(t)}}function ma(t,e,n){var r,i=n+"",o;return function(){var a=gt(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function _a(t,e,n){var r,i,o;return function(){var a=gt(this,t),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(t),gt(this,t))),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l))}}function va(t,e){var n,r,i,o="style."+e,a="end."+o,l;return function(){var s=K(this,t),u=s.on,f=s.value[o]==null?l||(l=zn(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),s.on=r}}function ya(t,e,n){var r=(t+="")=="transform"?yo:Nn;return e==null?this.styleTween(t,ga(t,r)).on("end.style."+t,zn(t)):typeof e=="function"?this.styleTween(t,_a(t,r,Se(this,"style."+t,e))).each(va(this._id,t)):this.styleTween(t,ma(t,r,e),n).on("end.style."+t,null)}function xa(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function wa(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&xa(t,a,n)),r}return o._value=e,o}function ba(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,wa(t,e,n==null?"":n))}function ka(t){return function(){this.textContent=t}}function Ca(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Sa(t){return this.tween("text",typeof t=="function"?Ca(Se(this,"text",t)):ka(t==null?"":t+""))}function Aa(t){return function(e){this.textContent=t.call(this,e)}}function Ta(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Aa(i)),e}return r._value=t,r}function Ia(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ta(t))}function Ma(){for(var t=this._name,e=this._id,n=Vn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var f=U(s,e);Kt(s,t,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new rt(r,this._parents,t,n)}function Da(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=K(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),u.on=e}),i===0&&o()})}var $a=0;function rt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Vn(){return++$a}var tt=Mt.prototype;rt.prototype={constructor:rt,select:fa,selectAll:ha,selectChild:tt.selectChild,selectChildren:tt.selectChildren,filter:ia,merge:oa,selection:pa,transition:Ma,call:tt.call,nodes:tt.nodes,node:tt.node,size:tt.size,empty:tt.empty,each:tt.each,on:sa,attr:Fo,attrTween:Xo,style:ya,styleTween:ba,text:Sa,textTween:Ia,remove:ca,tween:Eo,delay:Zo,duration:jo,ease:ea,easeVarying:ra,end:Da,[Symbol.iterator]:tt[Symbol.iterator]};function Na(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var za={time:null,delay:0,duration:250,ease:Na};function Va(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ea(t){var e,n;t instanceof rt?(e=t._id,t=t._name):(e=Vn(),(n=za).time=ke(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&Kt(s,t,e,u,a,n||Va(s,e));return new rt(r,this._parents,t,e)}Mt.prototype.interrupt=No;Mt.prototype.transition=Ea;var Pt=t=>()=>t;function Pa(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function nt(t,e,n){this.k=t,this.x=e,this.y=n}nt.prototype={constructor:nt,scale:function(t){return t===1?this:new nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var En=new nt(1,0,0);nt.prototype;function ne(t){t.stopImmediatePropagation()}function yt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ba(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function qa(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Xe(){return this.__zoom||En}function Ra(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ga(){return navigator.maxTouchPoints||"ontouchstart"in this}function La(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Pn(){var t=Ba,e=qa,n=La,r=Ra,i=Ga,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=Co,u=ve("start","zoom","end"),f,h,d,g=500,b=150,x=0,T=10;function v(c){c.property("__zoom",Xe).on("wheel.zoom",ft,{passive:!1}).on("mousedown.zoom",$t).on("dblclick.zoom",Nt).filter(i).on("touchstart.zoom",Un).on("touchmove.zoom",Wn).on("touchend.zoom touchcancel.zoom",Xn).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(c,m,p,_){var y=c.selection?c.selection():c;y.property("__zoom",Xe),c!==y?D(c,m,p,_):y.interrupt().each(function(){E(this,arguments).event(_).start().zoom(null,typeof m=="function"?m.apply(this,arguments):m).end()})},v.scaleBy=function(c,m,p,_){v.scaleTo(c,function(){var y=this.__zoom.k,w=typeof m=="function"?m.apply(this,arguments):m;return y*w},p,_)},v.scaleTo=function(c,m,p,_){v.transform(c,function(){var y=e.apply(this,arguments),w=this.__zoom,k=p==null?V(y):typeof p=="function"?p.apply(this,arguments):p,A=w.invert(k),I=typeof m=="function"?m.apply(this,arguments):m;return n(M(S(w,I),k,A),y,a)},p,_)},v.translateBy=function(c,m,p,_){v.transform(c,function(){return n(this.__zoom.translate(typeof m=="function"?m.apply(this,arguments):m,typeof p=="function"?p.apply(this,arguments):p),e.apply(this,arguments),a)},null,_)},v.translateTo=function(c,m,p,_,y){v.transform(c,function(){var w=e.apply(this,arguments),k=this.__zoom,A=_==null?V(w):typeof _=="function"?_.apply(this,arguments):_;return n(En.translate(A[0],A[1]).scale(k.k).translate(typeof m=="function"?-m.apply(this,arguments):-m,typeof p=="function"?-p.apply(this,arguments):-p),w,a)},_,y)};function S(c,m){return m=Math.max(o[0],Math.min(o[1],m)),m===c.k?c:new nt(m,c.x,c.y)}function M(c,m,p){var _=m[0]-p[0]*c.k,y=m[1]-p[1]*c.k;return _===c.x&&y===c.y?c:new nt(c.k,_,y)}function V(c){return[(+c[0][0]+ +c[1][0])/2,(+c[0][1]+ +c[1][1])/2]}function D(c,m,p,_){c.on("start.zoom",function(){E(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(_).end()}).tween("zoom",function(){var y=this,w=arguments,k=E(y,w).event(_),A=e.apply(y,w),I=p==null?V(A):typeof p=="function"?p.apply(y,w):p,X=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),N=y.__zoom,L=typeof m=="function"?m.apply(y,w):m,J=s(N.invert(I).concat(X/N.k),L.invert(I).concat(X/L.k));return function(F){if(F===1)F=L;else{var j=J(F),Jt=X/j[2];F=new nt(Jt,I[0]-j[0]*Jt,I[1]-j[1]*Jt)}k.zoom(null,F)}})}function E(c,m,p){return!p&&c.__zooming||new W(c,m)}function W(c,m){this.that=c,this.args=m,this.active=0,this.sourceEvent=null,this.extent=e.apply(c,m),this.taps=0}W.prototype={event:function(c){return c&&(this.sourceEvent=c),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(c,m){return this.mouse&&c!=="mouse"&&(this.mouse[1]=m.invert(this.mouse[0])),this.touch0&&c!=="touch"&&(this.touch0[1]=m.invert(this.touch0[0])),this.touch1&&c!=="touch"&&(this.touch1[1]=m.invert(this.touch1[0])),this.that.__zoom=m,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(c){var m=Y(this.that).datum();u.call(c,this.that,new Pa(c,{sourceEvent:this.sourceEvent,target:v,type:c,transform:this.that.__zoom,dispatch:u}),m)}};function ft(c,...m){if(!t.apply(this,arguments))return;var p=E(this,m).event(c),_=this.__zoom,y=Math.max(o[0],Math.min(o[1],_.k*Math.pow(2,r.apply(this,arguments)))),w=at(c);if(p.wheel)(p.mouse[0][0]!==w[0]||p.mouse[0][1]!==w[1])&&(p.mouse[1]=_.invert(p.mouse[0]=w)),clearTimeout(p.wheel);else{if(_.k===y)return;p.mouse=[w,_.invert(w)],Gt(this),p.start()}yt(c),p.wheel=setTimeout(k,b),p.zoom("mouse",n(M(S(_,y),p.mouse[0],p.mouse[1]),p.extent,a));function k(){p.wheel=null,p.end()}}function $t(c,...m){if(d||!t.apply(this,arguments))return;var p=c.currentTarget,_=E(this,m,!0).event(c),y=Y(c.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",X,!0),w=at(c,p),k=c.clientX,A=c.clientY;Zi(c.view),ne(c),_.mouse=[w,this.__zoom.invert(w)],Gt(this),_.start();function I(N){if(yt(N),!_.moved){var L=N.clientX-k,J=N.clientY-A;_.moved=L*L+J*J>x}_.event(N).zoom("mouse",n(M(_.that.__zoom,_.mouse[0]=at(N,p),_.mouse[1]),_.extent,a))}function X(N){y.on("mousemove.zoom mouseup.zoom",null),Ki(N.view,_.moved),yt(N),_.event(N).end()}}function Nt(c,...m){if(!!t.apply(this,arguments)){var p=this.__zoom,_=at(c.changedTouches?c.changedTouches[0]:c,this),y=p.invert(_),w=p.k*(c.shiftKey?.5:2),k=n(M(S(p,w),_,y),e.apply(this,m),a);yt(c),l>0?Y(this).transition().duration(l).call(D,k,_,c):Y(this).call(v.transform,k,_,c)}}function Un(c,...m){if(!!t.apply(this,arguments)){var p=c.touches,_=p.length,y=E(this,m,c.changedTouches.length===_).event(c),w,k,A,I;for(ne(c),k=0;k<_;++k)A=p[k],I=at(A,this),I=[I,this.__zoom.invert(I),A.identifier],y.touch0?!y.touch1&&y.touch0[2]!==I[2]&&(y.touch1=I,y.taps=0):(y.touch0=I,w=!0,y.taps=1+!!f);f&&(f=clearTimeout(f)),w&&(y.taps<2&&(h=I[0],f=setTimeout(function(){f=null},g)),Gt(this),y.start())}}function Wn(c,...m){if(!!this.__zooming){var p=E(this,m).event(c),_=c.changedTouches,y=_.length,w,k,A,I;for(yt(c),w=0;w<y;++w)k=_[w],A=at(k,this),p.touch0&&p.touch0[2]===k.identifier?p.touch0[0]=A:p.touch1&&p.touch1[2]===k.identifier&&(p.touch1[0]=A);if(k=p.that.__zoom,p.touch1){var X=p.touch0[0],N=p.touch0[1],L=p.touch1[0],J=p.touch1[1],F=(F=L[0]-X[0])*F+(F=L[1]-X[1])*F,j=(j=J[0]-N[0])*j+(j=J[1]-N[1])*j;k=S(k,Math.sqrt(F/j)),A=[(X[0]+L[0])/2,(X[1]+L[1])/2],I=[(N[0]+J[0])/2,(N[1]+J[1])/2]}else if(p.touch0)A=p.touch0[0],I=p.touch0[1];else return;p.zoom("touch",n(M(k,A,I),p.extent,a))}}function Xn(c,...m){if(!!this.__zooming){var p=E(this,m).event(c),_=c.changedTouches,y=_.length,w,k;for(ne(c),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),w=0;w<y;++w)k=_[w],p.touch0&&p.touch0[2]===k.identifier?delete p.touch0:p.touch1&&p.touch1[2]===k.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(k=at(k,this),Math.hypot(h[0]-k[0],h[1]-k[1])<T)){var A=Y(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return v.wheelDelta=function(c){return arguments.length?(r=typeof c=="function"?c:Pt(+c),v):r},v.filter=function(c){return arguments.length?(t=typeof c=="function"?c:Pt(!!c),v):t},v.touchable=function(c){return arguments.length?(i=typeof c=="function"?c:Pt(!!c),v):i},v.extent=function(c){return arguments.length?(e=typeof c=="function"?c:Pt([[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]]),v):e},v.scaleExtent=function(c){return arguments.length?(o[0]=+c[0],o[1]=+c[1],v):[o[0],o[1]]},v.translateExtent=function(c){return arguments.length?(a[0][0]=+c[0][0],a[1][0]=+c[1][0],a[0][1]=+c[0][1],a[1][1]=+c[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(c){return arguments.length?(n=c,v):n},v.duration=function(c){return arguments.length?(l=+c,v):l},v.interpolate=function(c){return arguments.length?(s=c,v):s},v.on=function(){var c=u.on.apply(u,arguments);return c===u?v:c},v.clickDistance=function(c){return arguments.length?(x=(c=+c)*c,v):Math.sqrt(x)},v.tapDistance=function(c){return arguments.length?(T=+c,v):T},v}function Ye(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}var Bn=er({name:"close-popup",beforeMount(t,{value:e}){const n={depth:Ye(e),handler(r){n.depth!==0&&setTimeout(()=>{const i=nr(t);i!==void 0&&rr(i,r,n.depth)})},handlerKey(r){ir(r,13)===!0&&n.handler(r)}};t.__qclosepopup=n,t.addEventListener("click",n.handler),t.addEventListener("keyup",n.handlerKey)},updated(t,{value:e,oldValue:n}){e!==n&&(t.__qclosepopup.depth=Ye(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}});const Fa={name:"AddFloorplanDialog",data(){return{visible:!1,floorplan_url:""}},methods:{ok(){this.$refs.urlInput.validate()&&(this.visible=!1,this.$emit("ok",{floorplan_url:this.floorplan_url}))},cancel(){this.visible=!1},launchDialog(){this.okdisabled=!0,this.floorplan_url="";var t=this;t.visible=!0}},computed:{}};function Ha(t,e,n,r,i,o){return P(),wt(an,{modelValue:i.visible,"onUpdate:modelValue":e[1]||(e[1]=a=>i.visible=a)},{default:z(()=>[C(en,null,{default:z(()=>[C(ln,null,{default:z(()=>[C(re,null,{default:z(()=>[ht("Add Floorplan")]),_:1}),nn(C(O,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Bn]])]),_:1}),C(rn,null,{default:z(()=>[ht(" Enter a web accessible URL for an image of the floorplan "),C(_e,{ref:"urlInput",filled:"",color:"grey",modelValue:i.floorplan_url,"onUpdate:modelValue":e[0]||(e[0]=a=>i.floorplan_url=a),name:"Floorplan Image URL",label:"URL","lazy-rules":"",rules:[a=>a&&a.length>0||"Enter URL"]},null,8,["modelValue","rules"])]),_:1}),C(on,{align:"right"},{default:z(()=>[C(O,{flat:"",label:"OK",color:"black",onClick:o.ok},null,8,["onClick"]),C(O,{flat:"",label:"Cancel",color:"primary",onClick:o.cancel},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Oa=ot(Fa,[["render",Ha]]),q={typefloorplan:"floorplan",typeotherarea:"otherarea",otherareaheight:500,backgrounditemwidth:1e3,otherareadata:[{label:"Front Garden",value:"optfg"},{label:"Back Garden",value:"optbg"},{label:"Side",value:"optside"},{label:"Electrics",value:"optelectric"},{label:"Boiler",value:"optboiler"},{label:"Water",value:"optwater"}]};function Ua(){return{background_items:[],node_items:[]}}function Wa({url:t,width:e,height:n}){return{type:q.typefloorplan,url:t,width:e,height:n}}function qn({data:t,item_data:e}){let n=t.background_items.reduce((i,o)=>i=i>o.order?i:o.order,0);const r={id:me(),item_data:e,order:n+1};return t.background_items.push(r),r}function Xa({data:t,item_data:e}){const n={id:me(),item_data:e};return t.node_items.push(n),n}function Rn({data:t}){var e=t.background_items.filter(function(n){return n.item_data.type===q.typeotherarea});if(e.length!==0)return e[0]}function Ya({data:t}){var e=Rn({data:t});return typeof e=="undefined"?[]:e.item_data.selection}function Qa({data:t,selection:e}){var n=Rn({data:t});if(typeof n=="undefined"){qn({data:t,item_data:{type:q.typeotherarea,selection:e,height:q.otherareaheight,width:q.backgrounditemwidth}});return}n.item_data.selection=e}function Za({data:t,nodeid:e}){const n=t.node_items.filter(function(r){return r.id===e});if(n.length===1)return n[0]}function Ka({data:t,nodeid:e}){t.node_items=t.node_items.filter(function(n){return n.id!==e})}var Q={getNewlyCreatedDataSet:Ua,addBackgroundItem:qn,getBackgroudnItemJson_Floorplan:Wa,getSelectedOtherAreas:Ya,setSelectedOtherAreas:Qa,addNodeItem:Xa,getNodeFromId:Za,deleteNodeFromId:Ka};function Ja({parentele:t,item:e,title:n,x:r,y:i,oadata:o}){t.append("rect").attr("width",e.item_data.width/3).attr("height",e.item_data.height/2-100).attr("x",r).attr("y",i+50).attr("style","fill: white;stroke-width:1;stroke:rgb(0,0,0)"),t.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",r+e.item_data.width/(2*3)).attr("y",i+30+50).attr("style","font-size: 20px; font-weight: 800;").text(a=>o.label)}function ja({backgroudnitem_group:t,allzoomedelements:e,thencall:n}){var r=Y(".backgroudnitemDrawing_otherAreaGroup"),i=t.filter(function(a){return a.item_data.type===q.typeotherarea});if(r.size()===0){Ae({item:i[0],backgroudnitem_group:t,allzoomedelements:e,thencall:n});return}var o=r.node().getBBox().y;r.remove(),Gn({allzoomedelements:e,item:i[0],ypos:o})}function Gn({allzoomedelements:t,item:e,ypos:n}){var r=0,i=0,o=t.append("g");o.attr("class","backgroudnitemDrawing_otherAreaGroup");var a=0;q.otherareadata.map(function(l){e.item_data.selection.includes(q.otherareadata[a].value)&&Ja({parentele:o,item:e,title:l.label,x:-550+r*(e.item_data.width/3),y:n+i*(e.item_data.height/2),oadata:q.otherareadata[a]}),a+=1,r+=1,r>2&&(r=0,i=1)})}function Ae({item:t,backgroudnitem_group:e,allzoomedelements:n,thencall:r}){let i=e.reduce((l,s)=>s.order<t.order?l=l+s.item_data.height:l,0);if(t.item_data.type===q.typefloorplan){var o=n.append("svg:image").attr("href",t.item_data.url).attr("width",t.item_data.width).attr("x",-550).attr("y",i).on("error",function(l){console.log("load image ",t.item_data.url," failed",l),console.log("error message ",l.message),console.log("error message ",l.target.error.message),console.log("allzoomedelements",n),Ft.create({color:"bg-grey-2",message:"Failed to load image",timeout:2})}),a=function(){setTimeout(function(){if(o.node().getBBox().height===0){a();return}t.item_data.height=o.node().getBBox().height,r()},5)};a();return}if(t.item_data.type===q.typeotherarea){Gn({allzoomedelements:n,item:t,ypos:i}),r();return}console.log("Error invalid backgroudn item type",t),r()}function Ln(t,e,n,r){if(t.length===0){r();return}Ae({item:t[0],backgroudnitem_group:e,allzoomedelements:n,thencall:function(){t.shift(),Ln(t,e,n,r)}})}function tl({backgroudnitem_group:t,allzoomedelements:e,thencall:n}){t.sort((i,o)=>i.order-o.order);var r=t.map(function(i){return i});Ln(r,t,e,n)}var Lt={drawSingleItem:Ae,drawAllBackgroundItems:tl,redrawOtherArea:ja};const el={name:"ChartComponent",components:{addFloorplanDialog:Oa},props:["refurbData"],data(){return{allzoomedelements:void 0,boudaryRect:void 0,svg:void 0,background_item_group:void 0,chartarea:{xmin:-650,xmax:650,ymin:-150,ymax:800}}},methods:{onClickAddOtherAreas(){var t=Q.getSelectedOtherAreas({data:this.refurbData});this.$q.dialog({title:"Options",message:"Select other areas to add to plans:",options:{type:"checkbox",model:t,items:q.otherareadata},cancel:!0,persistent:!0}).onOk(e=>{Q.setSelectedOtherAreas({data:this.refurbData,selection:e}),Lt.redrawOtherArea({backgroudnitem_group:this.refurbData.background_items,allzoomedelements:this.background_item_group,thencall:this.updatechartsize})}).onCancel(()=>{}).onDismiss(()=>{})},onClickAddFloorplan(){this.$refs.addFloorplanDialog.launchDialog()},onDialogCompleteAddFloorplan(t){t.floorplan_url="https://lh3.googleusercontent.com/pw/ABLVV8715kFOUDZGlx6NcwSx-EGUnYGl_7sLJ5T-QHVLTm0ojxZ04GzAyUnwnCORsc34bM5wOiSNnj1PVVhTlxKE-hb8gUw5hMtFH5-6xUymqPObqtQx6dS-Of8tSnFUNGYrPG_d9TzkJqUce4Gtj7dCeJlFQQ=w987-h755-s-no-gm?authuser=0";const e=Q.addBackgroundItem({data:this.refurbData,item_data:Q.getBackgroudnItemJson_Floorplan({url:t.floorplan_url,width:q.backgrounditemwidth,height:0})});Lt.drawSingleItem({item:e,backgroudnitem_group:this.refurbData.background_items,allzoomedelements:this.background_item_group,thencall:this.updatechartsize})},clickDIV(){},updatechartsize(){let t=this.refurbData.background_items.reduce((e,n)=>e=e+n.item_data.height,0);this.boudaryRect.attr("height",t+200)},initChart(){for(var t=this,e=function(r){var i=800,o=800;r.svg=oe("svg").attr("style","border: 1px solid black;position:fixed; top:0; left:0; height:100%; width:100%").attr("viewBox",[-i/2,-o/2,i,o]).attr("oncontextmenu","return false;"),r.allzoomedelements=r.svg.append("g"),t.boudaryRect=r.allzoomedelements.append("rect").attr("width",r.chartarea.xmax-r.chartarea.xmin).attr("height",r.chartarea.ymax-r.chartarea.ymin).attr("x",r.chartarea.xmin).attr("y",r.chartarea.ymin).attr("style","fill: white;stroke-width:3;stroke:rgb(0,0,0)"),r.svg.call(Pn().extent([[0,0],[i,o]]).scaleExtent([-5,10]).on("zoom",a)),r.svg.on("dblclick.zoom",null);function a(l,s){r.allzoomedelements.attr("transform",l.transform)}return r.allzoomedelements.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",0).attr("y",-70).attr("style","font-size: 40px; font-weight: 800;").text(l=>"Setup Plans"),t.background_item_group=r.allzoomedelements.append("g"),Lt.drawAllBackgroundItems({backgroudnitem_group:t.refurbData.background_items,allzoomedelements:t.background_item_group,thencall:t.updatechartsize}),r.svg.node()},n=document.getElementById("chartInsetionPoint_adsdsa");n.firstChild;)console.log("Removing old SVG"),n.removeChild(n.firstChild);n.appendChild(e(this))}},mounted(){this.initChart()},unmounted(){}};function nl(t,e,n,r,i,o){const a=st("addFloorplanDialog");return P(),et("div",null,[_t("div",{id:"chartInsetionPoint_adsdsa",onClick:e[0]||(e[0]=l=>o.clickDIV(l))}),C(dr,{position:"bottom-right",offset:[18,18]},{default:z(()=>[C(cr,{color:"grey",icon:"keyboard_arrow_up",direction:"up","vertical-actions-align":"right"},{default:z(()=>[C(Me,{color:"grey",onClick:o.onClickAddFloorplan,icon:"add",label:"Add floorplan"},null,8,["onClick"]),C(Me,{color:"grey",onClick:o.onClickAddOtherAreas,icon:"add",label:"Add other areas"},null,8,["onClick"])]),_:1})]),_:1}),C(a,{ref:"addFloorplanDialog",onOk:o.onDialogCompleteAddFloorplan,refurbData:n.refurbData},null,8,["onOk","refurbData"])])}var rl=ot(el,[["render",nl]]);const il={name:"AddWorkitemDialog",data(){return{visible:!1,editMode:!1,description:"",nodeid:void 0,nodeCords:void 0}},methods:{deletee(){this.visible=!1,this.$emit("deletee",{nodeid:this.nodeid})},ok(){if(this.$refs.urlInput.validate()){this.visible=!1;let t={type:"WORK",cords:this.nodeCords,description:this.description,nodeid:this.nodeid};this.$emit("ok",{editMode:this.editMode,node:t})}},cancel(){this.visible=!1},launchDialog(t,e,n,r){this.nodeCords=t,this.editMode=e,this.okdisabled=!0,e?(this.description=n,this.nodeid=r):this.description="";var i=this;i.visible=!0}},computed:{}};function ol(t,e,n,r,i,o){return P(),wt(an,{modelValue:i.visible,"onUpdate:modelValue":e[1]||(e[1]=a=>i.visible=a)},{default:z(()=>[C(en,null,{default:z(()=>[C(ln,null,{default:z(()=>[i.editMode?dt("",!0):(P(),wt(re,{key:0},{default:z(()=>[ht("Add Work item")]),_:1})),i.editMode?(P(),wt(re,{key:1},{default:z(()=>[ht("Edit Work item")]),_:1})):dt("",!0),i.editMode?(P(),wt(O,{key:2,flat:"",round:"",dense:"",icon:"delete",onClick:o.deletee},null,8,["onClick"])):dt("",!0),nn(C(O,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Bn]])]),_:1}),C(rn,null,{default:z(()=>[ht(" Enter description of work "),C(_e,{ref:"urlInput",filled:"",color:"grey",modelValue:i.description,"onUpdate:modelValue":e[0]||(e[0]=a=>i.description=a),name:"Description of work",label:"Description","lazy-rules":"",rules:[a=>a&&a.length>0||"Enter description of work to be done"]},null,8,["modelValue","rules"])]),_:1}),C(on,{align:"right"},{default:z(()=>[C(O,{flat:"",label:"OK",color:"black",onClick:o.ok},null,8,["onClick"]),C(O,{flat:"",label:"Cancel",color:"primary",onClick:o.cancel},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var al=ot(il,[["render",ol]]);function ll({rootGroup:t}){var e=t.append("g").attr("transform","rotate( 40 ) scale( 3 3 ) translate( -12 -12)");return e.append("path").attr("d","M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"),e}function sl({rootGroup:t}){var e=t.append("g").attr("transform","scale( 2.2 2.2 ) translate( -12 -12)");return e.append("path").attr("d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"),e.append("path").attr("d","M0 0h24v24H0z").attr("fill","none"),e}function ul({rootGroup:t}){var e=t.append("g").attr("transform","scale( 2.2 2.2 ) translate( -12 -12)");return e.append("path").attr("d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"),e.append("path").attr("d","M0 0h24v24H0z").attr("fill","none"),e}function cl({rootGroup:t}){var e=t.append("g").attr("transform","rotate( 40 ) translate( 0 -12)");return e.append("path").attr("d","M 0 0 L 0 24 L 24 24 L 24 0 L 0 0").attr("style","stroke:rgb(0,0,0);stroke-width:2"),e.append("path").attr("d","M 0 0 L 0 24 L -24 24 L -24 0 L 0 0").attr("fill","none").attr("style","stroke:rgb(0,0,0);stroke-width:2"),e}function fl({rootGroup:t}){var e=t.append("g").attr("transform","scale( 2.8 2.8 ) translate( -12 -12)");return e.append("path").attr("d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"),e.append("path").attr("d","M0 0h24v24H0z").attr("fill","none"),e}function hl({rootGroup:t}){var e=t.append("g").attr("transform","scale( 2.8 2.8 ) translate( -12 -12)");return e.append("path").attr("d","M12 10c-3.86 0-7 3.14-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.86-3.14-7-7-7zm0-4C5.93 6 1 10.93 1 17h2c0-4.96 4.04-9 9-9s9 4.04 9 9h2c0-6.07-4.93-11-11-11z"),e}function dl({rootGroup:t}){var e=t.append("g").attr("transform","scale( 0.05 0.05 ) translate( -300 500)");return e.append("path").attr("d","M440-440ZM120-120q-33 0-56.5-23.5T40-200v-480q0-33 23.5-56.5T120-760h126l74-80h240v80H355l-73 80H120v480h640v-360h80v360q0 33-23.5 56.5T760-120H120Zm640-560v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80ZM440-260q75 0 127.5-52.5T620-440q0-75-52.5-127.5T440-620q-75 0-127.5 52.5T260-440q0 75 52.5 127.5T440-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Z"),e}function pl({rootGroup:t}){var e=t.append("g").attr("transform","scale( 0.05 0.05 ) translate( -300 500)");return e.append("path").attr("d","M480-260q75 0 127.5-52.5T660-440q0-75-52.5-127.5T480-620q-75 0-127.5 52.5T300-440q0 75 52.5 127.5T480-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM160-120q-33 0-56.5-23.5T80-200v-480q0-33 23.5-56.5T160-760h126l74-80h240l74 80h126q33 0 56.5 23.5T880-680v480q0 33-23.5 56.5T800-120H160Zm0-80h640v-480H638l-73-80H395l-73 80H160v480Zm320-240Z"),e}function gl({rootGroup:t}){var e=t.append("g").attr("transform","scale( 0.05 0.05 ) translate( -300 500)");return e.append("path").attr("d","M756-120 537-339l84-84 219 219-84 84Zm-552 0-84-84 276-276-68-68-28 28-51-51v82l-28 28-121-121 28-28h82l-50-50 142-142q20-20 43-29t47-9q24 0 47 9t43 29l-92 92 50 50-28 28 68 68 90-90q-4-11-6.5-23t-2.5-24q0-59 40.5-99.5T701-841q15 0 28.5 3t27.5 9l-99 99 72 72 99-99q7 14 9.5 27.5T841-701q0 59-40.5 99.5T701-561q-12 0-24-2t-23-7L204-120Z"),e}function ml({rootGroup:t}){var e=14,n=3,r=24,i=10,o=5,a=[0,-r],l=[-e,0],s=[e,0],u=[-n,-o],f=[n,-o],h=[-n,i+o],d=[n,i+o],g=[["L",...u],["L",...h],["L",...d],["L",...f]],b=[["M",...a],["L",...l],...g,["L",...s],["L",...a]],x=b.reduce(function(v,S,M,V){return S.reduce(function(D,E,W,ft){return D+E+" "},v)},""),T=t.append("g").attr("transform","rotate( -30 ) translate( 0 5)");return T.append("path").attr("d",x).attr("style","stroke:rgb(0,0,0);stroke-width:2"),T}var Ct={getSVGMaterialIconLink:ll,getSVGMaterialIconDelete:sl,getSVGMaterialIconEdit:ul,getSVGRJMIconEraser:cl,getSVGRJMIconPointer:ml,getSVGMaterialIconAdd:fl,getSVGMaterialIconLooks:hl,getSVGMaterialAddAPhoto:dl,getSVGMaterialConstruction:gl,getSVGMaterialPhotoCamera:pl};function Fn({rootGroup:t,x:e,y:n,nodeid:r,iconFn:i,transform:o}){const a=[r];let l=t.append("g").attr("transform","translate( "+e+" "+n+")").attr("class","nodeitem").data(a).attr("id",function(u){return"_"+u});l.append("circle").attr("r",20).attr("style","fill: lightblue;");let s=l.append("g").attr("transform",o);i({rootGroup:s})}function _l({rootGroup:t,nodeid:e}){var n=t.select("#_"+e);n.remove()}function vl({rootGroup:t,x:e,y:n,nodeid:r}){return Fn({rootGroup:t,x:e,y:n,nodeid:r,iconFn:Ct.getSVGMaterialPhotoCamera,transform:"translate( -4 0) scale(0.5 0.5)"})}function yl({rootGroup:t,x:e,y:n,nodeid:r}){return Fn({rootGroup:t,x:e,y:n,nodeid:r,iconFn:Ct.getSVGMaterialConstruction,transform:"translate( -4 0) scale(0.5 0.5)"})}function Hn({node:t,allbackgroudnitems:e,rootGroup:n,thencall:r}){const i=On({nodecords:t.item_data.cords,allbackgroudnitems:e});t.type==="PICTURE"?vl({rootGroup:n,x:i.x,y:i.y,nodeid:t.id}):yl({rootGroup:n,x:i.x,y:i.y,nodeid:t.id})}function xl({rootGroup:t,allnodes:e,allbackgroudnitems:n,thencall:r}){let i=0;for(;i<e.length;)Hn({node:e[i],allbackgroudnitems:n,rootGroup:t,thencall:r}),i++}function On({nodecords:t,allbackgroudnitems:e}){let n=0,r=0;for(;r<e.length;){if(t.backgrounditem===e[r].id)return{x:t.x,y:t.y+n};n+=e[r].item_data.height,r++}return{x:t.x,y:t.y}}function wl({svgcords:t,allbackgroudnitems:e}){let n=0,r=e[0].id,i=0,o=0;for(;o<e.length&&(r=e[o].id,n+=e[o].item_data.height,!(t.y<n));)i=n,o++;return{backgrounditem:r,x:t.x,y:t.y-i}}var xt={drawAllNodes:xl,drawSingleNode:Hn,getSvgCordsFromNodeCords:On,getNodeCordsFromSVGCords:wl,removeNodeById:_l};function Qe({leftX:t,rightX:e,panelHeight:n,isTopLeftCurved:r,isTopRightCurved:i,panelCurveWidth:o,panelCurveHeight:a,includeBottomLine:l}){var s=[t,0],u=[e,0],f=[t,-n],h=[e,-n],d=[];if(l?d.push(["M",...u]):(d.push(["M",...s]),d.push(["L",...u])),i){var g=[e,a-n],b=[e-o,-n];d.push(["L",...g]),d.push(["A",o,a,0,0,0,...b])}else d.push(["L",...h]);if(r){var x=[t,a-n],T=[t+o,-n];d.push(["L",...T]),d.push(["A",o,a,0,0,0,...x])}else d.push(["L",...f]);return d.push(["L",...s]),d.reduce(function(v,S,M,V){return S.reduce(function(D,E,W,ft){return D+E+" "},v)},"")}const bl={name:"SVGPanel",props:{selectedCell:{type:Number,default:0}},data(){return{rootGroup:void 0,cellBackgroundArray:void 0,cellDrawArray:void 0,numCells:void 0,cellWidth:150,panelHeight:70,panelCurveWidth:50,panelCurveHeight:50,cellDivideLineYGap:10,includeBottomLineInMainPanel:!0,cellIconSVGArray:[]}},methods:{render({rootGroup:t,cellArray:e}){var n=this;this.numCells=e.length,this.rootGroup=t.append("g"),this.rootGroup.attr("style","pointer-events: auto;"),this.cellBackgroundArray=e.map(function(r,i,o){return n.cellIconSVGArray.push({title:r.title}),n.renderCellBackgroundAndReturnUpdateObj({cellNumber:i,selected:i===n.selectedCell,render:r.render})}),this.renderPanelOutline(),this.renderCellsAndSeperators()},renderCellsAndSeperators(){var t=this;this.cellBackgroundArray.map(function(e,n,r){var i=-(t.cellWidth*t.numCells)/2+t.cellWidth*n;n!==0&&t.rootGroup.append("line").attr("x1",i).attr("y1",-t.cellDivideLineYGap).attr("x2",i).attr("y2",t.cellDivideLineYGap-t.panelHeight).attr("style","stroke:rgb(0,0,0);stroke-width:2"),t.cellIconSVGArray[n]=e.g.append("g").attr("transform","translate("+(i+t.cellWidth/2)+" "+-(t.panelHeight/2)+")"),typeof e.render!="undefined"&&e.render({rootGroup:t.cellIconSVGArray[n]})})},renderPanelOutline(){this.rootGroup.append("path").attr("d",Qe({leftX:-(this.numCells*this.cellWidth)/2,rightX:this.numCells*this.cellWidth/2,panelHeight:this.panelHeight,isTopLeftCurved:!0,isTopRightCurved:!0,panelCurveWidth:this.panelCurveWidth,panelCurveHeight:this.panelCurveHeight,includeBottomLine:this.includeBottomLineInMainPanel})).attr("stroke","black").attr("stroke-width",5).attr("stroke-linecap","square").attr("fill","none")},getColor({selected:t}){return t?"grey":"lightgrey"},renderCellBackgroundAndReturnUpdateObj({cellNumber:t,selected:e,render:n}){var r=this,i=t*this.cellWidth-this.numCells*this.cellWidth/2,o=t,a=this.rootGroup.append("g").on("click",function(s,u){r.$emit("selectedCell",o)}),l=a.append("path").attr("d",Qe({leftX:i,rightX:i+this.cellWidth,panelHeight:this.panelHeight,isTopLeftCurved:t===0,isTopRightCurved:t===this.numCells-1,panelCurveWidth:this.panelCurveWidth,panelCurveHeight:this.panelCurveHeight,includeBottomLine:!0})).attr("fill",this.getColor({selected:e}));return typeof r.cellIconSVGArray[t].title!="undefined"&&a.append("title").text(r.cellIconSVGArray[t].title),{updateFn:function({selected:s}){l.attr("fill",r.getColor({selected:s}))},g:a,render:n}},rerenderIcon({index:t,newRenderFunction:e}){var n=this;n.cellIconSVGArray[t].selectAll("*").remove(),typeof e!="undefined"&&e({rootGroup:n.cellIconSVGArray[t]})}},watch:{selectedCell:function(t,e){this.cellBackgroundArray[e].updateFn({selected:e===this.selectedCell}),this.cellBackgroundArray[t].updateFn({selected:t===this.selectedCell})}}};function kl(t,e,n,r,i,o){return P(),et("div")}var Cl=ot(bl,[["render",kl]]);const Sl={name:"UserInterfaceSVGBottomToolbarMain",components:{svgPanel:Cl},props:[],data(){return{selectedPanelItem:0,cells:[{render:Ct.getSVGRJMIconPointer,inputMode:"POINTER",title:"Pointer mode - use to pan around"},{render:Ct.getSVGMaterialAddAPhoto,inputMode:"ADDPHOTO",title:"Photo mode - use to add photos to plan"},{render:Ct.getSVGMaterialConstruction,inputMode:"ADDWORKITEM",title:"Work item mode - use to add work items to plan"}]}},methods:{getCurrentInputMode(){return this.cells[this.selectedPanelItem].inputMode},setCurrentInputMode(t){let e=0;for(;e<this.cells.length;)this.cells[e].inputMode===t&&(this.selectedPanelItem=e),e++},toolbarClickItem(t){this.selectedPanelItem=t},render(t){var e=this,n=this.$refs.svgPanel.render({rootGroup:t.rootGroup,cellArray:e.cells});return n},activateSubscriptions(){},destroyed(){}}};function Al(t,e,n,r,i,o){const a=st("svgPanel");return P(),et("div",null,[C(a,{ref:"svgPanel",selectedCell:i.selectedPanelItem,onSelectedCell:e[0]||(e[0]=l=>o.toolbarClickItem(l))},null,8,["selectedCell"])])}var Tl=ot(Sl,[["render",Al]]);const Il={name:"ViewingChartComponent",components:{svgBottomToolbar:Tl,workitemDialog:al},props:["refurbData"],data(){return{allzoomedelements:void 0,boudaryRect:void 0,svg:void 0,panelsvg:void 0,background_item_group:void 0,node_group:void 0,chartarea:{xmin:-650,xmax:650,ymin:-150,ymax:800}}},methods:{clickDIV(){},UIInputClickNode(t,e){const n=Y(t.srcElement.closest(".nodeitem")).data()[0],r=Q.getNodeFromId({data:this.refurbData,nodeid:n});if(r.item_data.type==="WORK"){this.editWorkItem(r),event.preventDefault();return}},UIInputZoomedBackgroundClick(t,e){var n=this.svg.node(),r=n.createSVGPoint();r.x=event.clientX,r.y=event.clientY,r=r.matrixTransform(this.allzoomedelements.node().getCTM().inverse());const i=xt.getNodeCordsFromSVGCords({svgcords:r,allbackgroudnitems:this.refurbData.background_items});xt.getSvgCordsFromNodeCords({nodecords:i,allbackgroudnitems:this.refurbData.background_items});const o=this.$refs.svgBottomToolbar.getCurrentInputMode();o==="ADDWORKITEM"?this.addWorkItem(i):o==="ADDPHOTO"&&this.addPhoto(i),event.preventDefault()},editWorkItem(t){this.$refs.workitemDialog.launchDialog(t.item_data.cords,!0,t.item_data.description,t.id)},addWorkItem(t){this.$refs.workitemDialog.launchDialog(t,!1)},onDialogCompleteWorkitemDialogDeletee({nodeid:t}){xt.removeNodeById({rootGroup:this.node_group,nodeid:t}),Q.deleteNodeFromId({data:this.refurbData,nodeid:t})},onDialogCompleteWorkitemDialog({editMode:t,node:e}){if(t){const n=Q.getNodeFromId({data:this.refurbData,nodeid:e.nodeid});n.item_data.description=e.description}else{const n=Q.addNodeItem({data:this.refurbData,item_data:e});xt.drawSingleNode({node:n,allbackgroudnitems:this.refurbData.background_items,rootGroup:this.node_group,thencall:void 0}),this.$refs.svgBottomToolbar.setCurrentInputMode("POINTER")}},addPhoto(t){console.log("TODO addPhoto")},updatechartsize(){let t=this.refurbData.background_items.reduce((e,n)=>e=e+n.item_data.height,0);this.boudaryRect.attr("height",t+200)},initChart(){for(var t=this,e=function(o){t.refurbData.background_items.sort((u,f)=>u.order-f.order);var a=800,l=800;o.svg=oe("svg").attr("style","border: 1px solid black;position:fixed; top:0; left:0; height:100%; width:100%").attr("viewBox",[-a/2,-l/2,a,l]).attr("oncontextmenu","return false;"),o.panelsvg=oe("svg").attr("style","position:fixed; top:0; left:0; height:100%; width:100%; pointer-events: none;").attr("viewBox",[-50,0,100,800]).attr("oncontextmenu","return false;"),o.allzoomedelements=o.svg.append("g"),t.boudaryRect=o.allzoomedelements.append("rect").attr("width",o.chartarea.xmax-o.chartarea.xmin).attr("height",o.chartarea.ymax-o.chartarea.ymin).attr("x",o.chartarea.xmin).attr("y",o.chartarea.ymin).attr("style","fill: white;stroke-width:3;stroke:rgb(0,0,0)").on("contextmenu",o.UIInputZoomedBackgroundContextMenu).on("dblclick",o.UIInputZoomedBackgroundDoubleClick).on("click",o.UIInputZoomedBackgroundClick),o.svg.call(Pn().extent([[0,0],[a,l]]).scaleExtent([-5,10]).on("zoom",s)),o.svg.on("dblclick.zoom",null);function s(u,f){o.allzoomedelements.attr("transform",u.transform)}return o.allzoomedelements.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",0).attr("y",-70).attr("style","font-size: 40px; font-weight: 800;").text(u=>"Input Viewing Data").on("click",o.UIInputZoomedBackgroundClick),t.background_item_group=o.allzoomedelements.append("g"),t.background_item_group.on("click",o.UIInputZoomedBackgroundClick),Lt.drawAllBackgroundItems({backgroudnitem_group:t.refurbData.background_items,allzoomedelements:t.background_item_group,thencall:t.updatechartsize}),t.node_group=o.allzoomedelements.append("g").on("click",o.UIInputClickNode),xt.drawAllNodes({rootGroup:t.node_group,allnodes:t.refurbData.node_items,allbackgroudnitems:t.refurbData.background_items}),o.svg.node()},n=document.getElementById("chartInsetionPoint_adsdsa");n.firstChild;)console.log("Removing old SVG"),n.removeChild(n.firstChild);n.appendChild(e(this));for(var r=document.getElementById("chartInsetionPointPanel_adsdsa");r.firstChild;)console.log("Removing old SVG2"),r.removeChild(r.firstChild);r.appendChild(this.panelsvg.node());var i=this.panelsvg.append("g").attr("transform","translate( 0 780) scale( 0.5 0.5 ) ");this.$refs.svgBottomToolbar.render({rootGroup:i})}},mounted(){this.initChart()},unmounted(){}},Ml=_t("div",{id:"chartInsetionPointPanel_adsdsa"},null,-1);function Dl(t,e,n,r,i,o){const a=st("svgBottomToolbar"),l=st("workitemDialog");return P(),et("div",null,[_t("div",{id:"chartInsetionPoint_adsdsa",onClick:e[0]||(e[0]=s=>o.clickDIV(s))}),Ml,C(a,{ref:"svgBottomToolbar"},null,512),C(l,{ref:"workitemDialog",onOk:o.onDialogCompleteWorkitemDialog,onDeletee:o.onDialogCompleteWorkitemDialogDeletee},null,8,["onOk","onDeletee"])])}var $l=ot(Il,[["render",Dl]]);function Nl(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{var n=document.execCommand("copy"),r=n?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+r)}catch(i){Notify.create("Fallback: Oops, unable to copy"+i)}document.body.removeChild(e)}function zl(t,e){if(!navigator.clipboard){Nl(t);return}navigator.clipboard.writeText(t).then(function(){e.ok()},function(n){e.error("Copy Failed: "+n)})}var Vl={copyTextToClipboard:zl};const El={name:"JsonComponent",props:["modelValue"],emits:["update:modelValue"],computed:{value:{get(){return JSON.stringify(this.modelValue)},set(t){this.$emit("update:modelValue",JSON.parse(t))}}},methods:{copytoclipboard(){const t={ok:function(){Ft.create({color:"bg-grey-2",message:"Copied sucessfully",timeout:2e3})},error:function(e){Ft.create({color:"bg-grey-2",message:e,timeout:2e3})}};Vl.copyTextToClipboard(this.value,t)},resetdata(){var t=Q.getNewlyCreatedDataSet();this.value=JSON.stringify(t),this.$emit("update:modelValue",t)}}},Pl=_t("h1",null,"Json Data",-1),Bl=_t("div",null,"Use this page to save and restore data for this tool. To save the data copy to clipboard then store the text. To restore the data paste the copied text into the box below",-1);function ql(t,e,n,r,i,o){return P(),et("div",null,[Pl,Bl,C(O,{label:"Copy to clipboard",color:"primary",icon:"content_copy",onClick:o.copytoclipboard},null,8,["onClick"]),C(O,{label:"Reset Data",icon:"delete",onClick:o.resetdata},null,8,["onClick"]),C(_e,{filled:"",type:"textarea",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a)},null,8,["modelValue"]),ht(" modelValue: "+Ie(n.modelValue)+" value: "+Ie(o.value),1)])}var Rl=ot(El,[["render",ql]]);const Gl=or({name:"CalcRefurbishment",components:{plansChart:rl,viewingChart:$l,jsonView:Rl},data(){return{refurb_mode:"plans",refurb_data:Q.getNewlyCreatedDataSet()}},methods:{click_refurb_menu(t){if(t==="viewing"&&this.refurb_data.background_items.length===0){Ft.create({color:"bg-grey-2",message:"Add floorplans before viewing",timeout:2e3});return}this.refurb_mode=t}},mounted(){var t=this;this.$bus.on("click_refurb_menu",e=>{t.click_refurb_menu(e)})},unmounted(){}}),Ll={class:"main-page fit col wrap justify-center items-center content-center"},Fl={key:0},Hl={key:1},Ol={key:2};function Ul(t,e,n,r,i,o){const a=st("plansChart"),l=st("viewingChart"),s=st("jsonView");return P(),et("div",null,[C(Yn,{class:"flex flex-center"},{default:z(()=>[_t("div",Ll,[t.refurb_mode==="plans"?(P(),et("div",Fl,[C(a,{ref:"plansChart",refurbData:t.refurb_data},null,8,["refurbData"])])):dt("",!0),t.refurb_mode==="viewing"?(P(),et("div",Hl,[C(l,{ref:"viewingChart",refurbData:t.refurb_data},null,8,["refurbData"])])):dt("",!0),t.refurb_mode==="json"?(P(),et("div",Ol,[C(s,{ref:"jsonView","model-value":t.refurb_data,"onUpdate:modelValue":e[0]||(e[0]=u=>t.refurb_data=u)},null,8,["model-value"])])):dt("",!0)])]),_:1})])}var Ql=ot(Gl,[["render",Ul]]);export{Ql as default};
