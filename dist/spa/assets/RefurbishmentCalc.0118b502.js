import{Q as En}from"./QPage.38a7bc95.js";import{j as T,i as se,z as Le,u as Mn,b4 as Xe,k as B,Y as rt,Q as He,H as Qe,x as ue,a7 as Dn,a8 as In,m as ve,a9 as Ue,aa as qn,E as Rn,l as Ye,A as Qt,B as Bn,af as Fn,b5 as Vn,b6 as Pn,a4 as On,_ as Vt,o as lt,c as Ln,w as K,a as $,Z as Xn,f as Jt,ac as Hn,$ as Qn,X as Ge,b7 as Un,aX as Yn,N as Wt,r as Zt,g as gt,e as Pt,t as xe,d as Gn,at as we}from"./index.860da819.js";import{Q as Kn,a as Jn}from"./QToolbar.9b2b2801.js";const Wn=["top","right","bottom","left"],Ke={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:t=>Wn.includes(t)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Je(t,e){return{formClass:T(()=>`q-fab--form-${t.square===!0?"square":"rounded"}`),stacked:T(()=>t.externalLabel===!1&&["top","bottom"].includes(t.labelPosition)),labelProps:T(()=>{if(t.externalLabel===!0){const n=t.hideLabel===null?e.value===!1:t.hideLabel;return{action:"push",data:{class:[t.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${t.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:t.labelStyle}}}return{action:["left","top"].includes(t.labelPosition)?"unshift":"push",data:{class:[t.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${t.labelPosition}`+(t.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:t.labelStyle}}})}}const We={start:"self-end",center:"self-center",end:"self-start"},Zn=Object.keys(We);var be=se({name:"QFabAction",props:{...Ke,icon:{type:String,default:""},anchor:{type:String,validator:t=>Zn.includes(t)},to:[String,Object],replace:Boolean},emits:["click"],setup(t,{slots:e,emit:n}){const r=Le(Xe,()=>({showing:{value:!0},onChildClick:Mn})),{formClass:i,labelProps:o}=Je(t,r.showing),a=T(()=>{const h=We[t.anchor];return i.value+(h!==void 0?` ${h}`:"")}),l=T(()=>t.disable===!0||r.showing.value!==!0);function s(h){r.onChildClick(h),n("click",h)}function u(){const h=[];return e.icon!==void 0?h.push(e.icon()):t.icon!==""&&h.push(B(He,{name:t.icon})),(t.label!==""||e.label!==void 0)&&h[o.value.action](B("div",o.value.data,e.label!==void 0?e.label():[t.label])),Qe(e.default,h)}const f=ue();return Object.assign(f.proxy,{click:s}),()=>B(rt,{class:a.value,...t,noWrap:!0,stack:t.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:s},u)}});const jn=["up","right","down","left"],tr=["left","center","right"];var er=se({name:"QFab",props:{...Ke,...Dn,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:t=>jn.includes(t)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:t=>tr.includes(t)}},emits:In,setup(t,{slots:e}){const n=ve(null),r=ve(t.modelValue===!0),i=Ue(),{proxy:{$q:o}}=ue(),{formClass:a,labelProps:l}=Je(t,r),s=T(()=>t.persistent!==!0),{hide:u,toggle:f}=qn({showing:r,hideOnRouteChange:s}),h=T(()=>({opened:r.value})),p=T(()=>`q-fab z-fab row inline justify-center q-fab--align-${t.verticalActionsAlign} ${a.value}`+(r.value===!0?" q-fab--opened":" q-fab--closed")),g=T(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${t.direction} q-fab__actions--${r.value===!0?"opened":"closed"}`),k=T(()=>{const C={id:i,role:"menu"};return r.value!==!0&&(C["aria-hidden"]="true"),C}),b=T(()=>`q-fab__icon-holder  q-fab__icon-holder--${r.value===!0?"opened":"closed"}`);function N(C,z){const I=e[C],M=`q-fab__${C} absolute-full`;return I===void 0?B(He,{class:M,name:t[z]||o.iconSet.fab[z]}):B("div",{class:M},I(h.value))}function y(){const C=[];return t.hideIcon!==!0&&C.push(B("div",{class:b.value},[N("icon","icon"),N("active-icon","activeIcon")])),(t.label!==""||e.label!==void 0)&&C[l.value.action](B("div",l.value.data,e.label!==void 0?e.label(h.value):[t.label])),Qe(e.tooltip,C)}return Rn(Xe,{showing:r,onChildClick(C){u(C),n.value!==null&&n.value.$el.focus()}}),()=>B("div",{class:p.value},[B(rt,{ref:n,class:a.value,...t,noWrap:!0,stack:t.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i,onClick:f},y),B("div",{class:g.value,...k.value},Ye(e.default))])}});const nr={position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>t.length===2},expand:Boolean};function rr(){const{props:t,proxy:{$q:e}}=ue(),n=Le(Bn,Qt);if(n===Qt)return console.error("QPageSticky needs to be child of QLayout"),Qt;const r=T(()=>{const h=t.position;return{top:h.indexOf("top")>-1,right:h.indexOf("right")>-1,bottom:h.indexOf("bottom")>-1,left:h.indexOf("left")>-1,vertical:h==="top"||h==="bottom",horizontal:h==="left"||h==="right"}}),i=T(()=>n.header.offset),o=T(()=>n.right.offset),a=T(()=>n.footer.offset),l=T(()=>n.left.offset),s=T(()=>{let h=0,p=0;const g=r.value,k=e.lang.rtl===!0?-1:1;g.top===!0&&i.value!==0?p=`${i.value}px`:g.bottom===!0&&a.value!==0&&(p=`${-a.value}px`),g.left===!0&&l.value!==0?h=`${k*l.value}px`:g.right===!0&&o.value!==0&&(h=`${-k*o.value}px`);const b={transform:`translate(${h}, ${p})`};return t.offset&&(b.margin=`${t.offset[1]}px ${t.offset[0]}px`),g.vertical===!0?(l.value!==0&&(b[e.lang.rtl===!0?"right":"left"]=`${l.value}px`),o.value!==0&&(b[e.lang.rtl===!0?"left":"right"]=`${o.value}px`)):g.horizontal===!0&&(i.value!==0&&(b.top=`${i.value}px`),a.value!==0&&(b.bottom=`${a.value}px`)),b}),u=T(()=>`q-page-sticky row flex-center fixed-${t.position} q-page-sticky--${t.expand===!0?"expand":"shrink"}`);function f(h){const p=Ye(h.default);return B("div",{class:u.value,style:s.value},t.expand===!0?p:[B("div",p)])}return{$layout:n,getStickyContent:f}}var ir=se({name:"QPageSticky",props:nr,setup(t,{slots:e}){const{getStickyContent:n}=rr();return()=>n(e)}}),or={value:()=>{}};function ce(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Tt(n)}function Tt(t){this._=t}function ar(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Tt.prototype=ce.prototype={constructor:Tt,on:function(t,e){var n=this._,r=ar(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=lr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=ke(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ke(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function lr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ke(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=or,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var jt="http://www.w3.org/1999/xhtml",Ce={svg:"http://www.w3.org/2000/svg",xhtml:jt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ce.hasOwnProperty(e)?{space:Ce[e],local:t}:t}function sr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===jt&&e.documentElement.namespaceURI===jt?e.createElement(t):e.createElementNS(n,t)}}function ur(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fe(t){var e=Ot(t);return(e.local?ur:sr)(e)}function cr(){}function he(t){return t==null?cr:function(){return this.querySelector(t)}}function fr(t){typeof t!="function"&&(t=he(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=new Array(a),s,u,f=0;f<a;++f)(s=o[f])&&(u=t.call(s,s.__data__,f,o))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new R(r,this._parents)}function hr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function dr(){return[]}function Ze(t){return t==null?dr:function(){return this.querySelectorAll(t)}}function pr(t){return function(){return hr(t.apply(this,arguments))}}function gr(t){typeof t=="function"?t=pr(t):t=Ze(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new R(r,i)}function je(t){return function(){return this.matches(t)}}function tn(t){return function(e){return e.matches(t)}}var mr=Array.prototype.find;function _r(t){return function(){return mr.call(this.children,t)}}function yr(){return this.firstElementChild}function vr(t){return this.select(t==null?yr:_r(typeof t=="function"?t:tn(t)))}var xr=Array.prototype.filter;function wr(){return Array.from(this.children)}function br(t){return function(){return xr.call(this.children,t)}}function kr(t){return this.selectAll(t==null?wr:br(typeof t=="function"?t:tn(t)))}function Cr(t){typeof t!="function"&&(t=je(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new R(r,this._parents)}function en(t){return new Array(t.length)}function Ar(){return new R(this._enter||this._groups.map(en),this._parents)}function Dt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Dt.prototype={constructor:Dt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Sr(t){return function(){return t}}function $r(t,e,n,r,i,o){for(var a=0,l,s=e.length,u=o.length;a<u;++a)(l=e[a])?(l.__data__=o[a],r[a]=l):n[a]=new Dt(t,o[a]);for(;a<s;++a)(l=e[a])&&(i[a]=l)}function Nr(t,e,n,r,i,o,a){var l,s,u=new Map,f=e.length,h=o.length,p=new Array(f),g;for(l=0;l<f;++l)(s=e[l])&&(p[l]=g=a.call(s,s.__data__,l,e)+"",u.has(g)?i[l]=s:u.set(g,s));for(l=0;l<h;++l)g=a.call(t,o[l],l,o)+"",(s=u.get(g))?(r[l]=s,s.__data__=o[l],u.delete(g)):n[l]=new Dt(t,o[l]);for(l=0;l<f;++l)(s=e[l])&&u.get(p[l])===s&&(i[l]=s)}function Tr(t){return t.__data__}function zr(t,e){if(!arguments.length)return Array.from(this,Tr);var n=e?Nr:$r,r=this._parents,i=this._groups;typeof t!="function"&&(t=Sr(t));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],p=h.length,g=Er(t.call(f,f&&f.__data__,u,r)),k=g.length,b=l[u]=new Array(k),N=a[u]=new Array(k),y=s[u]=new Array(p);n(f,h,b,N,y,g,e);for(var C=0,z=0,I,M;C<k;++C)if(I=b[C]){for(C>=z&&(z=C+1);!(M=N[z])&&++z<k;);I._next=M||null}}return a=new R(a,r),a._enter=l,a._exit=s,a}function Er(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mr(){return new R(this._exit||this._groups.map(en),this._parents)}function Dr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ir(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),l=new Array(i),s=0;s<a;++s)for(var u=n[s],f=r[s],h=u.length,p=l[s]=new Array(h),g,k=0;k<h;++k)(g=u[k]||f[k])&&(p[k]=g);for(;s<i;++s)l[s]=n[s];return new R(l,this._parents)}function qr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Rr(t){t||(t=Br);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,f=0;f<l;++f)(u=a[f])&&(s[f]=u);s.sort(e)}return new R(i,this._parents).order()}function Br(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Fr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Vr(){return Array.from(this)}function Pr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Or(){let t=0;for(const e of this)++t;return t}function Lr(){return!this.node()}function Xr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function Hr(t){return function(){this.removeAttribute(t)}}function Qr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ur(t,e){return function(){this.setAttribute(t,e)}}function Yr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Gr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Kr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Jr(t,e){var n=Ot(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Qr:Hr:typeof e=="function"?n.local?Kr:Gr:n.local?Yr:Ur)(n,e))}function nn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wr(t){return function(){this.style.removeProperty(t)}}function Zr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function jr(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ti(t,e,n){return arguments.length>1?this.each((e==null?Wr:typeof e=="function"?jr:Zr)(t,e,n==null?"":n)):ut(this.node(),t)}function ut(t,e){return t.style.getPropertyValue(e)||nn(t).getComputedStyle(t,null).getPropertyValue(e)}function ei(t){return function(){delete this[t]}}function ni(t,e){return function(){this[t]=e}}function ri(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ii(t,e){return arguments.length>1?this.each((e==null?ei:typeof e=="function"?ri:ni)(t,e)):this.node()[t]}function rn(t){return t.trim().split(/^|\s+/)}function de(t){return t.classList||new on(t)}function on(t){this._node=t,this._names=rn(t.getAttribute("class")||"")}on.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function an(t,e){for(var n=de(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ln(t,e){for(var n=de(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function oi(t){return function(){an(this,t)}}function ai(t){return function(){ln(this,t)}}function li(t,e){return function(){(e.apply(this,arguments)?an:ln)(this,t)}}function si(t,e){var n=rn(t+"");if(arguments.length<2){for(var r=de(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?li:e?oi:ai)(n,e))}function ui(){this.textContent=""}function ci(t){return function(){this.textContent=t}}function fi(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function hi(t){return arguments.length?this.each(t==null?ui:(typeof t=="function"?fi:ci)(t)):this.node().textContent}function di(){this.innerHTML=""}function pi(t){return function(){this.innerHTML=t}}function gi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function mi(t){return arguments.length?this.each(t==null?di:(typeof t=="function"?gi:pi)(t)):this.node().innerHTML}function _i(){this.nextSibling&&this.parentNode.appendChild(this)}function yi(){return this.each(_i)}function vi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xi(){return this.each(vi)}function wi(t){var e=typeof t=="function"?t:fe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bi(){return null}function ki(t,e){var n=typeof t=="function"?t:fe(t),r=e==null?bi:typeof e=="function"?e:he(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ci(){var t=this.parentNode;t&&t.removeChild(this)}function Ai(){return this.each(Ci)}function Si(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $i(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ni(t){return this.select(t?$i:Si)}function Ti(t){return arguments.length?this.property("__data__",t):this.node().__data__}function zi(t){return function(e){t.call(this,e,this.__data__)}}function Ei(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Mi(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Di(t,e,n){return function(){var r=this.__on,i,o=zi(e);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ii(t,e,n){var r=Ei(t+""),i,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=e?Di:Mi,i=0;i<o;++i)this.each(l(r[i],e,n));return this}function sn(t,e,n){var r=nn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function qi(t,e){return function(){return sn(this,t,e)}}function Ri(t,e){return function(){return sn(this,t,e.apply(this,arguments))}}function Bi(t,e){return this.each((typeof e=="function"?Ri:qi)(t,e))}function*Fi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var un=[null];function R(t,e){this._groups=t,this._parents=e}function xt(){return new R([[document.documentElement]],un)}function Vi(){return this}R.prototype=xt.prototype={constructor:R,select:fr,selectAll:gr,selectChild:vr,selectChildren:kr,filter:Cr,data:zr,enter:Ar,exit:Mr,join:Dr,merge:Ir,selection:Vi,order:qr,sort:Rr,call:Fr,nodes:Vr,node:Pr,size:Or,empty:Lr,each:Xr,attr:Jr,style:ti,property:ii,classed:si,text:hi,html:mi,raise:yi,lower:xi,append:wi,insert:ki,remove:Ai,clone:Ni,datum:Ti,on:Ii,dispatch:Bi,[Symbol.iterator]:Fi};function J(t){return typeof t=="string"?new R([[document.querySelector(t)]],[document.documentElement]):new R([[t]],un)}function Pi(t){return J(fe(t).call(document.documentElement))}function Oi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function et(t,e){if(t=Oi(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const te={capture:!0,passive:!1};function ee(t){t.preventDefault(),t.stopImmediatePropagation()}function Li(t){var e=t.document.documentElement,n=J(t).on("dragstart.drag",ee,te);"onselectstart"in e?n.on("selectstart.drag",ee,te):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xi(t,e){var n=t.document.documentElement,r=J(t).on("dragstart.drag",null);e&&(r.on("click.drag",ee,te),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function pe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function cn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wt(){}var mt=.7,It=1/mt,st="\\s*([+-]?\\d+)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",H="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hi=/^#([0-9a-f]{3,8})$/,Qi=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),Ui=new RegExp(`^rgb\\(${H},${H},${H}\\)$`),Yi=new RegExp(`^rgba\\(${st},${st},${st},${_t}\\)$`),Gi=new RegExp(`^rgba\\(${H},${H},${H},${_t}\\)$`),Ki=new RegExp(`^hsl\\(${_t},${H},${H}\\)$`),Ji=new RegExp(`^hsla\\(${_t},${H},${H},${_t}\\)$`),Ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pe(wt,yt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Se,formatHex:Se,formatHex8:Wi,formatHsl:Zi,formatRgb:$e,toString:$e});function Se(){return this.rgb().formatHex()}function Wi(){return this.rgb().formatHex8()}function Zi(){return fn(this).formatHsl()}function $e(){return this.rgb().formatRgb()}function yt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ne(e):n===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?At(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?At(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qi.exec(t))?new D(e[1],e[2],e[3],1):(e=Ui.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Yi.exec(t))?At(e[1],e[2],e[3],e[4]):(e=Gi.exec(t))?At(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ki.exec(t))?Ee(e[1],e[2]/100,e[3]/100,1):(e=Ji.exec(t))?Ee(e[1],e[2]/100,e[3]/100,e[4]):Ae.hasOwnProperty(t)?Ne(Ae[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function Ne(t){return new D(t>>16&255,t>>8&255,t&255,1)}function At(t,e,n,r){return r<=0&&(t=e=n=NaN),new D(t,e,n,r)}function ji(t){return t instanceof wt||(t=yt(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function ne(t,e,n,r){return arguments.length===1?ji(t):new D(t,e,n,r==null?1:r)}function D(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}pe(D,ne,cn(wt,{brighter(t){return t=t==null?It:Math.pow(It,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mt:Math.pow(mt,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new D(it(this.r),it(this.g),it(this.b),qt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Te,formatHex:Te,formatHex8:to,formatRgb:ze,toString:ze}));function Te(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}`}function to(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}${nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ze(){const t=qt(this.opacity);return`${t===1?"rgb(":"rgba("}${it(this.r)}, ${it(this.g)}, ${it(this.b)}${t===1?")":`, ${t})`}`}function qt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function it(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nt(t){return t=it(t),(t<16?"0":"")+t.toString(16)}function Ee(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new O(t,e,n,r)}function fn(t){if(t instanceof O)return new O(t.h,t.s,t.l,t.opacity);if(t instanceof wt||(t=yt(t)),!t)return new O;if(t instanceof O)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(e===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-e)/l+2:a=(e-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new O(a,l,s,t.opacity)}function eo(t,e,n,r){return arguments.length===1?fn(t):new O(t,e,n,r==null?1:r)}function O(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}pe(O,eo,cn(wt,{brighter(t){return t=t==null?It:Math.pow(It,t),new O(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mt:Math.pow(mt,t),new O(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new D(Ut(t>=240?t-240:t+120,i,r),Ut(t,i,r),Ut(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new O(Me(this.h),St(this.s),St(this.l),qt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qt(this.opacity);return`${t===1?"hsl(":"hsla("}${Me(this.h)}, ${St(this.s)*100}%, ${St(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Me(t){return t=(t||0)%360,t<0?t+360:t}function St(t){return Math.max(0,Math.min(1,t||0))}function Ut(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var hn=t=>()=>t;function no(t,e){return function(n){return t+n*e}}function ro(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function io(t){return(t=+t)==1?dn:function(e,n){return n-e?ro(e,n,t):hn(isNaN(e)?n:e)}}function dn(t,e){var n=e-t;return n?no(t,n):hn(isNaN(t)?e:t)}var De=function t(e){var n=io(e);function r(i,o){var a=n((i=ne(i)).r,(o=ne(o)).r),l=n(i.g,o.g),s=n(i.b,o.b),u=dn(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yt=new RegExp(re.source,"g");function oo(t){return function(){return t}}function ao(t){return function(e){return t(e)+""}}function lo(t,e){var n=re.lastIndex=Yt.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(t=t+"",e=e+"";(r=re.exec(t))&&(i=Yt.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:tt(r,i)})),n=Yt.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?ao(s[0].x):oo(e):(e=s.length,function(u){for(var f=0,h;f<e;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}var Ie=180/Math.PI,ie={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pn(t,e,n,r,i,o){var a,l,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ie,skewX:Math.atan(s)*Ie,scaleX:a,scaleY:l}}var $t;function so(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ie:pn(e.a,e.b,e.c,e.d,e.e,e.f)}function uo(t){return t==null||($t||($t=document.createElementNS("http://www.w3.org/2000/svg","g")),$t.setAttribute("transform",t),!(t=$t.transform.baseVal.consolidate()))?ie:(t=t.matrix,pn(t.a,t.b,t.c,t.d,t.e,t.f))}function gn(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,p,g,k){if(u!==h||f!==p){var b=g.push("translate(",null,e,null,n);k.push({i:b-4,x:tt(u,h)},{i:b-2,x:tt(f,p)})}else(h||p)&&g.push("translate("+h+e+p+n)}function a(u,f,h,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:h.push(i(h)+"rotate(",null,r)-2,x:tt(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function l(u,f,h,p){u!==f?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:tt(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,p,g,k){if(u!==h||f!==p){var b=g.push(i(g)+"scale(",null,",",null,")");k.push({i:b-4,x:tt(u,h)},{i:b-2,x:tt(f,p)})}else(h!==1||p!==1)&&g.push(i(g)+"scale("+h+","+p+")")}return function(u,f){var h=[],p=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,p),a(u.rotate,f.rotate,h,p),l(u.skewX,f.skewX,h,p),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,p),u=f=null,function(g){for(var k=-1,b=p.length,N;++k<b;)h[(N=p[k]).i]=N.x(g);return h.join("")}}}var co=gn(so,"px, ","px)","deg)"),fo=gn(uo,", ",")",")"),ho=1e-12;function qe(t){return((t=Math.exp(t))+1/t)/2}function po(t){return((t=Math.exp(t))-1/t)/2}function go(t){return((t=Math.exp(2*t))-1)/(t+1)}var mo=function t(e,n,r){function i(o,a){var l=o[0],s=o[1],u=o[2],f=a[0],h=a[1],p=a[2],g=f-l,k=h-s,b=g*g+k*k,N,y;if(b<ho)y=Math.log(p/u)/e,N=function(j){return[l+j*g,s+j*k,u*Math.exp(e*j*y)]};else{var C=Math.sqrt(b),z=(p*p-u*u+r*b)/(2*u*n*C),I=(p*p-u*u-r*b)/(2*p*n*C),M=Math.log(Math.sqrt(z*z+1)-z),F=Math.log(Math.sqrt(I*I+1)-I);y=(F-M)/e,N=function(j){var bt=j*y,kt=qe(M),Ct=u/(n*C)*(kt*go(e*bt+M)-po(M));return[l+Ct*g,s+Ct*k,u*kt/qe(e*bt+M)]}}return N.duration=y*1e3*e/Math.SQRT2,N}return i.rho=function(o){var a=Math.max(.001,+o),l=a*a,s=l*l;return t(a,l,s)},i}(Math.SQRT2,2,4),ct=0,dt=0,ft=0,mn=1e3,Rt,pt,Bt=0,ot=0,Lt=0,vt=typeof performance=="object"&&performance.now?performance:Date,_n=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ge(){return ot||(_n(_o),ot=vt.now()+Lt)}function _o(){ot=0}function Ft(){this._call=this._time=this._next=null}Ft.prototype=yn.prototype={constructor:Ft,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ge():+n)+(e==null?0:+e),!this._next&&pt!==this&&(pt?pt._next=this:Rt=this,pt=this),this._call=t,this._time=n,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};function yn(t,e,n){var r=new Ft;return r.restart(t,e,n),r}function yo(){ge(),++ct;for(var t=Rt,e;t;)(e=ot-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ct}function Re(){ot=(Bt=vt.now())+Lt,ct=dt=0;try{yo()}finally{ct=0,xo(),ot=0}}function vo(){var t=vt.now(),e=t-Bt;e>mn&&(Lt-=e,Bt=t)}function xo(){for(var t,e=Rt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Rt=n);pt=t,oe(r)}function oe(t){if(!ct){dt&&(dt=clearTimeout(dt));var e=t-ot;e>24?(t<1/0&&(dt=setTimeout(Re,t-vt.now()-Lt)),ft&&(ft=clearInterval(ft))):(ft||(Bt=vt.now(),ft=setInterval(vo,mn)),ct=1,_n(Re))}}function Be(t,e,n){var r=new Ft;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var wo=ce("start","end","cancel","interrupt"),bo=[],vn=0,Fe=1,ae=2,zt=3,Ve=4,le=5,Et=6;function Xt(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;ko(t,n,{name:e,index:r,group:i,on:wo,tween:bo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vn})}function me(t,e){var n=L(t,e);if(n.state>vn)throw new Error("too late; already scheduled");return n}function Q(t,e){var n=L(t,e);if(n.state>zt)throw new Error("too late; already running");return n}function L(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ko(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=yn(o,0,n.time);function o(u){n.state=Fe,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,p,g;if(n.state!==Fe)return s();for(f in r)if(g=r[f],g.name===n.name){if(g.state===zt)return Be(a);g.state===Ve?(g.state=Et,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[f]):+f<e&&(g.state=Et,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[f])}if(Be(function(){n.state===zt&&(n.state=Ve,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=ae,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ae){for(n.state=zt,i=new Array(p=n.tween.length),f=0,h=-1;f<p;++f)(g=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=le,1),h=-1,p=i.length;++h<p;)i[h].call(t,f);n.state===le&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=Et,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Mt(t,e){var n=t.__transition,r,i,o=!0,a;if(!!n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>ae&&r.state<le,r.state=Et,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Co(t){return this.each(function(){Mt(this,t)})}function Ao(t,e){var n,r;return function(){var i=Q(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function So(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Q(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function $o(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=L(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Ao:So)(n,t,e))}function _e(t,e,n){var r=t._id;return t.each(function(){var i=Q(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return L(i,r).value[e]}}function xn(t,e){var n;return(typeof e=="number"?tt:e instanceof yt?De:(n=yt(e))?(e=n,De):lo)(t,e)}function No(t){return function(){this.removeAttribute(t)}}function To(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Eo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Mo(t,e,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l)))}}function Do(t,e,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l)))}}function Io(t,e){var n=Ot(t),r=n==="transform"?fo:xn;return this.attrTween(t,typeof e=="function"?(n.local?Do:Mo)(n,r,_e(this,"attr."+t,e)):e==null?(n.local?To:No)(n):(n.local?Eo:zo)(n,r,e))}function qo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ro(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Bo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ro(t,o)),n}return i._value=e,i}function Fo(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&qo(t,o)),n}return i._value=e,i}function Vo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ot(t);return this.tween(n,(r.local?Bo:Fo)(r,e))}function Po(t,e){return function(){me(this,t).delay=+e.apply(this,arguments)}}function Oo(t,e){return e=+e,function(){me(this,t).delay=e}}function Lo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Po:Oo)(e,t)):L(this.node(),e).delay}function Xo(t,e){return function(){Q(this,t).duration=+e.apply(this,arguments)}}function Ho(t,e){return e=+e,function(){Q(this,t).duration=e}}function Qo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xo:Ho)(e,t)):L(this.node(),e).duration}function Uo(t,e){if(typeof e!="function")throw new Error;return function(){Q(this,t).ease=e}}function Yo(t){var e=this._id;return arguments.length?this.each(Uo(e,t)):L(this.node(),e).ease}function Go(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Q(this,t).ease=n}}function Ko(t){if(typeof t!="function")throw new Error;return this.each(Go(this._id,t))}function Jo(t){typeof t!="function"&&(t=je(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new Z(r,this._parents,this._name,this._id)}function Wo(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=e[l],u=n[l],f=s.length,h=a[l]=new Array(f),p,g=0;g<f;++g)(p=s[g]||u[g])&&(h[g]=p);for(;l<r;++l)a[l]=e[l];return new Z(a,this._parents,this._name,this._id)}function Zo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function jo(t,e,n){var r,i,o=Zo(e)?me:Q;return function(){var a=o(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}function ta(t,e){var n=this._id;return arguments.length<2?L(this.node(),n).on.on(t):this.each(jo(n,t,e))}function ea(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function na(){return this.on("end.remove",ea(this._id))}function ra(t){var e=this._name,n=this._id;typeof t!="function"&&(t=he(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),f,h,p=0;p<s;++p)(f=l[p])&&(h=t.call(f,f.__data__,p,l))&&("__data__"in f&&(h.__data__=f.__data__),u[p]=h,Xt(u[p],e,n,p,u,L(f,n)));return new Z(o,this._parents,e,n)}function ia(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ze(t));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var p=t.call(f,f.__data__,h,s),g,k=L(f,n),b=0,N=p.length;b<N;++b)(g=p[b])&&Xt(g,e,n,b,p,k);o.push(p),a.push(f)}return new Z(o,a,e,n)}var oa=xt.prototype.constructor;function aa(){return new oa(this._groups,this._parents)}function la(t,e){var n,r,i;return function(){var o=ut(this,t),a=(this.style.removeProperty(t),ut(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function wn(t){return function(){this.style.removeProperty(t)}}function sa(t,e,n){var r,i=n+"",o;return function(){var a=ut(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function ua(t,e,n){var r,i,o;return function(){var a=ut(this,t),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(t),ut(this,t))),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l))}}function ca(t,e){var n,r,i,o="style."+e,a="end."+o,l;return function(){var s=Q(this,t),u=s.on,f=s.value[o]==null?l||(l=wn(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),s.on=r}}function fa(t,e,n){var r=(t+="")=="transform"?co:xn;return e==null?this.styleTween(t,la(t,r)).on("end.style."+t,wn(t)):typeof e=="function"?this.styleTween(t,ua(t,r,_e(this,"style."+t,e))).each(ca(this._id,t)):this.styleTween(t,sa(t,r,e),n).on("end.style."+t,null)}function ha(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function da(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&ha(t,a,n)),r}return o._value=e,o}function pa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,da(t,e,n==null?"":n))}function ga(t){return function(){this.textContent=t}}function ma(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function _a(t){return this.tween("text",typeof t=="function"?ma(_e(this,"text",t)):ga(t==null?"":t+""))}function ya(t){return function(e){this.textContent=t.call(this,e)}}function va(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ya(i)),e}return r._value=t,r}function xa(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,va(t))}function wa(){for(var t=this._name,e=this._id,n=bn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var f=L(s,e);Xt(s,t,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Z(r,this._parents,t,n)}function ba(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=Q(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),u.on=e}),i===0&&o()})}var ka=0;function Z(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function bn(){return++ka}var G=xt.prototype;Z.prototype={constructor:Z,select:ra,selectAll:ia,selectChild:G.selectChild,selectChildren:G.selectChildren,filter:Jo,merge:Wo,selection:aa,transition:wa,call:G.call,nodes:G.nodes,node:G.node,size:G.size,empty:G.empty,each:G.each,on:ta,attr:Io,attrTween:Vo,style:fa,styleTween:pa,text:_a,textTween:xa,remove:na,tween:$o,delay:Lo,duration:Qo,ease:Yo,easeVarying:Ko,end:ba,[Symbol.iterator]:G[Symbol.iterator]};function Ca(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Aa={time:null,delay:0,duration:250,ease:Ca};function Sa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $a(t){var e,n;t instanceof Z?(e=t._id,t=t._name):(e=bn(),(n=Aa).time=ge(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&Xt(s,t,e,u,a,n||Sa(s,e));return new Z(r,this._parents,t,e)}xt.prototype.interrupt=Co;xt.prototype.transition=$a;var Nt=t=>()=>t;function Na(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function W(t,e,n){this.k=t,this.x=e,this.y=n}W.prototype={constructor:W,scale:function(t){return t===1?this:new W(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new W(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kn=new W(1,0,0);W.prototype;function Gt(t){t.stopImmediatePropagation()}function ht(t){t.preventDefault(),t.stopImmediatePropagation()}function Ta(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function za(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Pe(){return this.__zoom||kn}function Ea(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ma(){return navigator.maxTouchPoints||"ontouchstart"in this}function Da(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Ia(){var t=Ta,e=za,n=Da,r=Ea,i=Ma,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=mo,u=ce("start","zoom","end"),f,h,p,g=500,k=150,b=0,N=10;function y(c){c.property("__zoom",Pe).on("wheel.zoom",bt,{passive:!1}).on("mousedown.zoom",kt).on("dblclick.zoom",Ct).filter(i).on("touchstart.zoom",Nn).on("touchmove.zoom",Tn).on("touchend.zoom touchcancel.zoom",zn).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(c,m,d,_){var v=c.selection?c.selection():c;v.property("__zoom",Pe),c!==v?M(c,m,d,_):v.interrupt().each(function(){F(this,arguments).event(_).start().zoom(null,typeof m=="function"?m.apply(this,arguments):m).end()})},y.scaleBy=function(c,m,d,_){y.scaleTo(c,function(){var v=this.__zoom.k,x=typeof m=="function"?m.apply(this,arguments):m;return v*x},d,_)},y.scaleTo=function(c,m,d,_){y.transform(c,function(){var v=e.apply(this,arguments),x=this.__zoom,w=d==null?I(v):typeof d=="function"?d.apply(this,arguments):d,A=x.invert(w),S=typeof m=="function"?m.apply(this,arguments):m;return n(z(C(x,S),w,A),v,a)},d,_)},y.translateBy=function(c,m,d,_){y.transform(c,function(){return n(this.__zoom.translate(typeof m=="function"?m.apply(this,arguments):m,typeof d=="function"?d.apply(this,arguments):d),e.apply(this,arguments),a)},null,_)},y.translateTo=function(c,m,d,_,v){y.transform(c,function(){var x=e.apply(this,arguments),w=this.__zoom,A=_==null?I(x):typeof _=="function"?_.apply(this,arguments):_;return n(kn.translate(A[0],A[1]).scale(w.k).translate(typeof m=="function"?-m.apply(this,arguments):-m,typeof d=="function"?-d.apply(this,arguments):-d),x,a)},_,v)};function C(c,m){return m=Math.max(o[0],Math.min(o[1],m)),m===c.k?c:new W(m,c.x,c.y)}function z(c,m,d){var _=m[0]-d[0]*c.k,v=m[1]-d[1]*c.k;return _===c.x&&v===c.y?c:new W(c.k,_,v)}function I(c){return[(+c[0][0]+ +c[1][0])/2,(+c[0][1]+ +c[1][1])/2]}function M(c,m,d,_){c.on("start.zoom",function(){F(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(_).end()}).tween("zoom",function(){var v=this,x=arguments,w=F(v,x).event(_),A=e.apply(v,x),S=d==null?I(A):typeof d=="function"?d.apply(v,x):d,X=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),E=v.__zoom,V=typeof m=="function"?m.apply(v,x):m,U=s(E.invert(S).concat(X/E.k),V.invert(S).concat(X/V.k));return function(P){if(P===1)P=V;else{var Y=U(P),Ht=X/Y[2];P=new W(Ht,S[0]-Y[0]*Ht,S[1]-Y[1]*Ht)}w.zoom(null,P)}})}function F(c,m,d){return!d&&c.__zooming||new j(c,m)}function j(c,m){this.that=c,this.args=m,this.active=0,this.sourceEvent=null,this.extent=e.apply(c,m),this.taps=0}j.prototype={event:function(c){return c&&(this.sourceEvent=c),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(c,m){return this.mouse&&c!=="mouse"&&(this.mouse[1]=m.invert(this.mouse[0])),this.touch0&&c!=="touch"&&(this.touch0[1]=m.invert(this.touch0[0])),this.touch1&&c!=="touch"&&(this.touch1[1]=m.invert(this.touch1[0])),this.that.__zoom=m,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(c){var m=J(this.that).datum();u.call(c,this.that,new Na(c,{sourceEvent:this.sourceEvent,target:y,type:c,transform:this.that.__zoom,dispatch:u}),m)}};function bt(c,...m){if(!t.apply(this,arguments))return;var d=F(this,m).event(c),_=this.__zoom,v=Math.max(o[0],Math.min(o[1],_.k*Math.pow(2,r.apply(this,arguments)))),x=et(c);if(d.wheel)(d.mouse[0][0]!==x[0]||d.mouse[0][1]!==x[1])&&(d.mouse[1]=_.invert(d.mouse[0]=x)),clearTimeout(d.wheel);else{if(_.k===v)return;d.mouse=[x,_.invert(x)],Mt(this),d.start()}ht(c),d.wheel=setTimeout(w,k),d.zoom("mouse",n(z(C(_,v),d.mouse[0],d.mouse[1]),d.extent,a));function w(){d.wheel=null,d.end()}}function kt(c,...m){if(p||!t.apply(this,arguments))return;var d=c.currentTarget,_=F(this,m,!0).event(c),v=J(c.view).on("mousemove.zoom",S,!0).on("mouseup.zoom",X,!0),x=et(c,d),w=c.clientX,A=c.clientY;Li(c.view),Gt(c),_.mouse=[x,this.__zoom.invert(x)],Mt(this),_.start();function S(E){if(ht(E),!_.moved){var V=E.clientX-w,U=E.clientY-A;_.moved=V*V+U*U>b}_.event(E).zoom("mouse",n(z(_.that.__zoom,_.mouse[0]=et(E,d),_.mouse[1]),_.extent,a))}function X(E){v.on("mousemove.zoom mouseup.zoom",null),Xi(E.view,_.moved),ht(E),_.event(E).end()}}function Ct(c,...m){if(!!t.apply(this,arguments)){var d=this.__zoom,_=et(c.changedTouches?c.changedTouches[0]:c,this),v=d.invert(_),x=d.k*(c.shiftKey?.5:2),w=n(z(C(d,x),_,v),e.apply(this,m),a);ht(c),l>0?J(this).transition().duration(l).call(M,w,_,c):J(this).call(y.transform,w,_,c)}}function Nn(c,...m){if(!!t.apply(this,arguments)){var d=c.touches,_=d.length,v=F(this,m,c.changedTouches.length===_).event(c),x,w,A,S;for(Gt(c),w=0;w<_;++w)A=d[w],S=et(A,this),S=[S,this.__zoom.invert(S),A.identifier],v.touch0?!v.touch1&&v.touch0[2]!==S[2]&&(v.touch1=S,v.taps=0):(v.touch0=S,x=!0,v.taps=1+!!f);f&&(f=clearTimeout(f)),x&&(v.taps<2&&(h=S[0],f=setTimeout(function(){f=null},g)),Mt(this),v.start())}}function Tn(c,...m){if(!!this.__zooming){var d=F(this,m).event(c),_=c.changedTouches,v=_.length,x,w,A,S;for(ht(c),x=0;x<v;++x)w=_[x],A=et(w,this),d.touch0&&d.touch0[2]===w.identifier?d.touch0[0]=A:d.touch1&&d.touch1[2]===w.identifier&&(d.touch1[0]=A);if(w=d.that.__zoom,d.touch1){var X=d.touch0[0],E=d.touch0[1],V=d.touch1[0],U=d.touch1[1],P=(P=V[0]-X[0])*P+(P=V[1]-X[1])*P,Y=(Y=U[0]-E[0])*Y+(Y=U[1]-E[1])*Y;w=C(w,Math.sqrt(P/Y)),A=[(X[0]+V[0])/2,(X[1]+V[1])/2],S=[(E[0]+U[0])/2,(E[1]+U[1])/2]}else if(d.touch0)A=d.touch0[0],S=d.touch0[1];else return;d.zoom("touch",n(z(w,A,S),d.extent,a))}}function zn(c,...m){if(!!this.__zooming){var d=F(this,m).event(c),_=c.changedTouches,v=_.length,x,w;for(Gt(c),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),x=0;x<v;++x)w=_[x],d.touch0&&d.touch0[2]===w.identifier?delete d.touch0:d.touch1&&d.touch1[2]===w.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(w=et(w,this),Math.hypot(h[0]-w[0],h[1]-w[1])<N)){var A=J(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return y.wheelDelta=function(c){return arguments.length?(r=typeof c=="function"?c:Nt(+c),y):r},y.filter=function(c){return arguments.length?(t=typeof c=="function"?c:Nt(!!c),y):t},y.touchable=function(c){return arguments.length?(i=typeof c=="function"?c:Nt(!!c),y):i},y.extent=function(c){return arguments.length?(e=typeof c=="function"?c:Nt([[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]]),y):e},y.scaleExtent=function(c){return arguments.length?(o[0]=+c[0],o[1]=+c[1],y):[o[0],o[1]]},y.translateExtent=function(c){return arguments.length?(a[0][0]=+c[0][0],a[1][0]=+c[1][0],a[0][1]=+c[0][1],a[1][1]=+c[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(c){return arguments.length?(n=c,y):n},y.duration=function(c){return arguments.length?(l=+c,y):l},y.interpolate=function(c){return arguments.length?(s=c,y):s},y.on=function(){var c=u.on.apply(u,arguments);return c===u?y:c},y.clickDistance=function(c){return arguments.length?(b=(c=+c)*c,y):Math.sqrt(b)},y.tapDistance=function(c){return arguments.length?(N=+c,y):N},y}function Oe(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}var qa=Fn({name:"close-popup",beforeMount(t,{value:e}){const n={depth:Oe(e),handler(r){n.depth!==0&&setTimeout(()=>{const i=Vn(t);i!==void 0&&Pn(i,r,n.depth)})},handlerKey(r){On(r,13)===!0&&n.handler(r)}};t.__qclosepopup=n,t.addEventListener("click",n.handler),t.addEventListener("keyup",n.handlerKey)},updated(t,{value:e,oldValue:n}){e!==n&&(t.__qclosepopup.depth=Oe(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}});const Ra={name:"AddFloorplanDialog",data(){return{visible:!1,floorplan_url:""}},methods:{ok(){this.$refs.urlInput.validate()&&(this.visible=!1,this.$emit("ok",{floorplan_url:this.floorplan_url}))},cancel(){this.visible=!1},launchDialog(){this.okdisabled=!0,this.floorplan_url="";var t=this;t.visible=!0}},computed:{}};function Ba(t,e,n,r,i,o){return lt(),Ln(Yn,{modelValue:i.visible,"onUpdate:modelValue":e[1]||(e[1]=a=>i.visible=a)},{default:K(()=>[$(Xn,null,{default:K(()=>[$(Kn,null,{default:K(()=>[$(Jn,null,{default:K(()=>[Jt("Add Floorplan")]),_:1}),Hn($(rt,{flat:"",round:"",dense:"",icon:"close"},null,512),[[qa]])]),_:1}),$(Qn,null,{default:K(()=>[Jt(" Enter a web accessible URL for an image of the floorplan "),$(Ge,{ref:"urlInput",filled:"",color:"grey",modelValue:i.floorplan_url,"onUpdate:modelValue":e[0]||(e[0]=a=>i.floorplan_url=a),name:"Floorplan Image URL",label:"URL","lazy-rules":"",rules:[a=>a&&a.length>0||"Enter URL"]},null,8,["modelValue","rules"])]),_:1}),$(Un,{align:"right"},{default:K(()=>[$(rt,{flat:"",label:"OK",color:"black",onClick:o.ok},null,8,["onClick"]),$(rt,{flat:"",label:"Cancel",color:"primary",onClick:o.cancel},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Fa=Vt(Ra,[["render",Ba]]),q={typefloorplan:"floorplan",typeotherarea:"otherarea",otherareaheight:500,backgrounditemwidth:1e3,otherareadata:[{label:"Front Garden",value:"optfg"},{label:"Back Garden",value:"optbg"},{label:"Side",value:"optside"},{label:"Electrics",value:"optelectric"},{label:"Boiler",value:"optboiler"},{label:"Water",value:"optwater"}]};function Va(){return{background_items:[]}}function Pa({url:t,width:e,height:n}){return{type:q.typefloorplan,url:t,width:e,height:n}}function Cn({data:t,item_data:e}){let n=t.background_items.reduce((i,o)=>i=i>o.order?i:o.order,0);const r={id:Ue(),item_data:e,order:n+1};return t.background_items.push(r),r}function An({data:t}){var e=t.background_items.filter(function(n){return n.item_data.type===q.typeotherarea});if(e.length!==0)return e[0]}function Oa({data:t}){var e=An({data:t});return typeof e=="undefined"?[]:e.item_data.selection}function La({data:t,selection:e}){var n=An({data:t});if(typeof n=="undefined"){Cn({data:t,item_data:{type:q.typeotherarea,selection:e,height:q.otherareaheight,width:q.backgrounditemwidth}});return}n.item_data.selection=e}var at={getNewlyCreatedDataSet:Va,addBackgroundItem:Cn,getBackgroudnItemJson_Floorplan:Pa,getSelectedOtherAreas:Oa,setSelectedOtherAreas:La};function Xa({parentele:t,item:e,title:n,x:r,y:i,oadata:o}){t.append("rect").attr("width",e.item_data.width/3).attr("height",e.item_data.height/2-100).attr("x",r).attr("y",i+50).attr("style","fill: white;stroke-width:1;stroke:rgb(0,0,0)"),t.append("text").attr("text-anchor","middle").attr("alignment-baseline","central").attr("x",r+e.item_data.width/(2*3)).attr("y",i+30+50).attr("style","font-size: 20px; font-weight: 800;").text(a=>o.label)}function Ha({allbackgrounditems:t,allzoomedelements:e,thencall:n}){var r=J(".backgroudnitemDrawing_otherAreaGroup"),i=t.filter(function(a){return a.item_data.type===q.typeotherarea});if(r.size()===0){ye({item:i[0],allbackgrounditems:t,allzoomedelements:e,thencall:n});return}var o=r.node().getBBox().y;r.remove(),Sn({allzoomedelements:e,item:i[0],ypos:o})}function Sn({allzoomedelements:t,item:e,ypos:n}){var r=0,i=0,o=t.append("g");o.attr("class","backgroudnitemDrawing_otherAreaGroup");var a=0;q.otherareadata.map(function(l){e.item_data.selection.includes(q.otherareadata[a].value)&&Xa({parentele:o,item:e,title:l.label,x:-550+r*(e.item_data.width/3),y:n+i*(e.item_data.height/2),oadata:q.otherareadata[a]}),a+=1,r+=1,r>2&&(r=0,i=1)})}function ye({item:t,allbackgrounditems:e,allzoomedelements:n,thencall:r}){let i=e.reduce((a,l)=>l.order<t.order?a=a+l.item_data.height:a,0);if(t.item_data.type===q.typefloorplan){var o=n.append("svg:image").attr("href",t.item_data.url).attr("width",t.item_data.width).attr("x",-550).attr("y",i).on("error",function(a){console.log("load failed",a),Wt.create({color:"bg-grey-2",message:"Failed to load image",timeout:2})});setTimeout(function(){t.item_data.height=o.node().getBBox().height,r()},5);return}if(t.item_data.type===q.typeotherarea){Sn({allzoomedelements:n,item:t,ypos:i}),r();return}console.log("Error invalid backgroudn item type",t),r()}function $n(t,e,n,r){if(t.length===0){r();return}ye({item:t[0],allbackgrounditems:e,allzoomedelements:n,thencall:function(){t.shift(),$n(t,e,n,r)}})}function Qa({allbackgrounditems:t,allzoomedelements:e,thencall:n}){t.sort((i,o)=>i.order-o.order);var r=t.map(function(i){return i});$n(r,t,e,n)}var Kt={drawSingleItem:ye,drawAllBackgroundItems:Qa,redrawOtherArea:Ha};const Ua={name:"ChartComponent",components:{addFloorplanDialog:Fa},props:["refurbData"],data(){return{allzoomedelements:void 0,boudaryRect:void 0,svg:void 0,chartarea:{xmin:-650,xmax:650,ymin:-100,ymax:800}}},methods:{onClickAddOtherAreas(){var t=at.getSelectedOtherAreas({data:this.refurbData});this.$q.dialog({title:"Options",message:"Select other areas to add to plans:",options:{type:"checkbox",model:t,items:q.otherareadata},cancel:!0,persistent:!0}).onOk(e=>{at.setSelectedOtherAreas({data:this.refurbData,selection:e}),Kt.redrawOtherArea({allbackgrounditems:this.refurbData.background_items,allzoomedelements:this.allzoomedelements,thencall:this.updatechartsize})}).onCancel(()=>{}).onDismiss(()=>{})},onClickAddFloorplan(){this.$refs.addFloorplanDialog.launchDialog()},onDialogCompleteAddFloorplan(t){const e=at.addBackgroundItem({data:this.refurbData,item_data:at.getBackgroudnItemJson_Floorplan({url:t.floorplan_url,width:q.backgrounditemwidth,height:0})});Kt.drawSingleItem({item:e,allbackgrounditems:this.refurbData.background_items,allzoomedelements:this.allzoomedelements,thencall:this.updatechartsize})},clickDIV(){},updatechartsize(){let t=this.refurbData.background_items.reduce((e,n)=>e=e+n.item_data.height,0);this.boudaryRect.attr("height",t+200)},initChart(){for(var t=this,e=function(r){var i=800,o=800;r.svg=Pi("svg").attr("style","border: 1px solid black;position:fixed; top:0; left:0; height:100%; width:100%").attr("viewBox",[-i/2,-o/2,i,o]).attr("oncontextmenu","return false;"),r.allzoomedelements=r.svg.append("g"),t.boudaryRect=r.allzoomedelements.append("rect").attr("width",r.chartarea.xmax-r.chartarea.xmin).attr("height",r.chartarea.ymax-r.chartarea.ymin).attr("x",r.chartarea.xmin).attr("y",r.chartarea.ymin).attr("style","fill: white;stroke-width:3;stroke:rgb(0,0,0)").on("contextmenu",r.UIInputZoomedBackgroundContextMenu).on("dblclick",r.UIInputZoomedBackgroundDoubleClick).on("click",r.UIInputZoomedBackgroundClick),r.svg.call(Ia().extent([[0,0],[i,o]]).scaleExtent([-5,10]).on("zoom",a)),r.svg.on("dblclick.zoom",null);function a(l,s){r.allzoomedelements.attr("transform",l.transform)}return Kt.drawAllBackgroundItems({allbackgrounditems:t.refurbData.background_items,allzoomedelements:r.allzoomedelements,thencall:t.updatechartsize}),r.svg.node()},n=document.getElementById("chartInsetionPoint_adsdsa");n.firstChild;)console.log("Removing old SVG"),n.removeChild(n.firstChild);n.appendChild(e(this))}},mounted(){this.initChart()},unmounted(){}};function Ya(t,e,n,r,i,o){const a=Zt("addFloorplanDialog");return lt(),gt("div",null,[Pt("div",{id:"chartInsetionPoint_adsdsa",onClick:e[0]||(e[0]=l=>o.clickDIV(l))}),$(ir,{position:"bottom-right",offset:[18,18]},{default:K(()=>[$(er,{color:"grey",icon:"keyboard_arrow_up",direction:"up","vertical-actions-align":"right"},{default:K(()=>[$(be,{color:"grey",onClick:o.onClickAddFloorplan,icon:"add",label:"Add floorplan"},null,8,["onClick"]),$(be,{color:"grey",onClick:o.onClickAddOtherAreas,icon:"add",label:"Add other areas"},null,8,["onClick"])]),_:1})]),_:1}),$(a,{ref:"addFloorplanDialog",onOk:o.onDialogCompleteAddFloorplan,refurbData:n.refurbData},null,8,["onOk","refurbData"])])}var Ga=Vt(Ua,[["render",Ya]]);function Ka(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{var n=document.execCommand("copy"),r=n?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+r)}catch(i){Notify.create("Fallback: Oops, unable to copy"+i)}document.body.removeChild(e)}function Ja(t,e){if(!navigator.clipboard){Ka(t);return}navigator.clipboard.writeText(t).then(function(){e.ok()},function(n){e.error("Copy Failed: "+n)})}var Wa={copyTextToClipboard:Ja};const Za={name:"JsonComponent",props:["modelValue"],emits:["update:modelValue"],computed:{value:{get(){return JSON.stringify(this.modelValue)},set(t){this.$emit("update:modelValue",JSON.parse(t))}}},methods:{copytoclipboard(){const t={ok:function(){Wt.create({color:"bg-grey-2",message:"Copied sucessfully",timeout:2})},error:function(e){Wt.create({color:"bg-grey-2",message:e,timeout:2})}};Wa.copyTextToClipboard(this.value,t)},resetdata(){var t=at.getNewlyCreatedDataSet();this.value=JSON.stringify(t),this.$emit("update:modelValue",t)}}},ja=Pt("h1",null,"Json Data",-1),tl=Pt("div",null,"Use this page to save and restore data for this tool. To save the data copy to clipboard then store the text. To restore the data paste the copied text into the box below",-1);function el(t,e,n,r,i,o){return lt(),gt("div",null,[ja,tl,$(rt,{label:"Copy to clipboard",color:"primary",icon:"content_copy",onClick:o.copytoclipboard},null,8,["onClick"]),$(rt,{label:"Reset Data",icon:"delete",onClick:o.resetdata},null,8,["onClick"]),$(Ge,{filled:"",type:"textarea",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a)},null,8,["modelValue"]),Jt(" modelValue: "+xe(n.modelValue)+" value: "+xe(o.value),1)])}var nl=Vt(Za,[["render",el]]);const rl=Gn({name:"CalcRefurbishment",components:{plansChart:Ga,jsonView:nl},data(){return{refurb_mode:"plans",refurb_data:at.getNewlyCreatedDataSet()}},methods:{click_refurb_menu(t){this.refurb_mode=t}},mounted(){var t=this;this.$bus.on("click_refurb_menu",e=>{t.click_refurb_menu(e)})},unmounted(){}}),il={class:"main-page fit col wrap justify-center items-center content-center"},ol={key:0},al={key:1};function ll(t,e,n,r,i,o){const a=Zt("plansChart"),l=Zt("jsonView");return lt(),gt("div",null,[$(En,{class:"flex flex-center"},{default:K(()=>[Pt("div",il,[t.refurb_mode==="plans"?(lt(),gt("div",ol,[$(a,{ref:"plansChart",refurbData:t.refurb_data},null,8,["refurbData"])])):we("",!0),t.refurb_mode==="json"?(lt(),gt("div",al,[$(l,{ref:"jsonView","model-value":t.refurb_data,"onUpdate:modelValue":e[0]||(e[0]=s=>t.refurb_data=s)},null,8,["model-value"])])):we("",!0)])]),_:1})])}var fl=Vt(rl,[["render",ll]]);export{fl as default};
